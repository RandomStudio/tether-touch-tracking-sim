var Et=Object.defineProperty,St=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable;var Xe=(c,h,d)=>h in c?Et(c,h,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[h]=d,Re=(c,h)=>{for(var d in h||(h={}))Tt.call(h,d)&&Xe(c,d,h[d]);if(Ye)for(var d of Ye(h))Ct.call(h,d)&&Xe(c,d,h[d]);return c},Me=(c,h)=>St(c,xt(h));var Oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ze(c){if(c.__esModule)return c;var h=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(c).forEach(function(d){var o=Object.getOwnPropertyDescriptor(c,d);Object.defineProperty(h,d,o.get?o:{enumerable:!0,get:function(){return c[d]}})}),h}var Se={},we=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{};(function(c){if(typeof exports=="object"&&typeof module!="undefined")module.exports=c();else if(typeof define=="function"&&define.amd)define([],c);else{var h;typeof window!="undefined"?h=window:typeof we!="undefined"?h=we:typeof self!="undefined"?h=self:h=this,h.mqtt=c()}})(function(){return function(){function c(h,d,o){function n(f,e){if(!d[f]){if(!h[f]){var r=typeof require=="function"&&require;if(!e&&r)return r(f,!0);if(l)return l(f,!0);var t=new Error("Cannot find module '"+f+"'");throw t.code="MODULE_NOT_FOUND",t}var i=d[f]={exports:{}};h[f][0].call(i.exports,function(y){var u=h[f][1][y];return n(u||y)},i,i.exports,c,h,d,o)}return d[f].exports}for(var l=typeof require=="function"&&require,a=0;a<o.length;a++)n(o[a]);return n}return c}()({1:[function(c,h,d){(function(o,n){(function(){const l=c("events").EventEmitter,a=c("./store"),f=c("./topic-alias-recv"),e=c("./topic-alias-send"),r=c("mqtt-packet"),t=c("./default-message-id-provider"),i=c("readable-stream").Writable,y=c("inherits"),u=c("reinterval"),m=c("rfdc/default"),b=c("./validations"),p=c("xtend"),s=c("debug")("mqttjs:client"),_=o?o.nextTick:function(A){setTimeout(A,0)},T=n.setImmediate||function(A){_(A)},I={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},L=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],B={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function O(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function W(A,M){if(A.options.protocolVersion===5&&M.cmd==="publish"){let N;M.properties&&(N=M.properties.topicAlias);const G=M.topic.toString();if(A.topicAliasSend)if(N){if(G.length!==0&&(s("applyTopicAlias :: register topic: %s - alias: %d",G,N),!A.topicAliasSend.put(G,N)))return s("applyTopicAlias :: error out of range. topic: %s - alias: %d",G,N),new Error("Sending Topic Alias out of range")}else G.length!==0&&(A.options.autoAssignTopicAlias?(N=A.topicAliasSend.getAliasByTopic(G),N?(M.topic="",M.properties=Me(Re({},M.properties),{topicAlias:N}),s("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",G,N)):(N=A.topicAliasSend.getLruAlias(),A.topicAliasSend.put(G,N),M.properties=Me(Re({},M.properties),{topicAlias:N}),s("applyTopicAlias :: auto assign topic: %s - alias: %d",G,N))):A.options.autoUseTopicAlias&&(N=A.topicAliasSend.getAliasByTopic(G),N&&(M.topic="",M.properties=Me(Re({},M.properties),{topicAlias:N}),s("applyTopicAlias :: auto use topic: %s - alias: %d",G,N))));else if(N)return s("applyTopicAlias :: error out of range. topic: %s - alias: %d",G,N),new Error("Sending Topic Alias out of range")}}function v(A,M){let N;M.properties&&(N=M.properties.topicAlias);let G=M.topic.toString();if(G.length===0){if(typeof N=="undefined")return new Error("Unregistered Topic Alias");if(G=A.topicAliasSend.getTopicByAlias(N),typeof G=="undefined")return new Error("Unregistered Topic Alias");M.topic=G}N&&delete M.properties.topicAlias}function x(A,M,N){s("sendPacket :: packet: %O",M),s("sendPacket :: emitting `packetsend`"),A.emit("packetsend",M),s("sendPacket :: writing to stream");const G=r.writeToStream(M,A.stream,A.options);s("sendPacket :: writeToStream result %s",G),!G&&N?(s("sendPacket :: handle events on `drain` once through callback."),A.stream.once("drain",N)):N&&(s("sendPacket :: invoking cb"),N())}function E(A){A&&(s("flush: queue exists? %b",!!A),Object.keys(A).forEach(function(M){typeof A[M].cb=="function"&&(A[M].cb(new Error("Connection closed")),delete A[M])}))}function D(A){A&&(s("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(A).forEach(function(M){A[M].volatile&&typeof A[M].cb=="function"&&(A[M].cb(new Error("Connection closed")),delete A[M])}))}function V(A,M,N,G){s("storeAndSend :: store packet with cmd %s to outgoingStore",M.cmd);let oe=M,ne;if(oe.cmd==="publish"&&(oe=m(M),ne=v(A,oe),ne))return N&&N(ne);A.outgoingStore.put(oe,function(Q){if(Q)return N&&N(Q);G(),x(A,M,N)})}function q(A){s("nop ::",A)}function Y(A,M){let N;const G=this;if(!(this instanceof Y))return new Y(A,M);this.options=M||{};for(N in I)typeof this.options[N]=="undefined"?this.options[N]=I[N]:this.options[N]=M[N];s("MqttClient :: options.protocol",M.protocol),s("MqttClient :: options.protocolVersion",M.protocolVersion),s("MqttClient :: options.username",M.username),s("MqttClient :: options.keepalive",M.keepalive),s("MqttClient :: options.reconnectPeriod",M.reconnectPeriod),s("MqttClient :: options.rejectUnauthorized",M.rejectUnauthorized),s("MqttClient :: options.topicAliasMaximum",M.topicAliasMaximum),this.options.clientId=typeof M.clientId=="string"?M.clientId:O(),s("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=M.protocolVersion===5&&M.customHandleAcks?M.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=A,this.messageIdProvider=typeof this.options.messageIdProvider=="undefined"?new t:this.options.messageIdProvider,this.outgoingStore=M.outgoingStore||new a,this.incomingStore=M.incomingStore||new a,this.queueQoSZero=M.queueQoSZero===void 0?!0:M.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,M.topicAliasMaximum>0&&(M.topicAliasMaximum>65535?s("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new f(M.topicAliasMaximum)),this.on("connect",function(){const oe=this.queue;function ne(){const K=oe.shift();s("deliver :: entry %o",K);let Q=null;if(!K){G._resubscribe();return}Q=K.packet,s("deliver :: call _sendPacket for %o",Q);let re=!0;Q.messageId&&Q.messageId!==0&&(G.messageIdProvider.register(Q.messageId)||(re=!1)),re?G._sendPacket(Q,function(ee){K.cb&&K.cb(ee),ne()}):(s("messageId: %d has already used. The message is skipped and removed.",Q.messageId),ne())}s("connect :: sending queued packets"),ne()}),this.on("close",function(){s("close :: connected set to `false`"),this.connected=!1,s("close :: clearing connackTimer"),clearTimeout(this.connackTimer),s("close :: clearing ping timer"),G.pingTimer!==null&&(G.pingTimer.clear(),G.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),s("close :: calling _setupReconnect"),this._setupReconnect()}),l.call(this),s("MqttClient :: setting up stream"),this._setupStream()}y(Y,l),Y.prototype._setupStream=function(){const A=this,M=new i,N=r.parser(this.options);let G=null;const oe=[];s("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),s("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),N.on("packet",function(ee){s("parser :: on packet push to packets array."),oe.push(ee)});function ne(){if(oe.length)_(K);else{const ee=G;G=null,ee()}}function K(){s("work :: getting next packet in queue");const ee=oe.shift();if(ee)s("work :: packet pulled from queue"),A._handlePacket(ee,ne);else{s("work :: no packets in queue");const se=G;G=null,s("work :: done flag is %s",!!se),se&&se()}}M._write=function(ee,se,ie){G=ie,s("writable stream :: parsing buffer"),N.parse(ee),K()};function Q(ee){s("streamErrorHandler :: error",ee.message),L.includes(ee.code)?(s("streamErrorHandler :: emitting error"),A.emit("error",ee)):q(ee)}s("_setupStream :: pipe stream to writable stream"),this.stream.pipe(M),this.stream.on("error",Q),this.stream.on("close",function(){s("(%s)stream :: on close",A.options.clientId),D(A.outgoing),s("stream: emit close to MqttClient"),A.emit("close")}),s("_setupStream: sending packet `connect`");const re=Object.create(this.options);if(re.cmd="connect",this.topicAliasRecv&&(re.properties||(re.properties={}),this.topicAliasRecv&&(re.properties.topicAliasMaximum=this.topicAliasRecv.max)),x(this,re),N.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return A.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const ee=p({cmd:"auth",reasonCode:0},this.options.authPacket);x(this,ee)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){s("!!connectTimeout hit!! Calling _cleanUp with force `true`"),A._cleanUp(!0)},this.options.connectTimeout)},Y.prototype._handlePacket=function(A,M){const N=this.options;if(N.protocolVersion===5&&N.properties&&N.properties.maximumPacketSize&&N.properties.maximumPacketSize<A.length)return this.emit("error",new Error("exceeding packets size "+A.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(s("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",A),A.cmd){case"publish":this._handlePublish(A,M);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(A),M();break;case"pubrel":this._handlePubrel(A,M);break;case"connack":this._handleConnack(A),M();break;case"auth":this._handleAuth(A),M();break;case"pingresp":this._handlePingresp(A),M();break;case"disconnect":this._handleDisconnect(A),M();break}},Y.prototype._checkDisconnecting=function(A){return this.disconnecting&&(A?A(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},Y.prototype.publish=function(A,M,N,G){s("publish :: message `%s` to topic `%s`",M,A);const oe=this.options;if(typeof N=="function"&&(G=N,N=null),N=p({qos:0,retain:!1,dup:!1},N),this._checkDisconnecting(G))return this;const K=this,Q=function(){let re=0;if((N.qos===1||N.qos===2)&&(re=K._nextId(),re===null))return s("No messageId left"),!1;const ee={cmd:"publish",topic:A,payload:M,qos:N.qos,retain:N.retain,messageId:re,dup:N.dup};switch(oe.protocolVersion===5&&(ee.properties=N.properties),s("publish :: qos",N.qos),N.qos){case 1:case 2:K.outgoing[ee.messageId]={volatile:!1,cb:G||q},s("MqttClient:publish: packet cmd: %s",ee.cmd),K._sendPacket(ee,void 0,N.cbStorePut);break;default:s("MqttClient:publish: packet cmd: %s",ee.cmd),K._sendPacket(ee,G,N.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,cbStorePut:N.cbStorePut,callback:G}),this},Y.prototype.subscribe=function(){const A=this,M=new Array(arguments.length);for(let ie=0;ie<arguments.length;ie++)M[ie]=arguments[ie];const N=[];let G=M.shift();const oe=G.resubscribe;let ne=M.pop()||q,K=M.pop();const Q=this.options.protocolVersion;delete G.resubscribe,typeof G=="string"&&(G=[G]),typeof ne!="function"&&(K=ne,ne=q);const re=b.validateTopics(G);if(re!==null)return T(ne,new Error("Invalid topic "+re)),this;if(this._checkDisconnecting(ne))return s("subscribe: discconecting true"),this;const ee={qos:0};if(Q===5&&(ee.nl=!1,ee.rap=!1,ee.rh=0),K=p(ee,K),Array.isArray(G)?G.forEach(function(ie){if(s("subscribe: array topic %s",ie),!Object.prototype.hasOwnProperty.call(A._resubscribeTopics,ie)||A._resubscribeTopics[ie].qos<K.qos||oe){const H={topic:ie,qos:K.qos};Q===5&&(H.nl=K.nl,H.rap=K.rap,H.rh=K.rh,H.properties=K.properties),s("subscribe: pushing topic `%s` and qos `%s` to subs list",H.topic,H.qos),N.push(H)}}):Object.keys(G).forEach(function(ie){if(s("subscribe: object topic %s",ie),!Object.prototype.hasOwnProperty.call(A._resubscribeTopics,ie)||A._resubscribeTopics[ie].qos<G[ie].qos||oe){const H={topic:ie,qos:G[ie].qos};Q===5&&(H.nl=G[ie].nl,H.rap=G[ie].rap,H.rh=G[ie].rh,H.properties=K.properties),s("subscribe: pushing `%s` to subs list",H),N.push(H)}}),!N.length)return ne(null,[]),this;const se=function(){const ie=A._nextId();if(ie===null)return s("No messageId left"),!1;const H={cmd:"subscribe",subscriptions:N,qos:1,retain:!1,dup:!1,messageId:ie};if(K.properties&&(H.properties=K.properties),A.options.resubscribe){s("subscribe :: resubscribe true");const F=[];N.forEach(function(Z){if(A.options.reconnectPeriod>0){const U={qos:Z.qos};Q===5&&(U.nl=Z.nl||!1,U.rap=Z.rap||!1,U.rh=Z.rh||0,U.properties=Z.properties),A._resubscribeTopics[Z.topic]=U,F.push(Z.topic)}}),A.messageIdToTopic[H.messageId]=F}return A.outgoing[H.messageId]={volatile:!0,cb:function(F,Z){if(!F){const U=Z.granted;for(let P=0;P<U.length;P+=1)N[P].qos=U[P]}ne(F,N)}},s("subscribe :: call _sendPacket"),A._sendPacket(H),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!se())&&this._storeProcessingQueue.push({invoke:se,callback:ne}),this},Y.prototype.unsubscribe=function(){const A=this,M=new Array(arguments.length);for(let Q=0;Q<arguments.length;Q++)M[Q]=arguments[Q];let N=M.shift(),G=M.pop()||q,oe=M.pop();typeof N=="string"&&(N=[N]),typeof G!="function"&&(oe=G,G=q);const ne=b.validateTopics(N);if(ne!==null)return T(G,new Error("Invalid topic "+ne)),this;if(A._checkDisconnecting(G))return this;const K=function(){const Q=A._nextId();if(Q===null)return s("No messageId left"),!1;const re={cmd:"unsubscribe",qos:1,messageId:Q};return typeof N=="string"?re.unsubscriptions=[N]:Array.isArray(N)&&(re.unsubscriptions=N),A.options.resubscribe&&re.unsubscriptions.forEach(function(ee){delete A._resubscribeTopics[ee]}),typeof oe=="object"&&oe.properties&&(re.properties=oe.properties),A.outgoing[re.messageId]={volatile:!0,cb:G},s("unsubscribe: call _sendPacket"),A._sendPacket(re),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:G}),this},Y.prototype.end=function(A,M,N){const G=this;s("end :: (%s)",this.options.clientId),(A==null||typeof A!="boolean")&&(N=M||q,M=A,A=!1,typeof M!="object"&&(N=M,M=null,typeof N!="function"&&(N=q))),typeof M!="object"&&(N=M,M=null),s("end :: cb? %s",!!N),N=N||q;function oe(){s("end :: closeStores: closing incoming and outgoing stores"),G.disconnected=!0,G.incomingStore.close(function(K){G.outgoingStore.close(function(Q){if(s("end :: closeStores: emitting end"),G.emit("end"),N){const re=K||Q;s("end :: closeStores: invoking callback with args"),N(re)}})}),G._deferredReconnect&&G._deferredReconnect()}function ne(){s("end :: (%s) :: finish :: calling _cleanUp with force %s",G.options.clientId,A),G._cleanUp(A,()=>{s("end :: finish :: calling process.nextTick on closeStores"),_(oe.bind(G))},M)}return this.disconnecting?(N(),this):(this._clearReconnect(),this.disconnecting=!0,!A&&Object.keys(this.outgoing).length>0?(s("end :: (%s) :: calling finish in 10ms once outgoing is empty",G.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,ne,10))):(s("end :: (%s) :: immediately calling finish",G.options.clientId),ne()),this)},Y.prototype.removeOutgoingMessage=function(A){const M=this.outgoing[A]?this.outgoing[A].cb:null;return delete this.outgoing[A],this.outgoingStore.del({messageId:A},function(){M(new Error("Message removed"))}),this},Y.prototype.reconnect=function(A){s("client reconnect");const M=this,N=function(){A?(M.options.incomingStore=A.incomingStore,M.options.outgoingStore=A.outgoingStore):(M.options.incomingStore=null,M.options.outgoingStore=null),M.incomingStore=M.options.incomingStore||new a,M.outgoingStore=M.options.outgoingStore||new a,M.disconnecting=!1,M.disconnected=!1,M._deferredReconnect=null,M._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=N:N(),this},Y.prototype._reconnect=function(){s("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),s("client already connected. disconnecting first.")):(s("_reconnect: calling _setupStream"),this._setupStream())},Y.prototype._setupReconnect=function(){const A=this;!A.disconnecting&&!A.reconnectTimer&&A.options.reconnectPeriod>0?(this.reconnecting||(s("_setupReconnect :: emit `offline` state"),this.emit("offline"),s("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),s("_setupReconnect :: setting reconnectTimer for %d ms",A.options.reconnectPeriod),A.reconnectTimer=setInterval(function(){s("reconnectTimer :: reconnect triggered!"),A._reconnect()},A.options.reconnectPeriod)):s("_setupReconnect :: doing nothing...")},Y.prototype._clearReconnect=function(){s("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},Y.prototype._cleanUp=function(A,M){const N=arguments[2];if(M&&(s("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",M)),s("_cleanUp :: forced? %s",A),A)this.options.reconnectPeriod===0&&this.options.clean&&E(this.outgoing),s("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const G=p({cmd:"disconnect"},N);s("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(G,T.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(s("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(s("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),M&&!this.connected&&(s("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",M),M())},Y.prototype._sendPacket=function(A,M,N){s("_sendPacket :: (%s) ::  start",this.options.clientId),N=N||q,M=M||q;const G=W(this,A);if(G){M(G);return}if(!this.connected){if(A.cmd==="auth"){this._shiftPingInterval(),x(this,A,M);return}s("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(A,M,N);return}switch(this._shiftPingInterval(),A.cmd){case"publish":break;case"pubrel":V(this,A,M,N);return;default:x(this,A,M);return}switch(A.qos){case 2:case 1:V(this,A,M,N);break;case 0:default:x(this,A,M);break}s("_sendPacket :: (%s) ::  end",this.options.clientId)},Y.prototype._storePacket=function(A,M,N){s("_storePacket :: packet: %o",A),s("_storePacket :: cb? %s",!!M),N=N||q;let G=A;if(G.cmd==="publish"){G=m(A);const oe=v(this,G);if(oe)return M&&M(oe)}(G.qos||0)===0&&this.queueQoSZero||G.cmd!=="publish"?this.queue.push({packet:G,cb:M}):G.qos>0?(M=this.outgoing[G.messageId]?this.outgoing[G.messageId].cb:null,this.outgoingStore.put(G,function(oe){if(oe)return M&&M(oe);N()})):M&&M(new Error("No connection to broker"))},Y.prototype._setupPingTimer=function(){s("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const A=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=u(function(){A._checkPing()},this.options.keepalive*1e3))},Y.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)},Y.prototype._checkPing=function(){s("_checkPing :: checking ping..."),this.pingResp?(s("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(s("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},Y.prototype._handlePingresp=function(){this.pingResp=!0},Y.prototype._handleConnack=function(A){s("_handleConnack");const M=this.options,G=M.protocolVersion===5?A.reasonCode:A.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,A.properties){if(A.properties.topicAliasMaximum){if(A.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}A.properties.topicAliasMaximum>0&&(this.topicAliasSend=new e(A.properties.topicAliasMaximum))}A.properties.serverKeepAlive&&M.keepalive&&(M.keepalive=A.properties.serverKeepAlive,this._shiftPingInterval()),A.properties.maximumPacketSize&&(M.properties||(M.properties={}),M.properties.maximumPacketSize=A.properties.maximumPacketSize)}if(G===0)this.reconnecting=!1,this._onConnect(A);else if(G>0){const oe=new Error("Connection refused: "+B[G]);oe.code=G,this.emit("error",oe)}},Y.prototype._handleAuth=function(A){const N=this.options.protocolVersion,G=N===5?A.reasonCode:A.returnCode;if(N!==5){const ne=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+N);ne.code=G,this.emit("error",ne);return}const oe=this;this.handleAuth(A,function(ne,K){if(ne){oe.emit("error",ne);return}if(G===24)oe.reconnecting=!1,oe._sendPacket(K);else{const Q=new Error("Connection refused: "+B[G]);ne.code=G,oe.emit("error",Q)}})},Y.prototype.handleAuth=function(A,M){M()},Y.prototype._handlePublish=function(A,M){s("_handlePublish: packet %o",A),M=typeof M!="undefined"?M:q;let N=A.topic.toString();const G=A.payload,oe=A.qos,ne=A.messageId,K=this,Q=this.options,re=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let ee;if(A.properties&&(ee=A.properties.topicAlias),typeof ee!="undefined")if(N.length===0)if(ee>0&&ee<=65535){const se=this.topicAliasRecv.getTopicByAlias(ee);if(se)N=se,s("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",N,ee);else{s("_handlePublish :: unregistered topic alias. alias: %d",ee),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{s("_handlePublish :: topic alias out of range. alias: %d",ee),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(N,ee))s("_handlePublish :: registered topic: %s - alias: %d",N,ee);else{s("_handlePublish :: topic alias out of range. alias: %d",ee),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(s("_handlePublish: qos %d",oe),oe){case 2:{Q.customHandleAcks(N,G,A,function(ee,se){if(ee instanceof Error||(se=ee,ee=null),ee)return K.emit("error",ee);if(re.indexOf(se)===-1)return K.emit("error",new Error("Wrong reason code for pubrec"));se?K._sendPacket({cmd:"pubrec",messageId:ne,reasonCode:se},M):K.incomingStore.put(A,function(){K._sendPacket({cmd:"pubrec",messageId:ne},M)})});break}case 1:{Q.customHandleAcks(N,G,A,function(ee,se){if(ee instanceof Error||(se=ee,ee=null),ee)return K.emit("error",ee);if(re.indexOf(se)===-1)return K.emit("error",new Error("Wrong reason code for puback"));se||K.emit("message",N,G,A),K.handleMessage(A,function(ie){if(ie)return M&&M(ie);K._sendPacket({cmd:"puback",messageId:ne,reasonCode:se},M)})});break}case 0:this.emit("message",N,G,A),this.handleMessage(A,M);break;default:s("_handlePublish: unknown QoS. Doing nothing.");break}},Y.prototype.handleMessage=function(A,M){M()},Y.prototype._handleAck=function(A){const M=A.messageId,N=A.cmd;let G=null;const oe=this.outgoing[M]?this.outgoing[M].cb:null,ne=this;let K;if(!oe){s("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(s("_handleAck :: packet type",N),N){case"pubcomp":case"puback":{const Q=A.reasonCode;Q&&Q>0&&Q!==16&&(K=new Error("Publish error: "+B[Q]),K.code=Q,oe(K,A)),delete this.outgoing[M],this.outgoingStore.del(A,oe),this.messageIdProvider.deallocate(M),this._invokeStoreProcessingQueue();break}case"pubrec":{G={cmd:"pubrel",qos:2,messageId:M};const Q=A.reasonCode;Q&&Q>0&&Q!==16?(K=new Error("Publish error: "+B[Q]),K.code=Q,oe(K,A)):this._sendPacket(G);break}case"suback":{delete this.outgoing[M],this.messageIdProvider.deallocate(M);for(let Q=0;Q<A.granted.length;Q++)if((A.granted[Q]&128)!=0){const re=this.messageIdToTopic[M];re&&re.forEach(function(ee){delete ne._resubscribeTopics[ee]})}this._invokeStoreProcessingQueue(),oe(null,A);break}case"unsuback":{delete this.outgoing[M],this.messageIdProvider.deallocate(M),this._invokeStoreProcessingQueue(),oe(null);break}default:ne.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")},Y.prototype._handlePubrel=function(A,M){s("handling pubrel packet"),M=typeof M!="undefined"?M:q;const N=A.messageId,G=this,oe={cmd:"pubcomp",messageId:N};G.incomingStore.get(A,function(ne,K){ne?G._sendPacket(oe,M):(G.emit("message",K.topic,K.payload,K),G.handleMessage(K,function(Q){if(Q)return M(Q);G.incomingStore.del(K,q),G._sendPacket(oe,M)}))})},Y.prototype._handleDisconnect=function(A){this.emit("disconnect",A)},Y.prototype._nextId=function(){return this.messageIdProvider.allocate()},Y.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},Y.prototype._resubscribe=function(){s("_resubscribe");const A=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&A.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){s("_resubscribe: protocolVersion 5");for(let M=0;M<A.length;M++){const N={};N[A[M]]=this._resubscribeTopics[A[M]],N.resubscribe=!0,this.subscribe(N,{properties:N[A[M]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},Y.prototype._onConnect=function(A){if(this.disconnected){this.emit("connect",A);return}const M=this;this.connackPacket=A,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function N(){let G=M.outgoingStore.createStream();function oe(){M._storeProcessing=!1,M._packetIdsDuringStoreProcessing={}}M.once("close",ne),G.on("error",function(Q){oe(),M._flushStoreProcessingQueue(),M.removeListener("close",ne),M.emit("error",Q)});function ne(){G.destroy(),G=null,M._flushStoreProcessingQueue(),oe()}function K(){if(!G)return;M._storeProcessing=!0;const Q=G.read(1);let re;if(!Q){G.once("readable",K);return}if(M._packetIdsDuringStoreProcessing[Q.messageId]){K();return}!M.disconnecting&&!M.reconnectTimer?(re=M.outgoing[Q.messageId]?M.outgoing[Q.messageId].cb:null,M.outgoing[Q.messageId]={volatile:!1,cb:function(ee,se){re&&re(ee,se),K()}},M._packetIdsDuringStoreProcessing[Q.messageId]=!0,M.messageIdProvider.register(Q.messageId)?M._sendPacket(Q):s("messageId: %d has already used.",Q.messageId)):G.destroy&&G.destroy()}G.on("end",function(){let Q=!0;for(const re in M._packetIdsDuringStoreProcessing)if(!M._packetIdsDuringStoreProcessing[re]){Q=!1;break}Q?(oe(),M.removeListener("close",ne),M._invokeAllStoreProcessingQueue(),M.emit("connect",A)):N()}),K()}N()},Y.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const A=this._storeProcessingQueue[0];if(A&&A.invoke())return this._storeProcessingQueue.shift(),!0}return!1},Y.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},Y.prototype._flushStoreProcessingQueue=function(){for(const A of this._storeProcessingQueue)A.cbStorePut&&A.cbStorePut(new Error("Connection closed")),A.callback&&A.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},h.exports=Y}).call(this)}).call(this,c("_process"),typeof we!="undefined"?we:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(c,h,d){(function(o){(function(){const n=c("readable-stream").Transform,l=c("duplexify");let a,f,e,r=!1;function t(){const b=new n;return b._write=function(p,s,_){a.sendSocketMessage({data:p.buffer,success:function(){_()},fail:function(){_(new Error)}})},b._flush=function(s){a.closeSocket({success:function(){s()}})},b}function i(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function y(b,p){const s=b.protocol==="alis"?"wss":"ws";let _=s+"://"+b.hostname+b.path;return b.port&&b.port!==80&&b.port!==443&&(_=s+"://"+b.hostname+":"+b.port+b.path),typeof b.transformWsUrl=="function"&&(_=b.transformWsUrl(_,b,p)),_}function u(){r||(r=!0,a.onSocketOpen(function(){e.setReadable(f),e.setWritable(f),e.emit("connect")}),a.onSocketMessage(function(b){if(typeof b.data=="string"){const p=o.from(b.data,"base64");f.push(p)}else{const p=new FileReader;p.addEventListener("load",function(){let s=p.result;s instanceof ArrayBuffer?s=o.from(s):s=o.from(s,"utf8"),f.push(s)}),p.readAsArrayBuffer(b.data)}}),a.onSocketClose(function(){e.end(),e.destroy()}),a.onSocketError(function(b){e.destroy(b)}))}function m(b,p){if(p.hostname=p.hostname||p.host,!p.hostname)throw new Error("Could not determine host. Specify host manually.");const s=p.protocolId==="MQIsdp"&&p.protocolVersion===3?"mqttv3.1":"mqtt";i(p);const _=y(p,b);return a=p.my,a.connectSocket({url:_,protocols:s}),f=t(),e=l.obj(),u(),e}h.exports=m}).call(this)}).call(this,c("buffer").Buffer)},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(c,h,d){const o=c("net"),n=c("debug")("mqttjs:tcp");function l(a,f){f.port=f.port||1883,f.hostname=f.hostname||f.host||"localhost";const e=f.port,r=f.hostname;return n("port %d and host %s",e,r),o.createConnection(e,r)}h.exports=l},{debug:18,net:16}],4:[function(c,h,d){const o=c("tls"),n=c("net"),l=c("debug")("mqttjs:tls");function a(f,e){e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",n.isIP(e.host)===0&&(e.servername=e.host),e.rejectUnauthorized=e.rejectUnauthorized!==!1,delete e.path,l("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);const r=o.connect(e);r.on("secureConnect",function(){e.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",t)});function t(i){e.rejectUnauthorized&&f.emit("error",i),r.end()}return r.on("error",t),r}h.exports=a},{debug:18,net:16,tls:16}],5:[function(c,h,d){(function(o,n){(function(){const l=c("ws"),a=c("debug")("mqttjs:ws"),f=c("duplexify"),e=c("readable-stream").Transform,r=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],t=typeof o!="undefined"&&o.title==="browser"||typeof __webpack_require__=="function";function i(_,T){let I=_.protocol+"://"+_.hostname+":"+_.port+_.path;return typeof _.transformWsUrl=="function"&&(I=_.transformWsUrl(I,_,T)),I}function y(_){const T=_;return _.hostname||(T.hostname="localhost"),_.port||(_.protocol==="wss"?T.port=443:T.port=80),_.path||(T.path="/"),_.wsOptions||(T.wsOptions={}),!t&&_.protocol==="wss"&&r.forEach(function(I){Object.prototype.hasOwnProperty.call(_,I)&&!Object.prototype.hasOwnProperty.call(_.wsOptions,I)&&(T.wsOptions[I]=_[I])}),T}function u(_){const T=y(_);if(T.hostname||(T.hostname=T.host),!T.hostname){if(typeof document=="undefined")throw new Error("Could not determine host. Specify host manually.");const I=new URL(document.URL);T.hostname=I.hostname,T.port||(T.port=I.port)}return T.objectMode===void 0&&(T.objectMode=!(T.binary===!0||T.binary===void 0)),T}function m(_,T,I){a("createWebSocket"),a("protocol: "+I.protocolId+" "+I.protocolVersion);const L=I.protocolId==="MQIsdp"&&I.protocolVersion===3?"mqttv3.1":"mqtt";return a("creating new Websocket for url: "+T+" and protocol: "+L),new l(T,[L],I.wsOptions)}function b(_,T){const I=T.protocolId==="MQIsdp"&&T.protocolVersion===3?"mqttv3.1":"mqtt",L=i(T,_),B=new WebSocket(L,[I]);return B.binaryType="arraybuffer",B}function p(_,T){a("streamBuilder");const I=y(T),L=i(I,_),B=m(_,L,I),O=l.createWebSocketStream(B,I.wsOptions);return O.url=L,B.on("close",()=>{O.destroy()}),O}function s(_,T){a("browserStreamBuilder");let I;const B=u(T).browserBufferSize||1024*512,O=T.browserBufferTimeout||1e3,W=!T.objectMode,v=b(_,T),x=D(T,N,G);T.objectMode||(x._writev=M),x.on("close",()=>{v.close()});const E=typeof v.addEventListener!="undefined";v.readyState===v.OPEN?I=x:(I=I=f(void 0,void 0,T),T.objectMode||(I._writev=M),E?v.addEventListener("open",V):v.onopen=V),I.socket=v,E?(v.addEventListener("close",q),v.addEventListener("error",Y),v.addEventListener("message",A)):(v.onclose=q,v.onerror=Y,v.onmessage=A);function D(oe,ne,K){const Q=new e({objectModeMode:oe.objectMode});return Q._write=ne,Q._flush=K,Q}function V(){I.setReadable(x),I.setWritable(x),I.emit("connect")}function q(){I.end(),I.destroy()}function Y(oe){I.destroy(oe)}function A(oe){let ne=oe.data;ne instanceof ArrayBuffer?ne=n.from(ne):ne=n.from(ne,"utf8"),x.push(ne)}function M(oe,ne){const K=new Array(oe.length);for(let Q=0;Q<oe.length;Q++)typeof oe[Q].chunk=="string"?K[Q]=n.from(oe[Q],"utf8"):K[Q]=oe[Q].chunk;this._write(n.concat(K),"binary",ne)}function N(oe,ne,K){v.bufferedAmount>B&&setTimeout(N,O,oe,ne,K),W&&typeof oe=="string"&&(oe=n.from(oe,"utf8"));try{v.send(oe)}catch(Q){return K(Q)}K()}function G(oe){v.close(),oe()}return I}t?h.exports=s:h.exports=p}).call(this)}).call(this,c("_process"),c("buffer").Buffer)},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(c,h,d){(function(o){(function(){const n=c("readable-stream").Transform,l=c("duplexify");let a,f,e;function r(){const m=new n;return m._write=function(b,p,s){a.send({data:b.buffer,success:function(){s()},fail:function(_){s(new Error(_))}})},m._flush=function(p){a.close({success:function(){p()}})},m}function t(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function i(m,b){const p=m.protocol==="wxs"?"wss":"ws";let s=p+"://"+m.hostname+m.path;return m.port&&m.port!==80&&m.port!==443&&(s=p+"://"+m.hostname+":"+m.port+m.path),typeof m.transformWsUrl=="function"&&(s=m.transformWsUrl(s,m,b)),s}function y(){a.onOpen(function(){e.setReadable(f),e.setWritable(f),e.emit("connect")}),a.onMessage(function(m){let b=m.data;b instanceof ArrayBuffer?b=o.from(b):b=o.from(b,"utf8"),f.push(b)}),a.onClose(function(){e.end(),e.destroy()}),a.onError(function(m){e.destroy(new Error(m.errMsg))})}function u(m,b){if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");const p=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";t(b);const s=i(b,m);a=wx.connectSocket({url:s,protocols:[p]}),f=r(),e=l.obj(),e._destroy=function(T,I){a.close({success:function(){I&&I(T)}})};const _=e.destroy;return e.destroy=function(){e.destroy=_;const T=this;setTimeout(function(){a.close({fail:function(){T._destroy(new Error)}})},0)}.bind(e),y(),e}h.exports=u}).call(this)}).call(this,c("buffer").Buffer)},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(c,h,d){function o(){if(!(this instanceof o))return new o;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}o.prototype.allocate=function(){const n=this.nextId++;return this.nextId===65536&&(this.nextId=1),n},o.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},o.prototype.register=function(n){return!0},o.prototype.deallocate=function(n){},o.prototype.clear=function(){},h.exports=o},{}],8:[function(c,h,d){const o=c("xtend"),n=c("readable-stream").Readable,l={objectMode:!0},a={clean:!0};function f(e){if(!(this instanceof f))return new f(e);this.options=e||{},this.options=o(a,e),this._inflights=new Map}f.prototype.put=function(e,r){return this._inflights.set(e.messageId,e),r&&r(),this},f.prototype.createStream=function(){const e=new n(l),r=[];let t=!1,i=0;return this._inflights.forEach(function(y,u){r.push(y)}),e._read=function(){!t&&i<r.length?this.push(r[i++]):this.push(null)},e.destroy=function(){if(t)return;const y=this;t=!0,setTimeout(function(){y.emit("close")},0)},e},f.prototype.del=function(e,r){return e=this._inflights.get(e.messageId),e?(this._inflights.delete(e.messageId),r(null,e)):r&&r(new Error("missing packet")),this},f.prototype.get=function(e,r){return e=this._inflights.get(e.messageId),e?r(null,e):r&&r(new Error("missing packet")),this},f.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},h.exports=f},{"readable-stream":69,xtend:81}],9:[function(c,h,d){function o(n){if(!(this instanceof o))return new o(n);this.aliasToTopic={},this.max=n}o.prototype.put=function(n,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=n,this.length=Object.keys(this.aliasToTopic).length,!0)},o.prototype.getTopicByAlias=function(n){return this.aliasToTopic[n]},o.prototype.clear=function(){this.aliasToTopic={}},h.exports=o},{}],10:[function(c,h,d){const o=c("lru-cache"),n=c("number-allocator").NumberAllocator;function l(a){if(!(this instanceof l))return new l(a);a>0&&(this.aliasToTopic=new o({max:a}),this.topicToAlias={},this.numberAllocator=new n(1,a),this.max=a,this.length=0)}l.prototype.put=function(a,f){if(f===0||f>this.max)return!1;const e=this.aliasToTopic.get(f);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(f,a),this.topicToAlias[a]=f,this.numberAllocator.use(f),this.length=this.aliasToTopic.length,!0},l.prototype.getTopicByAlias=function(a){return this.aliasToTopic.get(a)},l.prototype.getAliasByTopic=function(a){const f=this.topicToAlias[a];return typeof f!="undefined"&&this.aliasToTopic.get(f),f},l.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},l.prototype.getLruAlias=function(){const a=this.numberAllocator.firstVacant();return a||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},h.exports=l},{"lru-cache":37,"number-allocator":46}],11:[function(c,h,d){function o(l){const a=l.split("/");for(let f=0;f<a.length;f++)if(a[f]!=="+"){if(a[f]==="#")return f===a.length-1;if(a[f].indexOf("+")!==-1||a[f].indexOf("#")!==-1)return!1}return!0}function n(l){if(l.length===0)return"empty_topic_list";for(let a=0;a<l.length;a++)if(!o(l[a]))return l[a];return null}h.exports={validateTopics:n}},{}],12:[function(c,h,d){(function(o){(function(){const n=c("../client"),l=c("../store"),a=c("url"),f=c("xtend"),e=c("debug")("mqttjs"),r={};typeof o!="undefined"&&o.title!=="browser"||typeof __webpack_require__!="function"?(r.mqtt=c("./tcp"),r.tcp=c("./tcp"),r.ssl=c("./tls"),r.tls=c("./tls"),r.mqtts=c("./tls")):(r.wx=c("./wx"),r.wxs=c("./wx"),r.ali=c("./ali"),r.alis=c("./ali")),r.ws=c("./ws"),r.wss=c("./ws");function t(y){let u;y.auth&&(u=y.auth.match(/^(.+):(.+)$/),u?(y.username=u[1],y.password=u[2]):y.username=y.auth)}function i(y,u){if(e("connecting to an MQTT broker..."),typeof y=="object"&&!u&&(u=y,y=null),u=u||{},y){const p=a.parse(y,!0);if(p.port!=null&&(p.port=Number(p.port)),u=f(p,u),u.protocol===null)throw new Error("Missing protocol");u.protocol=u.protocol.replace(/:$/,"")}if(t(u),u.query&&typeof u.query.clientId=="string"&&(u.clientId=u.query.clientId),u.cert&&u.key)if(u.protocol){if(["mqtts","wss","wxs","alis"].indexOf(u.protocol)===-1)switch(u.protocol){case"mqtt":u.protocol="mqtts";break;case"ws":u.protocol="wss";break;case"wx":u.protocol="wxs";break;case"ali":u.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+u.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!r[u.protocol]){const p=["mqtts","wss"].indexOf(u.protocol)!==-1;u.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(s,_){return p&&_%2==0?!1:typeof r[s]=="function"})[0]}if(u.clean===!1&&!u.clientId)throw new Error("Missing clientId for unclean clients");u.protocol&&(u.defaultProtocol=u.protocol);function m(p){return u.servers&&((!p._reconnectCount||p._reconnectCount===u.servers.length)&&(p._reconnectCount=0),u.host=u.servers[p._reconnectCount].host,u.port=u.servers[p._reconnectCount].port,u.protocol=u.servers[p._reconnectCount].protocol?u.servers[p._reconnectCount].protocol:u.defaultProtocol,u.hostname=u.host,p._reconnectCount++),e("calling streambuilder for",u.protocol),r[u.protocol](p,u)}const b=new n(m,u);return b.on("error",function(){}),b}h.exports=i,h.exports.connect=i,h.exports.MqttClient=n,h.exports.Store=l}).call(this)}).call(this,c("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(c,h,d){d.byteLength=t,d.toByteArray=y,d.fromByteArray=b;for(var o=[],n=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,e=a.length;f<e;++f)o[f]=a[f],n[a.charCodeAt(f)]=f;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function r(p){var s=p.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=p.indexOf("=");_===-1&&(_=s);var T=_===s?0:4-_%4;return[_,T]}function t(p){var s=r(p),_=s[0],T=s[1];return(_+T)*3/4-T}function i(p,s,_){return(s+_)*3/4-_}function y(p){var s,_=r(p),T=_[0],I=_[1],L=new l(i(p,T,I)),B=0,O=I>0?T-4:T,W;for(W=0;W<O;W+=4)s=n[p.charCodeAt(W)]<<18|n[p.charCodeAt(W+1)]<<12|n[p.charCodeAt(W+2)]<<6|n[p.charCodeAt(W+3)],L[B++]=s>>16&255,L[B++]=s>>8&255,L[B++]=s&255;return I===2&&(s=n[p.charCodeAt(W)]<<2|n[p.charCodeAt(W+1)]>>4,L[B++]=s&255),I===1&&(s=n[p.charCodeAt(W)]<<10|n[p.charCodeAt(W+1)]<<4|n[p.charCodeAt(W+2)]>>2,L[B++]=s>>8&255,L[B++]=s&255),L}function u(p){return o[p>>18&63]+o[p>>12&63]+o[p>>6&63]+o[p&63]}function m(p,s,_){for(var T,I=[],L=s;L<_;L+=3)T=(p[L]<<16&16711680)+(p[L+1]<<8&65280)+(p[L+2]&255),I.push(u(T));return I.join("")}function b(p){for(var s,_=p.length,T=_%3,I=[],L=16383,B=0,O=_-T;B<O;B+=L)I.push(m(p,B,B+L>O?O:B+L));return T===1?(s=p[_-1],I.push(o[s>>2]+o[s<<4&63]+"==")):T===2&&(s=(p[_-2]<<8)+p[_-1],I.push(o[s>>10]+o[s>>4&63]+o[s<<2&63]+"=")),I.join("")}},{}],14:[function(c,h,d){const{Buffer:o}=c("buffer"),n=Symbol.for("BufferList");function l(a){if(!(this instanceof l))return new l(a);l._init.call(this,a)}l._init=function(f){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,f&&this.append(f)},l.prototype._new=function(f){return new l(f)},l.prototype._offset=function(f){if(f===0)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const t=e+this._bufs[r].length;if(f<t||r===this._bufs.length-1)return[r,f-e];e=t}},l.prototype._reverseOffset=function(a){const f=a[0];let e=a[1];for(let r=0;r<f;r++)e+=this._bufs[r].length;return e},l.prototype.get=function(f){if(f>this.length||f<0)return;const e=this._offset(f);return this._bufs[e[0]][e[1]]},l.prototype.slice=function(f,e){return typeof f=="number"&&f<0&&(f+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,f,e)},l.prototype.copy=function(f,e,r,t){if((typeof r!="number"||r<0)&&(r=0),(typeof t!="number"||t>this.length)&&(t=this.length),r>=this.length||t<=0)return f||o.alloc(0);const i=!!f,y=this._offset(r),u=t-r;let m=u,b=i&&e||0,p=y[1];if(r===0&&t===this.length){if(!i)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let s=0;s<this._bufs.length;s++)this._bufs[s].copy(f,b),b+=this._bufs[s].length;return f}if(m<=this._bufs[y[0]].length-p)return i?this._bufs[y[0]].copy(f,e,p,p+m):this._bufs[y[0]].slice(p,p+m);i||(f=o.allocUnsafe(u));for(let s=y[0];s<this._bufs.length;s++){const _=this._bufs[s].length-p;if(m>_)this._bufs[s].copy(f,b,p),b+=_;else{this._bufs[s].copy(f,b,p,p+m),b+=_;break}m-=_,p&&(p=0)}return f.length>b?f.slice(0,b):f},l.prototype.shallowSlice=function(f,e){if(f=f||0,e=typeof e!="number"?this.length:e,f<0&&(f+=this.length),e<0&&(e+=this.length),f===e)return this._new();const r=this._offset(f),t=this._offset(e),i=this._bufs.slice(r[0],t[0]+1);return t[1]===0?i.pop():i[i.length-1]=i[i.length-1].slice(0,t[1]),r[1]!==0&&(i[0]=i[0].slice(r[1])),this._new(i)},l.prototype.toString=function(f,e,r){return this.slice(e,r).toString(f)},l.prototype.consume=function(f){if(f=Math.trunc(f),Number.isNaN(f)||f<=0)return this;for(;this._bufs.length;)if(f>=this._bufs[0].length)f-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(f),this.length-=f;break}return this},l.prototype.duplicate=function(){const f=this._new();for(let e=0;e<this._bufs.length;e++)f.append(this._bufs[e]);return f},l.prototype.append=function(f){if(f==null)return this;if(f.buffer)this._appendBuffer(o.from(f.buffer,f.byteOffset,f.byteLength));else if(Array.isArray(f))for(let e=0;e<f.length;e++)this.append(f[e]);else if(this._isBufferList(f))for(let e=0;e<f._bufs.length;e++)this.append(f._bufs[e]);else typeof f=="number"&&(f=f.toString()),this._appendBuffer(o.from(f));return this},l.prototype._appendBuffer=function(f){this._bufs.push(f),this.length+=f.length},l.prototype.indexOf=function(a,f,e){if(e===void 0&&typeof f=="string"&&(e=f,f=void 0),typeof a=="function"||Array.isArray(a))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof a=="number"?a=o.from([a]):typeof a=="string"?a=o.from(a,e):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=o.from(a.buffer,a.byteOffset,a.byteLength):o.isBuffer(a)||(a=o.from(a)),f=Number(f||0),isNaN(f)&&(f=0),f<0&&(f=this.length+f),f<0&&(f=0),a.length===0)return f>this.length?this.length:f;const r=this._offset(f);let t=r[0],i=r[1];for(;t<this._bufs.length;t++){const y=this._bufs[t];for(;i<y.length;)if(y.length-i>=a.length){const m=y.indexOf(a,i);if(m!==-1)return this._reverseOffset([t,m]);i=y.length-a.length+1}else{const m=this._reverseOffset([t,i]);if(this._match(m,a))return m;i++}i=0}return-1},l.prototype._match=function(a,f){if(this.length-a<f.length)return!1;for(let e=0;e<f.length;e++)if(this.get(a+e)!==f[e])return!1;return!0},function(){const a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const f in a)(function(e){a[e]===null?l.prototype[e]=function(r,t){return this.slice(r,r+t)[e](0,t)}:l.prototype[e]=function(r=0){return this.slice(r,r+a[e])[e](0)}})(f)}(),l.prototype._isBufferList=function(f){return f instanceof l||l.isBufferList(f)},l.isBufferList=function(f){return f!=null&&f[n]},h.exports=l},{buffer:17}],15:[function(c,h,d){const o=c("readable-stream").Duplex,n=c("inherits"),l=c("./BufferList");function a(f){if(!(this instanceof a))return new a(f);if(typeof f=="function"){this._callback=f;const e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)}),f=null}l._init.call(this,f),o.call(this)}n(a,o),Object.assign(a.prototype,l.prototype),a.prototype._new=function(e){return new a(e)},a.prototype._write=function(e,r,t){this._appendBuffer(e),typeof t=="function"&&t()},a.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},a.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)},a.prototype._isBufferList=function(e){return e instanceof a||e instanceof l||a.isBufferList(e)},a.isBufferList=l.isBufferList,h.exports=a,h.exports.BufferListStream=a,h.exports.BufferList=l},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(c,h,d){},{}],17:[function(c,h,d){(function(o){(function(){var n=c("base64-js"),l=c("ieee754");d.Buffer=r,d.SlowBuffer=T,d.INSPECT_MAX_BYTES=50;var a=2147483647;d.kMaxLength=a,r.TYPED_ARRAY_SUPPORT=f(),!r.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{var S=new Uint8Array(1);return S.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},S.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.byteOffset}});function e(S){if(S>a)throw new RangeError('The value "'+S+'" is invalid for option "size"');var g=new Uint8Array(S);return g.__proto__=r.prototype,g}function r(S,g,w){if(typeof S=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(S)}return t(S,g,w)}typeof Symbol!="undefined"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192;function t(S,g,w){if(typeof S=="string")return m(S,g);if(ArrayBuffer.isView(S))return b(S);if(S==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(C(S,ArrayBuffer)||S&&C(S.buffer,ArrayBuffer))return p(S,g,w);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var k=S.valueOf&&S.valueOf();if(k!=null&&k!==S)return r.from(k,g,w);var j=s(S);if(j)return j;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return r.from(S[Symbol.toPrimitive]("string"),g,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}r.from=function(S,g,w){return t(S,g,w)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array;function i(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function y(S,g,w){return i(S),S<=0?e(S):g!==void 0?typeof w=="string"?e(S).fill(g,w):e(S).fill(g):e(S)}r.alloc=function(S,g,w){return y(S,g,w)};function u(S){return i(S),e(S<0?0:_(S)|0)}r.allocUnsafe=function(S){return u(S)},r.allocUnsafeSlow=function(S){return u(S)};function m(S,g){if((typeof g!="string"||g==="")&&(g="utf8"),!r.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var w=I(S,g)|0,k=e(w),j=k.write(S,g);return j!==w&&(k=k.slice(0,j)),k}function b(S){for(var g=S.length<0?0:_(S.length)|0,w=e(g),k=0;k<g;k+=1)w[k]=S[k]&255;return w}function p(S,g,w){if(g<0||S.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<g+(w||0))throw new RangeError('"length" is outside of buffer bounds');var k;return g===void 0&&w===void 0?k=new Uint8Array(S):w===void 0?k=new Uint8Array(S,g):k=new Uint8Array(S,g,w),k.__proto__=r.prototype,k}function s(S){if(r.isBuffer(S)){var g=_(S.length)|0,w=e(g);return w.length===0||S.copy(w,0,0,g),w}if(S.length!==void 0)return typeof S.length!="number"||R(S.length)?e(0):b(S);if(S.type==="Buffer"&&Array.isArray(S.data))return b(S.data)}function _(S){if(S>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return S|0}function T(S){return+S!=S&&(S=0),r.alloc(+S)}r.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==r.prototype},r.compare=function(g,w){if(C(g,Uint8Array)&&(g=r.from(g,g.offset,g.byteLength)),C(w,Uint8Array)&&(w=r.from(w,w.offset,w.byteLength)),!r.isBuffer(g)||!r.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===w)return 0;for(var k=g.length,j=w.length,J=0,te=Math.min(k,j);J<te;++J)if(g[J]!==w[J]){k=g[J],j=w[J];break}return k<j?-1:j<k?1:0},r.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(g,w){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return r.alloc(0);var k;if(w===void 0)for(w=0,k=0;k<g.length;++k)w+=g[k].length;var j=r.allocUnsafe(w),J=0;for(k=0;k<g.length;++k){var te=g[k];if(C(te,Uint8Array)&&(te=r.from(te)),!r.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(j,J),J+=te.length}return j};function I(S,g){if(r.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||C(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);var w=S.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&w===0)return 0;for(var j=!1;;)switch(g){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return U(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return $(S).length;default:if(j)return k?-1:U(S).length;g=(""+g).toLowerCase(),j=!0}}r.byteLength=I;function L(S,g,w){var k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,g>>>=0,w<=g))return"";for(S||(S="utf8");;)switch(S){case"hex":return ne(this,g,w);case"utf8":case"utf-8":return A(this,g,w);case"ascii":return G(this,g,w);case"latin1":case"binary":return oe(this,g,w);case"base64":return Y(this,g,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,g,w);default:if(k)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),k=!0}}r.prototype._isBuffer=!0;function B(S,g,w){var k=S[g];S[g]=S[w],S[w]=k}r.prototype.swap16=function(){var g=this.length;if(g%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var w=0;w<g;w+=2)B(this,w,w+1);return this},r.prototype.swap32=function(){var g=this.length;if(g%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var w=0;w<g;w+=4)B(this,w,w+3),B(this,w+1,w+2);return this},r.prototype.swap64=function(){var g=this.length;if(g%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var w=0;w<g;w+=8)B(this,w,w+7),B(this,w+1,w+6),B(this,w+2,w+5),B(this,w+3,w+4);return this},r.prototype.toString=function(){var g=this.length;return g===0?"":arguments.length===0?A(this,0,g):L.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(g){if(!r.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:r.compare(this,g)===0},r.prototype.inspect=function(){var g="",w=d.INSPECT_MAX_BYTES;return g=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(g+=" ... "),"<Buffer "+g+">"},r.prototype.compare=function(g,w,k,j,J){if(C(g,Uint8Array)&&(g=r.from(g,g.offset,g.byteLength)),!r.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(w===void 0&&(w=0),k===void 0&&(k=g?g.length:0),j===void 0&&(j=0),J===void 0&&(J=this.length),w<0||k>g.length||j<0||J>this.length)throw new RangeError("out of range index");if(j>=J&&w>=k)return 0;if(j>=J)return-1;if(w>=k)return 1;if(w>>>=0,k>>>=0,j>>>=0,J>>>=0,this===g)return 0;for(var te=J-j,ae=k-w,fe=Math.min(te,ae),ue=this.slice(j,J),he=g.slice(w,k),ce=0;ce<fe;++ce)if(ue[ce]!==he[ce]){te=ue[ce],ae=he[ce];break}return te<ae?-1:ae<te?1:0};function O(S,g,w,k,j){if(S.length===0)return-1;if(typeof w=="string"?(k=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,R(w)&&(w=j?0:S.length-1),w<0&&(w=S.length+w),w>=S.length){if(j)return-1;w=S.length-1}else if(w<0)if(j)w=0;else return-1;if(typeof g=="string"&&(g=r.from(g,k)),r.isBuffer(g))return g.length===0?-1:W(S,g,w,k,j);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(S,g,w):Uint8Array.prototype.lastIndexOf.call(S,g,w):W(S,[g],w,k,j);throw new TypeError("val must be string, number or Buffer")}function W(S,g,w,k,j){var J=1,te=S.length,ae=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(S.length<2||g.length<2)return-1;J=2,te/=2,ae/=2,w/=2}function fe(_e,be){return J===1?_e[be]:_e.readUInt16BE(be*J)}var ue;if(j){var he=-1;for(ue=w;ue<te;ue++)if(fe(S,ue)===fe(g,he===-1?0:ue-he)){if(he===-1&&(he=ue),ue-he+1===ae)return he*J}else he!==-1&&(ue-=ue-he),he=-1}else for(w+ae>te&&(w=te-ae),ue=w;ue>=0;ue--){for(var ce=!0,me=0;me<ae;me++)if(fe(S,ue+me)!==fe(g,me)){ce=!1;break}if(ce)return ue}return-1}r.prototype.includes=function(g,w,k){return this.indexOf(g,w,k)!==-1},r.prototype.indexOf=function(g,w,k){return O(this,g,w,k,!0)},r.prototype.lastIndexOf=function(g,w,k){return O(this,g,w,k,!1)};function v(S,g,w,k){w=Number(w)||0;var j=S.length-w;k?(k=Number(k),k>j&&(k=j)):k=j;var J=g.length;k>J/2&&(k=J/2);for(var te=0;te<k;++te){var ae=parseInt(g.substr(te*2,2),16);if(R(ae))return te;S[w+te]=ae}return te}function x(S,g,w,k){return X(U(g,S.length-w),S,w,k)}function E(S,g,w,k){return X(P(g),S,w,k)}function D(S,g,w,k){return E(S,g,w,k)}function V(S,g,w,k){return X($(g),S,w,k)}function q(S,g,w,k){return X(z(g,S.length-w),S,w,k)}r.prototype.write=function(g,w,k,j){if(w===void 0)j="utf8",k=this.length,w=0;else if(k===void 0&&typeof w=="string")j=w,k=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(k)?(k=k>>>0,j===void 0&&(j="utf8")):(j=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-w;if((k===void 0||k>J)&&(k=J),g.length>0&&(k<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var te=!1;;)switch(j){case"hex":return v(this,g,w,k);case"utf8":case"utf-8":return x(this,g,w,k);case"ascii":return E(this,g,w,k);case"latin1":case"binary":return D(this,g,w,k);case"base64":return V(this,g,w,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,g,w,k);default:if(te)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),te=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(S,g,w){return g===0&&w===S.length?n.fromByteArray(S):n.fromByteArray(S.slice(g,w))}function A(S,g,w){w=Math.min(S.length,w);for(var k=[],j=g;j<w;){var J=S[j],te=null,ae=J>239?4:J>223?3:J>191?2:1;if(j+ae<=w){var fe,ue,he,ce;switch(ae){case 1:J<128&&(te=J);break;case 2:fe=S[j+1],(fe&192)==128&&(ce=(J&31)<<6|fe&63,ce>127&&(te=ce));break;case 3:fe=S[j+1],ue=S[j+2],(fe&192)==128&&(ue&192)==128&&(ce=(J&15)<<12|(fe&63)<<6|ue&63,ce>2047&&(ce<55296||ce>57343)&&(te=ce));break;case 4:fe=S[j+1],ue=S[j+2],he=S[j+3],(fe&192)==128&&(ue&192)==128&&(he&192)==128&&(ce=(J&15)<<18|(fe&63)<<12|(ue&63)<<6|he&63,ce>65535&&ce<1114112&&(te=ce))}}te===null?(te=65533,ae=1):te>65535&&(te-=65536,k.push(te>>>10&1023|55296),te=56320|te&1023),k.push(te),j+=ae}return N(k)}var M=4096;function N(S){var g=S.length;if(g<=M)return String.fromCharCode.apply(String,S);for(var w="",k=0;k<g;)w+=String.fromCharCode.apply(String,S.slice(k,k+=M));return w}function G(S,g,w){var k="";w=Math.min(S.length,w);for(var j=g;j<w;++j)k+=String.fromCharCode(S[j]&127);return k}function oe(S,g,w){var k="";w=Math.min(S.length,w);for(var j=g;j<w;++j)k+=String.fromCharCode(S[j]);return k}function ne(S,g,w){var k=S.length;(!g||g<0)&&(g=0),(!w||w<0||w>k)&&(w=k);for(var j="",J=g;J<w;++J)j+=Z(S[J]);return j}function K(S,g,w){for(var k=S.slice(g,w),j="",J=0;J<k.length;J+=2)j+=String.fromCharCode(k[J]+k[J+1]*256);return j}r.prototype.slice=function(g,w){var k=this.length;g=~~g,w=w===void 0?k:~~w,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),w<0?(w+=k,w<0&&(w=0)):w>k&&(w=k),w<g&&(w=g);var j=this.subarray(g,w);return j.__proto__=r.prototype,j};function Q(S,g,w){if(S%1!=0||S<0)throw new RangeError("offset is not uint");if(S+g>w)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUIntLE=function(g,w,k){g=g>>>0,w=w>>>0,k||Q(g,w,this.length);for(var j=this[g],J=1,te=0;++te<w&&(J*=256);)j+=this[g+te]*J;return j},r.prototype.readUIntBE=function(g,w,k){g=g>>>0,w=w>>>0,k||Q(g,w,this.length);for(var j=this[g+--w],J=1;w>0&&(J*=256);)j+=this[g+--w]*J;return j},r.prototype.readUInt8=function(g,w){return g=g>>>0,w||Q(g,1,this.length),this[g]},r.prototype.readUInt16LE=function(g,w){return g=g>>>0,w||Q(g,2,this.length),this[g]|this[g+1]<<8},r.prototype.readUInt16BE=function(g,w){return g=g>>>0,w||Q(g,2,this.length),this[g]<<8|this[g+1]},r.prototype.readUInt32LE=function(g,w){return g=g>>>0,w||Q(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},r.prototype.readUInt32BE=function(g,w){return g=g>>>0,w||Q(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},r.prototype.readIntLE=function(g,w,k){g=g>>>0,w=w>>>0,k||Q(g,w,this.length);for(var j=this[g],J=1,te=0;++te<w&&(J*=256);)j+=this[g+te]*J;return J*=128,j>=J&&(j-=Math.pow(2,8*w)),j},r.prototype.readIntBE=function(g,w,k){g=g>>>0,w=w>>>0,k||Q(g,w,this.length);for(var j=w,J=1,te=this[g+--j];j>0&&(J*=256);)te+=this[g+--j]*J;return J*=128,te>=J&&(te-=Math.pow(2,8*w)),te},r.prototype.readInt8=function(g,w){return g=g>>>0,w||Q(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},r.prototype.readInt16LE=function(g,w){g=g>>>0,w||Q(g,2,this.length);var k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},r.prototype.readInt16BE=function(g,w){g=g>>>0,w||Q(g,2,this.length);var k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},r.prototype.readInt32LE=function(g,w){return g=g>>>0,w||Q(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},r.prototype.readInt32BE=function(g,w){return g=g>>>0,w||Q(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},r.prototype.readFloatLE=function(g,w){return g=g>>>0,w||Q(g,4,this.length),l.read(this,g,!0,23,4)},r.prototype.readFloatBE=function(g,w){return g=g>>>0,w||Q(g,4,this.length),l.read(this,g,!1,23,4)},r.prototype.readDoubleLE=function(g,w){return g=g>>>0,w||Q(g,8,this.length),l.read(this,g,!0,52,8)},r.prototype.readDoubleBE=function(g,w){return g=g>>>0,w||Q(g,8,this.length),l.read(this,g,!1,52,8)};function re(S,g,w,k,j,J){if(!r.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>j||g<J)throw new RangeError('"value" argument is out of bounds');if(w+k>S.length)throw new RangeError("Index out of range")}r.prototype.writeUIntLE=function(g,w,k,j){if(g=+g,w=w>>>0,k=k>>>0,!j){var J=Math.pow(2,8*k)-1;re(this,g,w,k,J,0)}var te=1,ae=0;for(this[w]=g&255;++ae<k&&(te*=256);)this[w+ae]=g/te&255;return w+k},r.prototype.writeUIntBE=function(g,w,k,j){if(g=+g,w=w>>>0,k=k>>>0,!j){var J=Math.pow(2,8*k)-1;re(this,g,w,k,J,0)}var te=k-1,ae=1;for(this[w+te]=g&255;--te>=0&&(ae*=256);)this[w+te]=g/ae&255;return w+k},r.prototype.writeUInt8=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,1,255,0),this[w]=g&255,w+1},r.prototype.writeUInt16LE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,2,65535,0),this[w]=g&255,this[w+1]=g>>>8,w+2},r.prototype.writeUInt16BE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,2,65535,0),this[w]=g>>>8,this[w+1]=g&255,w+2},r.prototype.writeUInt32LE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,4,4294967295,0),this[w+3]=g>>>24,this[w+2]=g>>>16,this[w+1]=g>>>8,this[w]=g&255,w+4},r.prototype.writeUInt32BE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,4,4294967295,0),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4},r.prototype.writeIntLE=function(g,w,k,j){if(g=+g,w=w>>>0,!j){var J=Math.pow(2,8*k-1);re(this,g,w,k,J-1,-J)}var te=0,ae=1,fe=0;for(this[w]=g&255;++te<k&&(ae*=256);)g<0&&fe===0&&this[w+te-1]!==0&&(fe=1),this[w+te]=(g/ae>>0)-fe&255;return w+k},r.prototype.writeIntBE=function(g,w,k,j){if(g=+g,w=w>>>0,!j){var J=Math.pow(2,8*k-1);re(this,g,w,k,J-1,-J)}var te=k-1,ae=1,fe=0;for(this[w+te]=g&255;--te>=0&&(ae*=256);)g<0&&fe===0&&this[w+te+1]!==0&&(fe=1),this[w+te]=(g/ae>>0)-fe&255;return w+k},r.prototype.writeInt8=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,1,127,-128),g<0&&(g=255+g+1),this[w]=g&255,w+1},r.prototype.writeInt16LE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,2,32767,-32768),this[w]=g&255,this[w+1]=g>>>8,w+2},r.prototype.writeInt16BE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,2,32767,-32768),this[w]=g>>>8,this[w+1]=g&255,w+2},r.prototype.writeInt32LE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,4,2147483647,-2147483648),this[w]=g&255,this[w+1]=g>>>8,this[w+2]=g>>>16,this[w+3]=g>>>24,w+4},r.prototype.writeInt32BE=function(g,w,k){return g=+g,w=w>>>0,k||re(this,g,w,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4};function ee(S,g,w,k,j,J){if(w+k>S.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function se(S,g,w,k,j){return g=+g,w=w>>>0,j||ee(S,g,w,4),l.write(S,g,w,k,23,4),w+4}r.prototype.writeFloatLE=function(g,w,k){return se(this,g,w,!0,k)},r.prototype.writeFloatBE=function(g,w,k){return se(this,g,w,!1,k)};function ie(S,g,w,k,j){return g=+g,w=w>>>0,j||ee(S,g,w,8),l.write(S,g,w,k,52,8),w+8}r.prototype.writeDoubleLE=function(g,w,k){return ie(this,g,w,!0,k)},r.prototype.writeDoubleBE=function(g,w,k){return ie(this,g,w,!1,k)},r.prototype.copy=function(g,w,k,j){if(!r.isBuffer(g))throw new TypeError("argument should be a Buffer");if(k||(k=0),!j&&j!==0&&(j=this.length),w>=g.length&&(w=g.length),w||(w=0),j>0&&j<k&&(j=k),j===k||g.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),g.length-w<j-k&&(j=g.length-w+k);var J=j-k;if(this===g&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(w,k,j);else if(this===g&&k<w&&w<j)for(var te=J-1;te>=0;--te)g[te+w]=this[te+k];else Uint8Array.prototype.set.call(g,this.subarray(k,j),w);return J},r.prototype.fill=function(g,w,k,j){if(typeof g=="string"){if(typeof w=="string"?(j=w,w=0,k=this.length):typeof k=="string"&&(j=k,k=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!r.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(g.length===1){var J=g.charCodeAt(0);(j==="utf8"&&J<128||j==="latin1")&&(g=J)}}else typeof g=="number"&&(g=g&255);if(w<0||this.length<w||this.length<k)throw new RangeError("Out of range index");if(k<=w)return this;w=w>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);var te;if(typeof g=="number")for(te=w;te<k;++te)this[te]=g;else{var ae=r.isBuffer(g)?g:r.from(g,j),fe=ae.length;if(fe===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(te=0;te<k-w;++te)this[te+w]=ae[te%fe]}return this};var H=/[^+/0-9A-Za-z-_]/g;function F(S){if(S=S.split("=")[0],S=S.trim().replace(H,""),S.length<2)return"";for(;S.length%4!=0;)S=S+"=";return S}function Z(S){return S<16?"0"+S.toString(16):S.toString(16)}function U(S,g){g=g||1/0;for(var w,k=S.length,j=null,J=[],te=0;te<k;++te){if(w=S.charCodeAt(te),w>55295&&w<57344){if(!j){if(w>56319){(g-=3)>-1&&J.push(239,191,189);continue}else if(te+1===k){(g-=3)>-1&&J.push(239,191,189);continue}j=w;continue}if(w<56320){(g-=3)>-1&&J.push(239,191,189),j=w;continue}w=(j-55296<<10|w-56320)+65536}else j&&(g-=3)>-1&&J.push(239,191,189);if(j=null,w<128){if((g-=1)<0)break;J.push(w)}else if(w<2048){if((g-=2)<0)break;J.push(w>>6|192,w&63|128)}else if(w<65536){if((g-=3)<0)break;J.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((g-=4)<0)break;J.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return J}function P(S){for(var g=[],w=0;w<S.length;++w)g.push(S.charCodeAt(w)&255);return g}function z(S,g){for(var w,k,j,J=[],te=0;te<S.length&&!((g-=2)<0);++te)w=S.charCodeAt(te),k=w>>8,j=w%256,J.push(j),J.push(k);return J}function $(S){return n.toByteArray(F(S))}function X(S,g,w,k){for(var j=0;j<k&&!(j+w>=g.length||j>=S.length);++j)g[j+w]=S[j];return j}function C(S,g){return S instanceof g||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===g.name}function R(S){return S!==S}}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(c,h,d){(function(o){(function(){d.formatArgs=l,d.save=a,d.load=f,d.useColors=n,d.storage=e(),d.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+h.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let y=0,u=0;t[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(y++,m==="%c"&&(u=y))}),t.splice(u,0,i)}d.log=console.debug||console.log||(()=>{});function a(t){try{t?d.storage.setItem("debug",t):d.storage.removeItem("debug")}catch{}}function f(){let t;try{t=d.storage.getItem("debug")}catch{}return!t&&typeof o!="undefined"&&"env"in o&&(t={}.DEBUG),t}function e(){try{return localStorage}catch{}}h.exports=c("./common")(d);const{formatters:r}=h.exports;r.j=function(t){try{return JSON.stringify(t)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}).call(this)}).call(this,c("_process"))},{"./common":19,_process:50}],19:[function(c,h,d){function o(n){a.debug=a,a.default=a,a.coerce=y,a.disable=r,a.enable=e,a.enabled=t,a.humanize=c("ms"),a.destroy=u,Object.keys(n).forEach(m=>{a[m]=n[m]}),a.names=[],a.skips=[],a.formatters={};function l(m){let b=0;for(let p=0;p<m.length;p++)b=(b<<5)-b+m.charCodeAt(p),b|=0;return a.colors[Math.abs(b)%a.colors.length]}a.selectColor=l;function a(m){let b,p=null,s,_;function T(...I){if(!T.enabled)return;const L=T,B=Number(new Date),O=B-(b||B);L.diff=O,L.prev=b,L.curr=B,b=B,I[0]=a.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let W=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(x,E)=>{if(x==="%%")return"%";W++;const D=a.formatters[E];if(typeof D=="function"){const V=I[W];x=D.call(L,V),I.splice(W,1),W--}return x}),a.formatArgs.call(L,I),(L.log||a.log).apply(L,I)}return T.namespace=m,T.useColors=a.useColors(),T.color=a.selectColor(m),T.extend=f,T.destroy=a.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(s!==a.namespaces&&(s=a.namespaces,_=a.enabled(m)),_),set:I=>{p=I}}),typeof a.init=="function"&&a.init(T),T}function f(m,b){const p=a(this.namespace+(typeof b=="undefined"?":":b)+m);return p.log=this.log,p}function e(m){a.save(m),a.namespaces=m,a.names=[],a.skips=[];let b;const p=(typeof m=="string"?m:"").split(/[\s,]+/),s=p.length;for(b=0;b<s;b++)!p[b]||(m=p[b].replace(/\*/g,".*?"),m[0]==="-"?a.skips.push(new RegExp("^"+m.substr(1)+"$")):a.names.push(new RegExp("^"+m+"$")))}function r(){const m=[...a.names.map(i),...a.skips.map(i).map(b=>"-"+b)].join(",");return a.enable(""),m}function t(m){if(m[m.length-1]==="*")return!0;let b,p;for(b=0,p=a.skips.length;b<p;b++)if(a.skips[b].test(m))return!1;for(b=0,p=a.names.length;b<p;b++)if(a.names[b].test(m))return!0;return!1}function i(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function y(m){return m instanceof Error?m.stack||m.message:m}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}h.exports=o},{ms:45}],20:[function(c,h,d){(function(o,n){(function(){var l=c("readable-stream"),a=c("end-of-stream"),f=c("inherits"),e=c("stream-shift"),r=n.from&&n.from!==Uint8Array.from?n.from([0]):new n([0]),t=function(s,_){s._corked?s.once("uncork",_):_()},i=function(s,_){s._autoDestroy&&s.destroy(_)},y=function(s,_){return function(T){T?i(s,T.message==="premature close"?null:T):_&&!s._ended&&s.end()}},u=function(s,_){if(!s||s._writableState&&s._writableState.finished)return _();if(s._writableState)return s.end(_);s.end(),_()},m=function(){},b=function(s){return new l.Readable({objectMode:!0,highWaterMark:16}).wrap(s)},p=function(s,_,T){if(!(this instanceof p))return new p(s,_,T);l.Duplex.call(this,T),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!T||T.autoDestroy!==!1,this._forwardDestroy=!T||T.destroy!==!1,this._forwardEnd=!T||T.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,s&&this.setWritable(s),_&&this.setReadable(_)};f(p,l.Duplex),p.obj=function(s,_,T){return T||(T={}),T.objectMode=!0,T.highWaterMark=16,new p(s,_,T)},p.prototype.cork=function(){++this._corked==1&&this.emit("cork")},p.prototype.uncork=function(){this._corked&&--this._corked==0&&this.emit("uncork")},p.prototype.setWritable=function(s){if(this._unwrite&&this._unwrite(),this.destroyed){s&&s.destroy&&s.destroy();return}if(s===null||s===!1){this.end();return}var _=this,T=a(s,{writable:!0,readable:!1},y(this,this._forwardEnd)),I=function(){var B=_._ondrain;_._ondrain=null,B&&B()},L=function(){_._writable.removeListener("drain",I),T()};this._unwrite&&o.nextTick(I),this._writable=s,this._writable.on("drain",I),this._unwrite=L,this.uncork()},p.prototype.setReadable=function(s){if(this._unread&&this._unread(),this.destroyed){s&&s.destroy&&s.destroy();return}if(s===null||s===!1){this.push(null),this.resume();return}var _=this,T=a(s,{writable:!1,readable:!0},y(this)),I=function(){_._forward()},L=function(){_.push(null)},B=function(){_._readable2.removeListener("readable",I),_._readable2.removeListener("end",L),T()};this._drained=!0,this._readable=s,this._readable2=s._readableState?s:b(s),this._readable2.on("readable",I),this._readable2.on("end",L),this._unread=B,this._forward()},p.prototype._read=function(){this._drained=!0,this._forward()},p.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var s;this._drained&&(s=e(this._readable2))!==null;)this.destroyed||(this._drained=this.push(s));this._forwarding=!1}},p.prototype.destroy=function(s,_){if(_||(_=m),this.destroyed)return _(null);this.destroyed=!0;var T=this;o.nextTick(function(){T._destroy(s),_(null)})},p.prototype._destroy=function(s){if(s){var _=this._ondrain;this._ondrain=null,_?_(s):this.emit("error",s)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},p.prototype._write=function(s,_,T){if(!this.destroyed){if(this._corked)return t(this,this._write.bind(this,s,_,T));if(s===r)return this._finish(T);if(!this._writable)return T();this._writable.write(s)===!1?this._ondrain=T:this.destroyed||T()}},p.prototype._finish=function(s){var _=this;this.emit("preend"),t(this,function(){u(_._forwardEnd&&_._writable,function(){_._writableState.prefinished===!1&&(_._writableState.prefinished=!0),_.emit("prefinish"),t(_,s)})})},p.prototype.end=function(s,_,T){return typeof s=="function"?this.end(null,null,s):typeof _=="function"?this.end(s,null,_):(this._ended=!0,s&&this.write(s),!this._writableState.ending&&!this._writableState.destroyed&&this.write(r),l.Writable.prototype.end.call(this,T))},h.exports=p}).call(this)}).call(this,c("_process"),c("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(c,h,d){(function(o){(function(){var n=c("once"),l=function(){},a=function(r){return r.setHeader&&typeof r.abort=="function"},f=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},e=function(r,t,i){if(typeof t=="function")return e(r,null,t);t||(t={}),i=n(i||l);var y=r._writableState,u=r._readableState,m=t.readable||t.readable!==!1&&r.readable,b=t.writable||t.writable!==!1&&r.writable,p=!1,s=function(){r.writable||_()},_=function(){b=!1,m||i.call(r)},T=function(){m=!1,b||i.call(r)},I=function(v){i.call(r,v?new Error("exited with error code: "+v):null)},L=function(v){i.call(r,v)},B=function(){o.nextTick(O)},O=function(){if(!p){if(m&&!(u&&u.ended&&!u.destroyed))return i.call(r,new Error("premature close"));if(b&&!(y&&y.ended&&!y.destroyed))return i.call(r,new Error("premature close"))}},W=function(){r.req.on("finish",_)};return a(r)?(r.on("complete",_),r.on("abort",B),r.req?W():r.on("request",W)):b&&!y&&(r.on("end",s),r.on("close",s)),f(r)&&r.on("exit",I),r.on("end",T),r.on("finish",_),t.error!==!1&&r.on("error",L),r.on("close",B),function(){p=!0,r.removeListener("complete",_),r.removeListener("abort",B),r.removeListener("request",W),r.req&&r.req.removeListener("finish",_),r.removeListener("end",s),r.removeListener("close",s),r.removeListener("finish",_),r.removeListener("exit",I),r.removeListener("end",T),r.removeListener("error",L),r.removeListener("close",B)}};h.exports=e}).call(this)}).call(this,c("_process"))},{_process:50,once:48}],22:[function(c,h,d){var o=Object.create||W,n=Object.keys||v,l=Function.prototype.bind||x;function a(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=o(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}h.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var f=10,e;try{var r={};Object.defineProperty&&Object.defineProperty(r,"x",{value:0}),e=r.x===0}catch{e=!1}e?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(E){if(typeof E!="number"||E<0||E!==E)throw new TypeError('"defaultMaxListeners" must be a positive number');f=E}}):a.defaultMaxListeners=f,a.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||isNaN(D))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=D,this};function t(E){return E._maxListeners===void 0?a.defaultMaxListeners:E._maxListeners}a.prototype.getMaxListeners=function(){return t(this)};function i(E,D,V){if(D)E.call(V);else for(var q=E.length,Y=B(E,q),A=0;A<q;++A)Y[A].call(V)}function y(E,D,V,q){if(D)E.call(V,q);else for(var Y=E.length,A=B(E,Y),M=0;M<Y;++M)A[M].call(V,q)}function u(E,D,V,q,Y){if(D)E.call(V,q,Y);else for(var A=E.length,M=B(E,A),N=0;N<A;++N)M[N].call(V,q,Y)}function m(E,D,V,q,Y,A){if(D)E.call(V,q,Y,A);else for(var M=E.length,N=B(E,M),G=0;G<M;++G)N[G].call(V,q,Y,A)}function b(E,D,V,q){if(D)E.apply(V,q);else for(var Y=E.length,A=B(E,Y),M=0;M<Y;++M)A[M].apply(V,q)}a.prototype.emit=function(D){var V,q,Y,A,M,N,G=D==="error";if(N=this._events,N)G=G&&N.error==null;else if(!G)return!1;if(G){if(arguments.length>1&&(V=arguments[1]),V instanceof Error)throw V;var oe=new Error('Unhandled "error" event. ('+V+")");throw oe.context=V,oe}if(q=N[D],!q)return!1;var ne=typeof q=="function";switch(Y=arguments.length,Y){case 1:i(q,ne,this);break;case 2:y(q,ne,this,arguments[1]);break;case 3:u(q,ne,this,arguments[1],arguments[2]);break;case 4:m(q,ne,this,arguments[1],arguments[2],arguments[3]);break;default:for(A=new Array(Y-1),M=1;M<Y;M++)A[M-1]=arguments[M];b(q,ne,this,A)}return!0};function p(E,D,V,q){var Y,A,M;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(A=E._events,A?(A.newListener&&(E.emit("newListener",D,V.listener?V.listener:V),A=E._events),M=A[D]):(A=E._events=o(null),E._eventsCount=0),!M)M=A[D]=V,++E._eventsCount;else if(typeof M=="function"?M=A[D]=q?[V,M]:[M,V]:q?M.unshift(V):M.push(V),!M.warned&&(Y=t(E),Y&&Y>0&&M.length>Y)){M.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+M.length+' "'+String(D)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');N.name="MaxListenersExceededWarning",N.emitter=E,N.type=D,N.count=M.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",N.name,N.message)}return E}a.prototype.addListener=function(D,V){return p(this,D,V,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(D,V){return p(this,D,V,!0)};function s(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var E=new Array(arguments.length),D=0;D<E.length;++D)E[D]=arguments[D];this.listener.apply(this.target,E)}}function _(E,D,V){var q={fired:!1,wrapFn:void 0,target:E,type:D,listener:V},Y=l.call(s,q);return Y.listener=V,q.wrapFn=Y,Y}a.prototype.once=function(D,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.on(D,_(this,D,V)),this},a.prototype.prependOnceListener=function(D,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(D,_(this,D,V)),this},a.prototype.removeListener=function(D,V){var q,Y,A,M,N;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(Y=this._events,!Y)return this;if(q=Y[D],!q)return this;if(q===V||q.listener===V)--this._eventsCount==0?this._events=o(null):(delete Y[D],Y.removeListener&&this.emit("removeListener",D,q.listener||V));else if(typeof q!="function"){for(A=-1,M=q.length-1;M>=0;M--)if(q[M]===V||q[M].listener===V){N=q[M].listener,A=M;break}if(A<0)return this;A===0?q.shift():L(q,A),q.length===1&&(Y[D]=q[0]),Y.removeListener&&this.emit("removeListener",D,N||V)}return this},a.prototype.removeAllListeners=function(D){var V,q,Y;if(q=this._events,!q)return this;if(!q.removeListener)return arguments.length===0?(this._events=o(null),this._eventsCount=0):q[D]&&(--this._eventsCount==0?this._events=o(null):delete q[D]),this;if(arguments.length===0){var A=n(q),M;for(Y=0;Y<A.length;++Y)M=A[Y],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=o(null),this._eventsCount=0,this}if(V=q[D],typeof V=="function")this.removeListener(D,V);else if(V)for(Y=V.length-1;Y>=0;Y--)this.removeListener(D,V[Y]);return this};function T(E,D,V){var q=E._events;if(!q)return[];var Y=q[D];return Y?typeof Y=="function"?V?[Y.listener||Y]:[Y]:V?O(Y):B(Y,Y.length):[]}a.prototype.listeners=function(D){return T(this,D,!0)},a.prototype.rawListeners=function(D){return T(this,D,!1)},a.listenerCount=function(E,D){return typeof E.listenerCount=="function"?E.listenerCount(D):I.call(E,D)},a.prototype.listenerCount=I;function I(E){var D=this._events;if(D){var V=D[E];if(typeof V=="function")return 1;if(V)return V.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function L(E,D){for(var V=D,q=V+1,Y=E.length;q<Y;V+=1,q+=1)E[V]=E[q];E.pop()}function B(E,D){for(var V=new Array(D),q=0;q<D;++q)V[q]=E[q];return V}function O(E){for(var D=new Array(E.length),V=0;V<D.length;++V)D[V]=E[V].listener||E[V];return D}function W(E){var D=function(){};return D.prototype=E,new D}function v(E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D);return D}function x(E){var D=this;return function(){return D.apply(E,arguments)}}},{}],23:[function(c,h,d){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(o,n,l,a,f){var e,r,t=f*8-a-1,i=(1<<t)-1,y=i>>1,u=-7,m=l?f-1:0,b=l?-1:1,p=o[n+m];for(m+=b,e=p&(1<<-u)-1,p>>=-u,u+=t;u>0;e=e*256+o[n+m],m+=b,u-=8);for(r=e&(1<<-u)-1,e>>=-u,u+=a;u>0;r=r*256+o[n+m],m+=b,u-=8);if(e===0)e=1-y;else{if(e===i)return r?NaN:(p?-1:1)*(1/0);r=r+Math.pow(2,a),e=e-y}return(p?-1:1)*r*Math.pow(2,e-a)},d.write=function(o,n,l,a,f,e){var r,t,i,y=e*8-f-1,u=(1<<y)-1,m=u>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:e-1,s=a?1:-1,_=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(t=isNaN(n)?1:0,r=u):(r=Math.floor(Math.log(n)/Math.LN2),n*(i=Math.pow(2,-r))<1&&(r--,i*=2),r+m>=1?n+=b/i:n+=b*Math.pow(2,1-m),n*i>=2&&(r++,i/=2),r+m>=u?(t=0,r=u):r+m>=1?(t=(n*i-1)*Math.pow(2,f),r=r+m):(t=n*Math.pow(2,m-1)*Math.pow(2,f),r=0));f>=8;o[l+p]=t&255,p+=s,t/=256,f-=8);for(r=r<<f|t,y+=f;y>0;o[l+p]=r&255,p+=s,r/=256,y-=8);o[l+p-s]|=_*128}},{}],24:[function(c,h,d){typeof Object.create=="function"?h.exports=function(n,l){l&&(n.super_=l,n.prototype=Object.create(l.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:h.exports=function(n,l){if(l){n.super_=l;var a=function(){};a.prototype=l.prototype,n.prototype=new a,n.prototype.constructor=n}}},{}],25:[function(c,h,d){Object.defineProperty(d,"__esModule",{value:!0});var o=function(){function n(l,a){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=l,this.value=a}return n.prototype.rotateLeft=function(){var l=this.parent,a=this.brother,f=this.leftChild,e=this.rightChild;if(!e)throw new Error("unknown error");var r=e.leftChild,t=e.rightChild;return l&&(l.leftChild===this?l.leftChild=e:l.rightChild===this&&(l.rightChild=e)),e.parent=l,e.brother=a,e.leftChild=this,e.rightChild=t,a&&(a.brother=e),this.parent=e,this.brother=t,this.leftChild=f,this.rightChild=r,t&&(t.parent=e,t.brother=this),f&&(f.parent=this,f.brother=r),r&&(r.parent=this,r.brother=f),e},n.prototype.rotateRight=function(){var l=this.parent,a=this.brother,f=this.leftChild;if(!f)throw new Error("unknown error");var e=this.rightChild,r=f.leftChild,t=f.rightChild;return l&&(l.leftChild===this?l.leftChild=f:l.rightChild===this&&(l.rightChild=f)),f.parent=l,f.brother=a,f.leftChild=r,f.rightChild=this,a&&(a.brother=f),r&&(r.parent=f,r.brother=this),this.parent=f,this.brother=r,this.leftChild=t,this.rightChild=e,t&&(t.parent=this,t.brother=e),e&&(e.parent=this,e.brother=t),f},n.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},n.TreeNodeColorType={red:!0,black:!1},n}();Object.freeze(o),d.default=o},{}],26:[function(c,h,d){var o=this&&this.__generator||function(l,a){var f={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},e,r,t,i;return i={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function y(m){return function(b){return u([m,b])}}function u(m){if(e)throw new TypeError("Generator is already executing.");for(;f;)try{if(e=1,r&&(t=m[0]&2?r.return:m[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,m[1])).done)return t;switch(r=0,t&&(m=[m[0]&2,t.value]),m[0]){case 0:case 1:t=m;break;case 4:return f.label++,{value:m[1],done:!1};case 5:f.label++,r=m[1],m=[0];continue;case 7:m=f.ops.pop(),f.trys.pop();continue;default:if(t=f.trys,!(t=t.length>0&&t[t.length-1])&&(m[0]===6||m[0]===2)){f=0;continue}if(m[0]===3&&(!t||m[1]>t[0]&&m[1]<t[3])){f.label=m[1];break}if(m[0]===6&&f.label<t[1]){f.label=t[1],t=m;break}if(t&&f.label<t[2]){f.label=t[2],f.ops.push(m);break}t[2]&&f.ops.pop(),f.trys.pop();continue}m=a.call(l,f)}catch(b){m=[6,b],r=0}finally{e=t=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(d,"__esModule",{value:!0}),n.sigma=3,n.bucketSize=5e3;function n(l){var a=this;l===void 0&&(l=[]);var f=[],e=0,r=0,t=0,i=0,y=0,u=0;this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){e=t=r=i=y=u=0,b.call(this,n.bucketSize),u=0},this.front=function(){return f[e][r]},this.back=function(){return f[t][i]},this.forEach=function(p){if(!this.empty()){var s=0;if(e===t){for(var _=r;_<=i;++_)p(f[e][_],s++);return}for(var _=r;_<n.bucketSize;++_)p(f[e][_],s++);for(var _=e+1;_<t;++_)for(var T=0;T<n.bucketSize;++T)p(f[_][T],s++);for(var _=0;_<=i;++_)p(f[t][_],s++)}};var m=function(p){var s=e*n.bucketSize+r,_=s+p,T=t*n.bucketSize+i;if(_<s||_>T)throw new Error("pos should more than 0 and less than queue's size");var I=Math.floor(_/n.bucketSize),L=_%n.bucketSize;return{curNodeBucketIndex:I,curNodePointerIndex:L}};this.getElementByPos=function(p){var s=m(p),_=s.curNodeBucketIndex,T=s.curNodePointerIndex;return f[_][T]},this.eraseElementByPos=function(p){var s=this;if(p<0||p>u)throw new Error("pos should more than 0 and less than queue's size");if(p===0)this.popFront();else if(p===this.size())this.popBack();else{for(var _=[],T=p+1;T<u;++T)_.push(this.getElementByPos(T));this.cut(p),this.popBack(),_.forEach(function(I){return s.pushBack(I)})}},this.eraseElementByValue=function(p){if(!this.empty()){var s=[];this.forEach(function(I){I!==p&&s.push(I)});for(var _=s.length,T=0;T<_;++T)this.setElementByPos(T,s[T]);this.cut(_-1)}};var b=function(p){for(var s=[],_=p*n.sigma,T=Math.max(Math.ceil(_/n.bucketSize),2),I=0;I<T;++I)s.push(new Array(n.bucketSize));var L=Math.ceil(p/n.bucketSize),B=Math.floor(T/2)-Math.floor(L/2),O=B,W=0;if(this.size())for(var I=0;I<L;++I){for(var v=0;v<n.bucketSize;++v)if(s[B+I][v]=this.front(),this.popFront(),this.empty()){O=B+I,W=v;break}if(this.empty())break}f=s,e=B,r=0,t=O,i=W,y=T,u=p};this.pushBack=function(p){this.empty()||(t===y-1&&i===n.bucketSize-1&&b.call(this,this.size()),i<n.bucketSize-1?++i:t<y-1&&(++t,i=0)),++u,f[t][i]=p},this.popBack=function(){this.empty()||(this.size()!==1&&(i>0?--i:e<t&&(--t,i=n.bucketSize-1)),u>0&&--u)},this.setElementByPos=function(p,s){var _=m(p),T=_.curNodeBucketIndex,I=_.curNodePointerIndex;f[T][I]=s},this.insert=function(p,s,_){var T=this;if(_===void 0&&(_=1),p===0)for(;_--;)this.pushFront(s);else if(p===this.size())for(;_--;)this.pushBack(s);else{for(var I=[],L=p;L<u;++L)I.push(this.getElementByPos(L));this.cut(p-1);for(var L=0;L<_;++L)this.pushBack(s);I.forEach(function(B){return T.pushBack(B)})}},this.find=function(p){if(e===t){for(var s=r;s<=i;++s)if(f[e][s]===p)return!0;return!1}for(var s=r;s<n.bucketSize;++s)if(f[e][s]===p)return!0;for(var s=e+1;s<t;++s)for(var _=0;_<n.bucketSize;++_)if(f[s][_]===p)return!0;for(var s=0;s<=i;++s)if(f[t][s]===p)return!0;return!1},this.reverse=function(){for(var p=0,s=u-1;p<s;){var _=this.getElementByPos(p);this.setElementByPos(p,this.getElementByPos(s)),this.setElementByPos(s,_),++p,--s}},this.unique=function(){if(!this.empty()){var p=[],s=this.front();this.forEach(function(T,I){(I===0||T!==s)&&(p.push(T),s=T)});for(var _=0;_<u;++_)this.setElementByPos(_,p[_]);this.cut(p.length-1)}},this.sort=function(p){var s=[];this.forEach(function(T){s.push(T)}),s.sort(p);for(var _=0;_<u;++_)this.setElementByPos(_,s[_])},this.pushFront=function(p){this.empty()||(e===0&&r===0&&b.call(this,this.size()),r>0?--r:e>0&&(--e,r=n.bucketSize-1)),++u,f[e][r]=p},this.popFront=function(){this.empty()||(this.size()!==1&&(r<n.bucketSize-1?++r:e<t&&(++e,r=0)),u>0&&--u)},this.shrinkToFit=function(){var p=this,s=[];this.forEach(function(L){s.push(L)});var _=s.length;f=[];for(var T=Math.ceil(_/n.bucketSize),I=0;I<T;++I)f.push(new Array(n.bucketSize));this.clear(),s.forEach(function(L){return p.pushBack(L)})},this.cut=function(p){if(p<0){this.clear();return}var s=m(p),_=s.curNodeBucketIndex,T=s.curNodePointerIndex;t=_,i=T,u=p+1},this[Symbol.iterator]=function(){return function(){var p,p,p,s,p;return o(this,function(_){switch(_.label){case 0:if(u===0)return[2];if(e!==t)return[3,5];p=r,_.label=1;case 1:return p<=i?[4,f[e][p]]:[3,4];case 2:_.sent(),_.label=3;case 3:return++p,[3,1];case 4:return[2];case 5:p=r,_.label=6;case 6:return p<n.bucketSize?[4,f[e][p]]:[3,9];case 7:_.sent(),_.label=8;case 8:return++p,[3,6];case 9:p=e+1,_.label=10;case 10:if(!(p<t))return[3,15];s=0,_.label=11;case 11:return s<n.bucketSize?[4,f[p][s]]:[3,14];case 12:_.sent(),_.label=13;case 13:return++s,[3,11];case 14:return++p,[3,10];case 15:p=0,_.label=16;case 16:return p<=i?[4,f[t][p]]:[3,19];case 17:_.sent(),_.label=18;case 18:return++p,[3,16];case 19:return[2]}})}()},function(){var p=n.bucketSize;l.size?p=l.size():l.length&&(p=l.length);var s=p*n.sigma;y=Math.ceil(s/n.bucketSize),y=Math.max(y,3);for(var _=0;_<y;++_)f.push(new Array(n.bucketSize));var T=Math.ceil(p/n.bucketSize);e=Math.floor(y/2)-Math.floor(T/2),t=e,l.forEach(function(I){return a.pushBack(I)})}(),Object.freeze(this)}Object.freeze(n),d.default=n},{}],27:[function(c,h,d){var o=this&&this.__generator||function(e,r){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,y,u,m;return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(s){return function(_){return p([s,_])}}function p(s){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,y&&(u=s[0]&2?y.return:s[0]?y.throw||((u=y.return)&&u.call(y),0):y.next)&&!(u=u.call(y,s[1])).done)return u;switch(y=0,u&&(s=[s[0]&2,u.value]),s[0]){case 0:case 1:u=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,y=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!u||s[1]>u[0]&&s[1]<u[3])){t.label=s[1];break}if(s[0]===6&&t.label<u[1]){t.label=u[1],u=s;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(s);break}u[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(_){s=[6,_],y=0}finally{i=u=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},n=this&&this.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(d,"__esModule",{value:!0});var l=c("../LinkList/LinkList"),a=c("../Map/Map");f.initSize=1<<4,f.maxSize=1<<30,f.sigma=.75,f.treeifyThreshold=8,f.untreeifyThreshold=6,f.minTreeifySize=64;function f(e,r,t){var i=this;if(e===void 0&&(e=[]),r===void 0&&(r=f.initSize),t=t||function(p){var s,_,T=0,I="";if(typeof p=="number")T=Math.floor(p),T=(T<<5)-T,T=T&T;else{typeof p!="string"?I=JSON.stringify(p):I=p;try{for(var L=n(I),B=L.next();!B.done;B=L.next()){var O=B.value,W=O.charCodeAt(0);T=(T<<5)-T+W,T=T&T}}catch(v){s={error:v}}finally{try{B&&!B.done&&(_=L.return)&&_.call(L)}finally{if(s)throw s.error}}}return T^=T>>>16,T},(r&r-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var y=0,u=[],m=Math.max(f.initSize,Math.min(f.maxSize,r));this.size=function(){return y},this.empty=function(){return y===0},this.clear=function(){y=0,m=r,u=[]},this.forEach=function(p){var s=0;u.forEach(function(_){_.forEach(function(T){p(T,s++)})})};var b=function(p){if(!(p>=f.maxSize)){m=p*2;var s=[];u.forEach(function(_,T){if(!_.empty()){if(_ instanceof l.default&&_.size()===1){var I=_.front(),L=I.key,B=I.value;s[t(L)&m-1]=new l.default([{key:L,value:B}])}else if(_ instanceof a.default){var O=new l.default,W=new l.default;_.forEach(function(E){var D=t(E.key);(D&p)==0?O.pushBack(E):W.pushBack(E)}),O.size()>f.untreeifyThreshold?s[T]=new a.default(O):O.size()&&(s[T]=O),W.size()>f.untreeifyThreshold?s[T+p]=new a.default(W):W.size()&&(s[T+p]=W)}else{var v=new l.default,x=new l.default;_.forEach(function(E){var D=t(E.key);(D&p)==0?v.pushBack(E):x.pushBack(E)}),v.size()&&(s[T]=v),x.size()&&(s[T+p]=x)}u[T].clear()}}),u=s}};this.setElement=function(p,s){var _,T;if(p==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(s==null){this.eraseElementByKey(p);return}var I=t(p)&m-1;if(!u[I])++y,u[I]=new l.default([{key:p,value:s}]);else{var L=u[I].size();if(u[I]instanceof l.default){try{for(var B=n(u[I]),O=B.next();!O.done;O=B.next()){var W=O.value;if(W.key===p){W.value=s;return}}}catch(x){_={error:x}}finally{try{O&&!O.done&&(T=B.return)&&T.call(B)}finally{if(_)throw _.error}}u[I].pushBack({key:p,value:s}),u[I].size()>=f.treeifyThreshold&&(u[I]=new a.default(u[I]))}else u[I].setElement(p,s);var v=u[I].size();y+=v-L}y>m*f.sigma&&b.call(this,m)},this.getElementByKey=function(p){var s,_,T=t(p)&m-1;if(!!u[T]){if(u[T]instanceof a.default)return u[T].getElementByKey(p);try{for(var I=n(u[T]),L=I.next();!L.done;L=I.next()){var B=L.value;if(B.key===p)return B.value}}catch(O){s={error:O}}finally{try{L&&!L.done&&(_=I.return)&&_.call(I)}finally{if(s)throw s.error}}}},this.eraseElementByKey=function(p){var s,_,T=t(p)&m-1;if(!!u[T]){var I=u[T].size();if(u[T]instanceof a.default)u[T].eraseElementByKey(p),u[T].size()<=f.untreeifyThreshold&&(u[T]=new l.default(u[T]));else{var L=-1;try{for(var B=n(u[T]),O=B.next();!O.done;O=B.next()){var W=O.value;if(++L,W.key===p){u[T].eraseElementByPos(L);break}}}catch(x){s={error:x}}finally{try{O&&!O.done&&(_=B.return)&&_.call(B)}finally{if(s)throw s.error}}}var v=u[T].size();y+=v-I}},this.find=function(p){var s,_,T=t(p)&m-1;if(!u[T])return!1;if(u[T]instanceof a.default)return u[T].find(p);try{for(var I=n(u[T]),L=I.next();!L.done;L=I.next()){var B=L.value;if(B.key===p)return!0}}catch(O){s={error:O}}finally{try{L&&!L.done&&(_=I.return)&&_.call(I)}finally{if(s)throw s.error}}return!1},this[Symbol.iterator]=function(){return function(){var p,s,_,T,I,L,B;return o(this,function(O){switch(O.label){case 0:p=0,O.label=1;case 1:if(!(p<m))return[3,10];for(;p<m&&!u[p];)++p;if(p>=m)return[3,10];O.label=2;case 2:O.trys.push([2,7,8,9]),s=(L=void 0,n(u[p])),_=s.next(),O.label=3;case 3:return _.done?[3,6]:(T=_.value,[4,T]);case 4:O.sent(),O.label=5;case 5:return _=s.next(),[3,3];case 6:return[3,9];case 7:return I=O.sent(),L={error:I},[3,9];case 8:try{_&&!_.done&&(B=s.return)&&B.call(s)}finally{if(L)throw L.error}return[7];case 9:return++p,[3,1];case 10:return[2]}})}()},e.forEach(function(p){var s=p.key,_=p.value;return i.setElement(s,_)}),Object.freeze(this)}Object.freeze(f),d.default=f},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(c,h,d){var o=this&&this.__generator||function(e,r){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,y,u,m;return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(s){return function(_){return p([s,_])}}function p(s){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,y&&(u=s[0]&2?y.return:s[0]?y.throw||((u=y.return)&&u.call(y),0):y.next)&&!(u=u.call(y,s[1])).done)return u;switch(y=0,u&&(s=[s[0]&2,u.value]),s[0]){case 0:case 1:u=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,y=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!u||s[1]>u[0]&&s[1]<u[3])){t.label=s[1];break}if(s[0]===6&&t.label<u[1]){t.label=u[1],u=s;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(s);break}u[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(_){s=[6,_],y=0}finally{i=u=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},n=this&&this.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(d,"__esModule",{value:!0});var l=c("../Set/Set"),a=c("../LinkList/LinkList");f.initSize=1<<4,f.maxSize=1<<30,f.sigma=.75,f.treeifyThreshold=8,f.untreeifyThreshold=6,f.minTreeifySize=64;function f(e,r,t){var i=this;if(e===void 0&&(e=[]),r===void 0&&(r=f.initSize),t=t||function(p){var s=0,_="";if(typeof p=="number")s=Math.floor(p),s=(s<<5)-s,s=s&s;else{typeof p!="string"?_=JSON.stringify(p):_=p;for(var T=0;T<_.length;T++){var I=_.charCodeAt(T);s=(s<<5)-s+I,s=s&s}}return s^=s>>>16,s},(r&r-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var y=0,u=[],m=Math.max(f.initSize,Math.min(f.maxSize,r));this.size=function(){return y},this.empty=function(){return y===0},this.clear=function(){y=0,m=r,u=[]},this.forEach=function(p){var s=0;u.forEach(function(_){_.forEach(function(T){p(T,s++)})})};var b=function(p){if(!(p>=f.maxSize)){m=p*2;var s=[];u.forEach(function(_,T){if(!_.empty()){if(_ instanceof a.default&&_.size()===1){var I=_.front();if(I===void 0)throw new Error("unknown error");s[t(I)&m-1]=new a.default([I])}else if(_ instanceof l.default){var L=new a.default,B=new a.default;_.forEach(function(v){var x=t(v);(x&p)==0?L.pushBack(v):B.pushBack(v)}),L.size()>f.untreeifyThreshold?s[T]=new l.default(L):L.size()&&(s[T]=L),B.size()>f.untreeifyThreshold?s[T+p]=new l.default(B):B.size()&&(s[T+p]=B)}else{var O=new a.default,W=new a.default;_.forEach(function(v){var x=t(v);(x&p)==0?O.pushBack(v):W.pushBack(v)}),O.size()&&(s[T]=O),W.size()&&(s[T+p]=W)}u[T].clear()}}),u=s}};this.insert=function(p){if(p==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var s=t(p)&m-1;if(!u[s])u[s]=new a.default([p]),++y;else{var _=u[s].size();if(u[s]instanceof a.default){if(u[s].find(p))return;u[s].pushBack(p),u[s].size()>=f.treeifyThreshold&&(u[s]=new l.default(u[s]))}else u[s].insert(p);var T=u[s].size();y+=T-_}y>m*f.sigma&&b.call(this,m)},this.eraseElementByValue=function(p){var s=t(p)&m-1;if(!!u[s]){var _=u[s].size();u[s].eraseElementByValue(p),u[s]instanceof l.default&&u[s].size()<=f.untreeifyThreshold&&(u[s]=new a.default(u[s]));var T=u[s].size();y+=T-_}},this.find=function(p){var s=t(p)&m-1;return u[s]?u[s].find(p):!1},this[Symbol.iterator]=function(){return function(){var p,s,_,T,I,L,B;return o(this,function(O){switch(O.label){case 0:p=0,O.label=1;case 1:if(!(p<m))return[3,10];for(;p<m&&!u[p];)++p;if(p>=m)return[3,10];O.label=2;case 2:O.trys.push([2,7,8,9]),s=(L=void 0,n(u[p])),_=s.next(),O.label=3;case 3:return _.done?[3,6]:(T=_.value,[4,T]);case 4:O.sent(),O.label=5;case 5:return _=s.next(),[3,3];case 6:return[3,9];case 7:return I=O.sent(),L={error:I},[3,9];case 8:try{_&&!_.done&&(B=s.return)&&B.call(s)}finally{if(L)throw L.error}return[7];case 9:return++p,[3,1];case 10:return[2]}})}()},e.forEach(function(p){return i.insert(p)}),Object.freeze(this)}Object.freeze(f),d.default=f},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(c,h,d){var o=this&&this.__generator||function(a,f){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,t,i,y;return y={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function u(b){return function(p){return m([b,p])}}function m(b){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,t&&(i=b[0]&2?t.return:b[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,b[1])).done)return i;switch(t=0,i&&(b=[b[0]&2,i.value]),b[0]){case 0:case 1:i=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++,t=b[1],b=[0];continue;case 7:b=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(b[0]===6||b[0]===2)){e=0;continue}if(b[0]===3&&(!i||b[1]>i[0]&&b[1]<i[3])){e.label=b[1];break}if(b[0]===6&&e.label<i[1]){e.label=i[1],i=b;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(b);break}i[2]&&e.ops.pop(),e.trys.pop();continue}b=f.call(a,e)}catch(p){b=[6,p],t=0}finally{r=i=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(d,"__esModule",{value:!0});var n=function(){function a(f){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=f}return a}();function l(a){var f=this;a===void 0&&(a=[]);var e=0,r=void 0,t=void 0;this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){r=t=void 0,e=0},this.front=function(){return r==null?void 0:r.value},this.back=function(){return t==null?void 0:t.value},this.forEach=function(i){for(var y=r,u=0;y;){if(y.value===void 0)throw new Error("unknown error");i(y.value,u++),y=y.next}},this.getElementByPos=function(i){if(i<0||i>=e)throw new Error("pos must more then 0 and less then the list length");for(var y=r;i--&&y;)y=y.next;if(!y||y.value===void 0)throw new Error("unknown error");return y.value},this.eraseElementByPos=function(i){if(i<0||i>=e)throw new Error("erase pos must more then 0 and less then the list length");if(i===0)this.popFront();else if(i===e-1)this.popBack();else{for(var y=r;i--;){if(!(y==null?void 0:y.next))throw new Error("unknown error");y=y.next}if(!y||!y.pre||!y.next)throw new Error("unknown error");var u=y.pre,m=y.next;m.pre=u,u.next=m,e>0&&--e}},this.eraseElementByValue=function(i){for(;r&&r.value===i;)this.popFront();for(;t&&t.value===i;)this.popBack();if(!!r)for(var y=r;y;){if(y.value===i){var u=y.pre,m=y.next;m&&(m.pre=u),u&&(u.next=m),e>0&&--e}y=y.next}},this.pushBack=function(i){if(i==null)throw new Error("you can't push null or undefined here");++e;var y=new n(i);t?(t.next=y,y.pre=t,t=y):r=t=y},this.popBack=function(){!t||(e>0&&--e,!!t&&(r===t?r=t=void 0:(t=t.pre,t&&(t.next=void 0))))},this.setElementByPos=function(i,y){if(y==null)throw new Error("you can't set null or undefined here");if(i<0||i>=e)throw new Error("pos must more then 0 and less then the list length");for(var u=r;i--;){if(!u)throw new Error("unknown error");u=u.next}u&&(u.value=y)},this.insert=function(i,y,u){if(u===void 0&&(u=1),y==null)throw new Error("you can't insert null or undefined here");if(i<0||i>e)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(u<0)throw new Error("insert size must more than 0");if(i===0)for(;u--;)this.pushFront(y);else if(i===e)for(;u--;)this.pushBack(y);else{for(var m=r,b=1;b<i;++b){if(!(m==null?void 0:m.next))throw new Error("unknown error");m=m==null?void 0:m.next}if(!m)throw new Error("unknown error");var p=m.next;for(e+=u;u--;)m.next=new n(y),m.next.pre=m,m=m.next;m.next=p,p&&(p.pre=m)}},this.find=function(i){for(var y=r;y;){if(y.value===i)return!0;y=y.next}return!1},this.reverse=function(){for(var i=r,y=t,u=0;i&&y&&u*2<e;){var m=i.value;i.value=y.value,y.value=m,i=i.next,y=y.pre,++u}},this.unique=function(){for(var i=r;i;){for(var y=i;y&&y.next&&y.value===y.next.value;)y=y.next,e>0&&--e;i.next=y.next,i.next&&(i.next.pre=i),i=i.next}},this.sort=function(i){var y=[];this.forEach(function(m){y.push(m)}),y.sort(i);var u=r;y.forEach(function(m){u&&(u.value=m,u=u.next)})},this.pushFront=function(i){if(i==null)throw new Error("you can't push null or undefined here");++e;var y=new n(i);r?(y.next=r,r.pre=y,r=y):r=t=y},this.popFront=function(){!r||(e>0&&--e,!!r&&(r===t?r=t=void 0:(r=r.next,r&&(r.pre=void 0))))},this.merge=function(i){var y=this,u=r;i.forEach(function(m){for(;u&&u.value!==void 0&&u.value<=m;)u=u.next;if(u===void 0)y.pushBack(m),u=t;else if(u===r)y.pushFront(m),u=r;else{++e;var b=u.pre;b&&(b.next=new n(m),b.next.pre=b,b.next.next=u,u&&(u.pre=b.next))}})},this[Symbol.iterator]=function(){return function(){var i;return o(this,function(y){switch(y.label){case 0:i=r,y.label=1;case 1:if(i===void 0)return[3,3];if(!i.value)throw new Error("unknown error");return[4,i.value];case 2:return y.sent(),i=i.next,[3,1];case 3:return[2]}})}()},a.forEach(function(i){return f.pushBack(i)}),Object.freeze(this)}Object.freeze(l),d.default=l},{}],30:[function(c,h,d){var o=this&&this.__generator||function(f,e){var r={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},t,i,y,u;return u={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function m(p){return function(s){return b([p,s])}}function b(p){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,i&&(y=p[0]&2?i.return:p[0]?i.throw||((y=i.return)&&y.call(i),0):i.next)&&!(y=y.call(i,p[1])).done)return y;switch(i=0,y&&(p=[p[0]&2,y.value]),p[0]){case 0:case 1:y=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,i=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(y=r.trys,!(y=y.length>0&&y[y.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!y||p[1]>y[0]&&p[1]<y[3])){r.label=p[1];break}if(p[0]===6&&r.label<y[1]){r.label=y[1],y=p;break}if(y&&r.label<y[2]){r.label=y[2],r.ops.push(p);break}y[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(f,r)}catch(s){p=[6,s],i=0}finally{t=y=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},n=this&&this.__values||function(f){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&f[e],t=0;if(r)return r.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&t>=f.length&&(f=void 0),{value:f&&f[t++],done:!f}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(d,"__esModule",{value:!0});var l=c("../Base/TreeNode");function a(f,e){var r=this;f===void 0&&(f=[]),e=e||function(v,x){return v<x?-1:v>x?1:0};var t=0,i=new l.default;i.color=l.default.TreeNodeColorType.black,this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){t=0,i.key=i.value=void 0,i.leftChild=i.rightChild=i.brother=void 0};var y=function(v){if(!v||v.key===void 0)throw new Error("unknown error");return v.leftChild?y(v.leftChild):v},u=function(v){if(!v||v.key===void 0)throw new Error("unknown error");return v.rightChild?u(v.rightChild):v};this.front=function(){if(!this.empty()){var v=y(i);if(v.key===void 0||v.value===void 0)throw new Error("unknown error");return{key:v.key,value:v.value}}},this.back=function(){if(!this.empty()){var v=u(i);if(v.key===void 0||v.value===void 0)throw new Error("unknown error");return{key:v.key,value:v.value}}},this.forEach=function(v){var x,E,D=0;try{for(var V=n(this),q=V.next();!q.done;q=V.next()){var Y=q.value;v(Y,D++)}}catch(A){x={error:A}}finally{try{q&&!q.done&&(E=V.return)&&E.call(V)}finally{if(x)throw x.error}}},this.getElementByPos=function(v){var x,E;if(v<0||v>=this.size())throw new Error("pos must more than 0 and less than set's size");var D=0;try{for(var V=n(this),q=V.next();!q.done;q=V.next()){var Y=q.value;if(D===v)return Y;++D}}catch(A){x={error:A}}finally{try{q&&!q.done&&(E=V.return)&&E.call(V)}finally{if(x)throw x.error}}throw new Error("unknown Error")};var m=function(v,x){if(!(!v||v.key===void 0||v.value===void 0)){var E=e(v.key,x);return E===0?{key:v.key,value:v.value}:E<0?m(v.rightChild,x):m(v.leftChild,x)||{key:v.key,value:v.value}}};this.lowerBound=function(v){return m(i,v)};var b=function(v,x){if(!(!v||v.key===void 0||v.value===void 0)){var E=e(v.key,x);return E<=0?b(v.rightChild,x):b(v.leftChild,x)||{key:v.key,value:v.value}}};this.upperBound=function(v){return b(i,v)};var p=function(v,x){if(!(!v||v.key===void 0||v.value===void 0)){var E=e(v.key,x);return E===0?{key:v.key,value:v.value}:E>0?p(v.leftChild,x):p(v.rightChild,x)||{key:v.key,value:v.value}}};this.reverseLowerBound=function(v){return p(i,v)};var s=function(v,x){if(!(!v||v.key===void 0||v.value===void 0)){var E=e(v.key,x);return E>=0?s(v.leftChild,x):s(v.rightChild,x)||{key:v.key,value:v.value}}};this.reverseUpperBound=function(v){return s(i,v)};var _=function(v){var x=v.parent;if(!x){if(v===i)return;throw new Error("unknown error")}if(v.color===l.default.TreeNodeColorType.red){v.color=l.default.TreeNodeColorType.black;return}var E=v.brother;if(!E)throw new Error("unknown error");if(v===x.leftChild){if(E.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.black,x.color=l.default.TreeNodeColorType.red;var D=x.rotateLeft();i===x&&(i=D),_(v)}else if(E.color===l.default.TreeNodeColorType.black)if(E.rightChild&&E.rightChild.color===l.default.TreeNodeColorType.red){E.color=x.color,x.color=l.default.TreeNodeColorType.black,E.rightChild&&(E.rightChild.color=l.default.TreeNodeColorType.black);var D=x.rotateLeft();i===x&&(i=D),v.color=l.default.TreeNodeColorType.black}else if((!E.rightChild||E.rightChild.color===l.default.TreeNodeColorType.black)&&E.leftChild&&E.leftChild.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.red,E.leftChild&&(E.leftChild.color=l.default.TreeNodeColorType.black);var D=E.rotateRight();i===E&&(i=D),_(v)}else(!E.leftChild||E.leftChild.color===l.default.TreeNodeColorType.black)&&(!E.rightChild||E.rightChild.color===l.default.TreeNodeColorType.black)&&(E.color=l.default.TreeNodeColorType.red,_(x))}else if(v===x.rightChild){if(E.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.black,x.color=l.default.TreeNodeColorType.red;var D=x.rotateRight();i===x&&(i=D),_(v)}else if(E.color===l.default.TreeNodeColorType.black)if(E.leftChild&&E.leftChild.color===l.default.TreeNodeColorType.red){E.color=x.color,x.color=l.default.TreeNodeColorType.black,E.leftChild&&(E.leftChild.color=l.default.TreeNodeColorType.black);var D=x.rotateRight();i===x&&(i=D),v.color=l.default.TreeNodeColorType.black}else if((!E.leftChild||E.leftChild.color===l.default.TreeNodeColorType.black)&&E.rightChild&&E.rightChild.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.red,E.rightChild&&(E.rightChild.color=l.default.TreeNodeColorType.black);var D=E.rotateLeft();i===E&&(i=D),_(v)}else(!E.leftChild||E.leftChild.color===l.default.TreeNodeColorType.black)&&(!E.rightChild||E.rightChild.color===l.default.TreeNodeColorType.black)&&(E.color=l.default.TreeNodeColorType.red,_(x))}},T=function(v){for(var x=v;x.leftChild||x.rightChild;){if(x.rightChild){x=y(x.rightChild);var E=v.key;v.key=x.key,x.key=E;var D=v.value;v.value=x.value,x.value=D,v=x}if(x.leftChild){x=u(x.leftChild);var E=v.key;v.key=x.key,x.key=E;var D=v.value;v.value=x.value,x.value=D,v=x}}_(x),x&&x.remove(),--t,i.color=l.default.TreeNodeColorType.black},I=function(v,x){if(!v||v.key===void 0)return!1;var E=I(v.leftChild,x);return E||x(v)?!0:I(v.rightChild,x)};this.eraseElementByPos=function(v){if(v<0||v>=t)throw new Error("pos must more than 0 and less than set's size");var x=0;I(i,function(E){return v===x?(T(E),!0):(++x,!1)})},this.eraseElementByKey=function(v){if(!this.empty()){var x=O(i,v);x===void 0||x.key===void 0||e(x.key,v)!==0||T(x)}};var L=function(v,x){if(!v||v.key===void 0)throw new Error("unknown error");var E=e(x,v.key);return E<0?v.leftChild?L(v.leftChild,x):(v.leftChild=new l.default,v.leftChild.parent=v,v.leftChild.brother=v.rightChild,v.rightChild&&(v.rightChild.brother=v.leftChild),v.leftChild):E>0?v.rightChild?L(v.rightChild,x):(v.rightChild=new l.default,v.rightChild.parent=v,v.rightChild.brother=v.leftChild,v.leftChild&&(v.leftChild.brother=v.rightChild),v.rightChild):v},B=function(v){var x=v.parent;if(!x){if(v===i)return;throw new Error("unknown error")}if(x.color!==l.default.TreeNodeColorType.black&&x.color===l.default.TreeNodeColorType.red){var E=x.brother,D=x.parent;if(!D)throw new Error("unknown error");if(E&&E.color===l.default.TreeNodeColorType.red)E.color=x.color=l.default.TreeNodeColorType.black,D.color=l.default.TreeNodeColorType.red,B(D);else if(!E||E.color===l.default.TreeNodeColorType.black){if(x===D.leftChild){if(v===x.leftChild){x.color=l.default.TreeNodeColorType.black,D.color=l.default.TreeNodeColorType.red;var V=D.rotateRight();D===i&&(i=V)}else if(v===x.rightChild){var V=x.rotateLeft();D===i&&(i=V),B(x)}}else if(x===D.rightChild){if(v===x.leftChild){var V=x.rotateRight();D===i&&(i=V),B(x)}else if(v===x.rightChild){x.color=l.default.TreeNodeColorType.black,D.color=l.default.TreeNodeColorType.red;var V=D.rotateLeft();D===i&&(i=V)}}}}};this.setElement=function(v,x){if(v==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(x==null){this.eraseElementByKey(v);return}if(this.empty()){++t,i.key=v,i.value=x,i.color=l.default.TreeNodeColorType.black;return}var E=L(i,v);if(E.key!==void 0&&e(E.key,v)===0){E.value=x;return}++t,E.key=v,E.value=x,B(E),i.color=l.default.TreeNodeColorType.black};var O=function(v,x){if(!(!v||v.key===void 0)){var E=e(x,v.key);return E<0?O(v.leftChild,x):E>0?O(v.rightChild,x):v}};this.find=function(v){return!!O(i,v)},this.getElementByKey=function(v){var x=O(i,v);if((x==null?void 0:x.key)===void 0||(x==null?void 0:x.value)===void 0)throw new Error("unknown error");return x.value},this.union=function(v){var x=this;v.forEach(function(E){var D=E.key,V=E.value;return x.setElement(D,V)})},this.getHeight=function(){if(this.empty())return 0;var v=function(x){return x?Math.max(v(x.leftChild),v(x.rightChild))+1:1};return v(i)};var W=function(v){return o(this,function(x){switch(x.label){case 0:return!v||v.key===void 0||v.value===void 0?[2]:[5,n(W(v.leftChild))];case 1:return x.sent(),[4,{key:v.key,value:v.value}];case 2:return x.sent(),[5,n(W(v.rightChild))];case 3:return x.sent(),[2]}})};this[Symbol.iterator]=function(){return W(i)},f.forEach(function(v){var x=v.key,E=v.value;return r.setElement(x,E)}),Object.freeze(this)}Object.freeze(a),d.default=a},{"../Base/TreeNode":25}],31:[function(c,h,d){Object.defineProperty(d,"__esModule",{value:!0});function o(n,l){n===void 0&&(n=[]),l=l||function(t,i){return t>i?-1:t<i?1:0};var a=[];n.forEach(function(t){return a.push(t)});var f=a.length,e=function(t,i){if(t<0||t>=f)throw new Error("unknown error");if(i<0||i>=f)throw new Error("unknown error");var y=a[t];a[t]=a[i],a[i]=y},r=function(t){if(t<0||t>=f)throw new Error("unknown error");var i=t*2+1,y=t*2+2;i<f&&l(a[t],a[i])>0&&e(t,i),y<f&&l(a[t],a[y])>0&&e(t,y)};(function(){for(var t=Math.floor((f-1)/2);t>=0;--t)for(var i=t,y=i*2+1;y<f;){var u=y,m=u+1,b=u;if(m<f&&l(a[u],a[m])>0&&(b=m),l(a[i],a[b])<=0)break;e(i,b),i=b,y=i*2+1}})(),this.size=function(){return f},this.empty=function(){return f===0},this.clear=function(){f=0,a.length=0},this.push=function(t){if(a.push(t),++f,f!==1)for(var i=f-1;i>0;){var y=Math.floor((i-1)/2);if(l(a[y],t)<=0)break;r(y),i=y}},this.pop=function(){if(!this.empty()){if(this.size()===1){--f;return}var t=a[f-1];--f;for(var i=0;i<this.size();){var y=i*2+1,u=i*2+2;if(y>=this.size())break;var m=y;if(u<this.size()&&l(a[y],a[u])>0&&(m=u),l(a[m],t)>=0)break;a[i]=a[m],i=m}a[i]=t}},this.top=function(){return a[0]},Object.freeze(this)}Object.freeze(o),d.default=o},{}],32:[function(c,h,d){Object.defineProperty(d,"__esModule",{value:!0});var o=c("../LinkList/LinkList");function n(l){l===void 0&&(l=[]);var a=new o.default(l);this.size=function(){return a.size()},this.empty=function(){return a.empty()},this.clear=function(){a.clear()},this.push=function(f){a.pushBack(f)},this.pop=function(){a.popFront()},this.front=function(){return a.front()},Object.freeze(this)}Object.freeze(n),d.default=n},{"../LinkList/LinkList":29}],33:[function(c,h,d){var o=this&&this.__generator||function(f,e){var r={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},t,i,y,u;return u={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function m(p){return function(s){return b([p,s])}}function b(p){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,i&&(y=p[0]&2?i.return:p[0]?i.throw||((y=i.return)&&y.call(i),0):i.next)&&!(y=y.call(i,p[1])).done)return y;switch(i=0,y&&(p=[p[0]&2,y.value]),p[0]){case 0:case 1:y=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,i=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(y=r.trys,!(y=y.length>0&&y[y.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!y||p[1]>y[0]&&p[1]<y[3])){r.label=p[1];break}if(p[0]===6&&r.label<y[1]){r.label=y[1],y=p;break}if(y&&r.label<y[2]){r.label=y[2],r.ops.push(p);break}y[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(f,r)}catch(s){p=[6,s],i=0}finally{t=y=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},n=this&&this.__values||function(f){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&f[e],t=0;if(r)return r.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&t>=f.length&&(f=void 0),{value:f&&f[t++],done:!f}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(d,"__esModule",{value:!0});var l=c("../Base/TreeNode");function a(f,e){var r=this;f===void 0&&(f=[]),e=e||function(v,x){return v<x?-1:v>x?1:0};var t=0,i=new l.default;i.color=l.default.TreeNodeColorType.black,this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){t=0,i.key=void 0,i.leftChild=i.rightChild=i.brother=i.parent=void 0,i.color=l.default.TreeNodeColorType.black};var y=function(v){if(!v||v.key===void 0)throw new Error("unknown error");return v.leftChild?y(v.leftChild):v},u=function(v){if(!v||v.key===void 0)throw new Error("unknown error");return v.rightChild?u(v.rightChild):v};this.front=function(){if(!this.empty()){var v=y(i);return v.key}},this.back=function(){if(!this.empty()){var v=u(i);return v.key}},this.forEach=function(v){var x,E,D=0;try{for(var V=n(this),q=V.next();!q.done;q=V.next()){var Y=q.value;v(Y,D++)}}catch(A){x={error:A}}finally{try{q&&!q.done&&(E=V.return)&&E.call(V)}finally{if(x)throw x.error}}},this.getElementByPos=function(v){var x,E;if(v<0||v>=this.size())throw new Error("pos must more than 0 and less than set's size");var D=0;try{for(var V=n(this),q=V.next();!q.done;q=V.next()){var Y=q.value;if(D===v)return Y;++D}}catch(A){x={error:A}}finally{try{q&&!q.done&&(E=V.return)&&E.call(V)}finally{if(x)throw x.error}}throw new Error("unknown error")};var m=function(v){var x=v.parent;if(!x){if(v===i)return;throw new Error("unknown error")}if(v.color===l.default.TreeNodeColorType.red){v.color=l.default.TreeNodeColorType.black;return}var E=v.brother;if(!E)throw new Error("unknown error");if(v===x.leftChild){if(E.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.black,x.color=l.default.TreeNodeColorType.red;var D=x.rotateLeft();i===x&&(i=D),m(v)}else if(E.color===l.default.TreeNodeColorType.black)if(E.rightChild&&E.rightChild.color===l.default.TreeNodeColorType.red){E.color=x.color,x.color=l.default.TreeNodeColorType.black,E.rightChild&&(E.rightChild.color=l.default.TreeNodeColorType.black);var D=x.rotateLeft();i===x&&(i=D),v.color=l.default.TreeNodeColorType.black}else if((!E.rightChild||E.rightChild.color===l.default.TreeNodeColorType.black)&&E.leftChild&&E.leftChild.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.red,E.leftChild&&(E.leftChild.color=l.default.TreeNodeColorType.black);var D=E.rotateRight();i===E&&(i=D),m(v)}else(!E.leftChild||E.leftChild.color===l.default.TreeNodeColorType.black)&&(!E.rightChild||E.rightChild.color===l.default.TreeNodeColorType.black)&&(E.color=l.default.TreeNodeColorType.red,m(x))}else if(v===x.rightChild){if(E.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.black,x.color=l.default.TreeNodeColorType.red;var D=x.rotateRight();i===x&&(i=D),m(v)}else if(E.color===l.default.TreeNodeColorType.black)if(E.leftChild&&E.leftChild.color===l.default.TreeNodeColorType.red){E.color=x.color,x.color=l.default.TreeNodeColorType.black,E.leftChild&&(E.leftChild.color=l.default.TreeNodeColorType.black);var D=x.rotateRight();i===x&&(i=D),v.color=l.default.TreeNodeColorType.black}else if((!E.leftChild||E.leftChild.color===l.default.TreeNodeColorType.black)&&E.rightChild&&E.rightChild.color===l.default.TreeNodeColorType.red){E.color=l.default.TreeNodeColorType.red,E.rightChild&&(E.rightChild.color=l.default.TreeNodeColorType.black);var D=E.rotateLeft();i===E&&(i=D),m(v)}else(!E.leftChild||E.leftChild.color===l.default.TreeNodeColorType.black)&&(!E.rightChild||E.rightChild.color===l.default.TreeNodeColorType.black)&&(E.color=l.default.TreeNodeColorType.red,m(x))}},b=function(v){for(var x=v;x.leftChild||x.rightChild;){if(x.rightChild){x=y(x.rightChild);var E=v.key;v.key=x.key,x.key=E,v=x}if(x.leftChild){x=u(x.leftChild);var E=v.key;v.key=x.key,x.key=E,v=x}}m(x),x&&x.remove(),--t,i.color=l.default.TreeNodeColorType.black},p=function(v,x){if(!v||v.key===void 0)return!1;var E=p(v.leftChild,x);return E||x(v)?!0:p(v.rightChild,x)};this.eraseElementByPos=function(v){if(v<0||v>=t)throw new Error("pos must more than 0 and less than set's size");var x=0;p(i,function(E){return v===x?(b(E),!0):(++x,!1)})},this.eraseElementByValue=function(v){if(!this.empty()){var x=T(i,v);x===void 0||x.key===void 0||e(x.key,v)!==0||b(x)}};var s=function(v,x){if(!v||v.key===void 0)throw new Error("unknown error");var E=e(x,v.key);return E<0?v.leftChild?s(v.leftChild,x):(v.leftChild=new l.default,v.leftChild.parent=v,v.leftChild.brother=v.rightChild,v.rightChild&&(v.rightChild.brother=v.leftChild),v.leftChild):E>0?v.rightChild?s(v.rightChild,x):(v.rightChild=new l.default,v.rightChild.parent=v,v.rightChild.brother=v.leftChild,v.leftChild&&(v.leftChild.brother=v.rightChild),v.rightChild):v},_=function(v){var x=v.parent;if(!x){if(v===i)return;throw new Error("unknown error")}if(x.color!==l.default.TreeNodeColorType.black&&x.color===l.default.TreeNodeColorType.red){var E=x.brother,D=x.parent;if(!D)throw new Error("unknown error");if(E&&E.color===l.default.TreeNodeColorType.red)E.color=x.color=l.default.TreeNodeColorType.black,D.color=l.default.TreeNodeColorType.red,_(D);else if(!E||E.color===l.default.TreeNodeColorType.black){if(x===D.leftChild){if(v===x.leftChild){x.color=l.default.TreeNodeColorType.black,D.color=l.default.TreeNodeColorType.red;var V=D.rotateRight();D===i&&(i=V)}else if(v===x.rightChild){var V=x.rotateLeft();D===i&&(i=V),_(x)}}else if(x===D.rightChild){if(v===x.leftChild){var V=x.rotateRight();D===i&&(i=V),_(x)}else if(v===x.rightChild){x.color=l.default.TreeNodeColorType.black,D.color=l.default.TreeNodeColorType.red;var V=D.rotateLeft();D===i&&(i=V)}}}}};this.insert=function(v){if(v==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty()){++t,i.key=v,i.color=l.default.TreeNodeColorType.black;return}var x=s(i,v);x.key!==void 0&&e(x.key,v)===0||(++t,x.key=v,_(x),i.color=l.default.TreeNodeColorType.black)};var T=function(v,x){if(!(!v||v.key===void 0)){var E=e(x,v.key);return E<0?T(v.leftChild,x):E>0?T(v.rightChild,x):v}};this.find=function(v){var x=T(i,v);return x!==void 0&&x.key!==void 0&&e(x.key,v)===0};var I=function(v,x){if(!(!v||v.key===void 0)){var E=e(v.key,x);return E===0?v.key:E<0?I(v.rightChild,x):I(v.leftChild,x)||v.key}};this.lowerBound=function(v){return I(i,v)};var L=function(v,x){if(!(!v||v.key===void 0)){var E=e(v.key,x);return E<=0?L(v.rightChild,x):L(v.leftChild,x)||v.key}};this.upperBound=function(v){return L(i,v)};var B=function(v,x){if(!(!v||v.key===void 0)){var E=e(v.key,x);return E===0?v.key:E>0?B(v.leftChild,x):B(v.rightChild,x)||v.key}};this.reverseLowerBound=function(v){return B(i,v)};var O=function(v,x){if(!(!v||v.key===void 0)){var E=e(v.key,x);return E>=0?O(v.leftChild,x):O(v.rightChild,x)||v.key}};this.reverseUpperBound=function(v){return O(i,v)},this.union=function(v){var x=this;v.forEach(function(E){return x.insert(E)})},this.getHeight=function(){if(this.empty())return 0;var v=function(x){return x?Math.max(v(x.leftChild),v(x.rightChild))+1:1};return v(i)};var W=function(v){return o(this,function(x){switch(x.label){case 0:return!v||v.key===void 0?[2]:[5,n(W(v.leftChild))];case 1:return x.sent(),[4,v.key];case 2:return x.sent(),[5,n(W(v.rightChild))];case 3:return x.sent(),[2]}})};this[Symbol.iterator]=function(){return W(i)},f.forEach(function(v){return r.insert(v)}),Object.freeze(this)}Object.freeze(a),d.default=a},{"../Base/TreeNode":25}],34:[function(c,h,d){Object.defineProperty(d,"__esModule",{value:!0});function o(n){var l=this;n===void 0&&(n=[]);var a=0,f=[];this.size=function(){return a},this.empty=function(){return a===0},this.clear=function(){a=0,f.length=0},this.push=function(e){f.push(e),++a},this.pop=function(){f.pop(),a>0&&--a},this.top=function(){return f[a-1]},n.forEach(function(e){return l.push(e)}),Object.freeze(this)}Object.freeze(o),d.default=o},{}],35:[function(c,h,d){var o=this&&this.__generator||function(e,r){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,y,u,m;return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(s){return function(_){return p([s,_])}}function p(s){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,y&&(u=s[0]&2?y.return:s[0]?y.throw||((u=y.return)&&u.call(y),0):y.next)&&!(u=u.call(y,s[1])).done)return u;switch(y=0,u&&(s=[s[0]&2,u.value]),s[0]){case 0:case 1:u=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,y=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!u||s[1]>u[0]&&s[1]<u[3])){t.label=s[1];break}if(s[0]===6&&t.label<u[1]){t.label=u[1],u=s;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(s);break}u[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(_){s=[6,_],y=0}finally{i=u=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},n=this&&this.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var i=t.call(e),y,u=[],m;try{for(;(r===void 0||r-- >0)&&!(y=i.next()).done;)u.push(y.value)}catch(b){m={error:b}}finally{try{y&&!y.done&&(t=i.return)&&t.call(i)}finally{if(m)throw m.error}}return u},l=this&&this.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var i=0,y=r.length,u;i<y;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return e.concat(u||Array.prototype.slice.call(r))},a=this&&this.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(d,"__esModule",{value:!0});function f(e){var r=this;e===void 0&&(e=[]);var t=0,i=[];this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){t=0,i.length=0},this.front=function(){if(!this.empty())return i[0]},this.back=function(){if(!this.empty())return i[t-1]},this.forEach=function(y){i.forEach(y)},this.getElementByPos=function(y){if(y<0||y>=t)throw new Error("pos must more than 0 and less than vector's size");return i[y]},this.eraseElementByPos=function(y){if(y<0||y>=t)throw new Error("pos must more than 0 and less than vector's size");for(var u=y;u<t-1;++u)i[u]=i[u+1];this.popBack()},this.eraseElementByValue=function(y){var u=[];this.forEach(function(b){b!==y&&u.push(b)}),u.forEach(function(b,p){i[p]=b});for(var m=u.length;t>m;)this.popBack()},this.pushBack=function(y){i.push(y),++t},this.popBack=function(){i.pop(),t>0&&--t},this.setElementByPos=function(y,u){if(y<0||y>=t)throw new Error("pos must more than 0 and less than vector's size");i[y]=u},this.insert=function(y,u,m){if(m===void 0&&(m=1),y<0||y>t)throw new Error("pos must more than 0 and less than or equal to vector's size");i.splice.apply(i,l([y,0],n(new Array(m).fill(u)),!1)),t+=m},this.find=function(y){return i.includes(y)},this.reverse=function(){i.reverse()},this.unique=function(){var y,u=[];this.forEach(function(b,p){(p===0||b!==y)&&(u.push(b),y=b)}),u.forEach(function(b,p){i[p]=b});for(var m=u.length;t>m;)this.popBack()},this.sort=function(y){i.sort(y)},this[Symbol.iterator]=function(){return function(){return o(this,function(y){switch(y.label){case 0:return[5,a(i)];case 1:return[2,y.sent()]}})}()},e.forEach(function(y){return r.pushBack(y)}),Object.freeze(this)}Object.freeze(f),d.default=f},{}],36:[function(c,h,d){Object.defineProperty(d,"__esModule",{value:!0}),d.HashMap=d.HashSet=d.Map=d.Set=d.PriorityQueue=d.Deque=d.LinkList=d.Queue=d.Stack=d.Vector=void 0;var o=c("./Vector/Vector");d.Vector=o.default;var n=c("./Stack/Stack");d.Stack=n.default;var l=c("./Queue/Queue");d.Queue=l.default;var a=c("./LinkList/LinkList");d.LinkList=a.default;var f=c("./Deque/Deque");d.Deque=f.default;var e=c("./PriorityQueue/PriorityQueue");d.PriorityQueue=e.default;var r=c("./Set/Set");d.Set=r.default;var t=c("./Map/Map");d.Map=t.default;var i=c("./HashSet/HashSet");d.HashSet=i.default;var y=c("./HashMap/HashMap");d.HashMap=y.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(c,h,d){const o=c("yallist"),n=Symbol("max"),l=Symbol("length"),a=Symbol("lengthCalculator"),f=Symbol("allowStale"),e=Symbol("maxAge"),r=Symbol("dispose"),t=Symbol("noDisposeOnSet"),i=Symbol("lruList"),y=Symbol("cache"),u=Symbol("updateAgeOnGet"),m=()=>1;class b{constructor(O){if(typeof O=="number"&&(O={max:O}),O||(O={}),O.max&&(typeof O.max!="number"||O.max<0))throw new TypeError("max must be a non-negative number");this[n]=O.max||1/0;const W=O.length||m;if(this[a]=typeof W!="function"?m:W,this[f]=O.stale||!1,O.maxAge&&typeof O.maxAge!="number")throw new TypeError("maxAge must be a number");this[e]=O.maxAge||0,this[r]=O.dispose,this[t]=O.noDisposeOnSet||!1,this[u]=O.updateAgeOnGet||!1,this.reset()}set max(O){if(typeof O!="number"||O<0)throw new TypeError("max must be a non-negative number");this[n]=O||1/0,_(this)}get max(){return this[n]}set allowStale(O){this[f]=!!O}get allowStale(){return this[f]}set maxAge(O){if(typeof O!="number")throw new TypeError("maxAge must be a non-negative number");this[e]=O,_(this)}get maxAge(){return this[e]}set lengthCalculator(O){typeof O!="function"&&(O=m),O!==this[a]&&(this[a]=O,this[l]=0,this[i].forEach(W=>{W.length=this[a](W.value,W.key),this[l]+=W.length})),_(this)}get lengthCalculator(){return this[a]}get length(){return this[l]}get itemCount(){return this[i].length}rforEach(O,W){W=W||this;for(let v=this[i].tail;v!==null;){const x=v.prev;L(this,O,v,W),v=x}}forEach(O,W){W=W||this;for(let v=this[i].head;v!==null;){const x=v.next;L(this,O,v,W),v=x}}keys(){return this[i].toArray().map(O=>O.key)}values(){return this[i].toArray().map(O=>O.value)}reset(){this[r]&&this[i]&&this[i].length&&this[i].forEach(O=>this[r](O.key,O.value)),this[y]=new Map,this[i]=new o,this[l]=0}dump(){return this[i].map(O=>s(this,O)?!1:{k:O.key,v:O.value,e:O.now+(O.maxAge||0)}).toArray().filter(O=>O)}dumpLru(){return this[i]}set(O,W,v){if(v=v||this[e],v&&typeof v!="number")throw new TypeError("maxAge must be a number");const x=v?Date.now():0,E=this[a](W,O);if(this[y].has(O)){if(E>this[n])return T(this,this[y].get(O)),!1;const q=this[y].get(O).value;return this[r]&&(this[t]||this[r](O,q.value)),q.now=x,q.maxAge=v,q.value=W,this[l]+=E-q.length,q.length=E,this.get(O),_(this),!0}const D=new I(O,W,E,x,v);return D.length>this[n]?(this[r]&&this[r](O,W),!1):(this[l]+=D.length,this[i].unshift(D),this[y].set(O,this[i].head),_(this),!0)}has(O){if(!this[y].has(O))return!1;const W=this[y].get(O).value;return!s(this,W)}get(O){return p(this,O,!0)}peek(O){return p(this,O,!1)}pop(){const O=this[i].tail;return O?(T(this,O),O.value):null}del(O){T(this,this[y].get(O))}load(O){this.reset();const W=Date.now();for(let v=O.length-1;v>=0;v--){const x=O[v],E=x.e||0;if(E===0)this.set(x.k,x.v);else{const D=E-W;D>0&&this.set(x.k,x.v,D)}}}prune(){this[y].forEach((O,W)=>p(this,W,!1))}}const p=(B,O,W)=>{const v=B[y].get(O);if(v){const x=v.value;if(s(B,x)){if(T(B,v),!B[f])return}else W&&(B[u]&&(v.value.now=Date.now()),B[i].unshiftNode(v));return x.value}},s=(B,O)=>{if(!O||!O.maxAge&&!B[e])return!1;const W=Date.now()-O.now;return O.maxAge?W>O.maxAge:B[e]&&W>B[e]},_=B=>{if(B[l]>B[n])for(let O=B[i].tail;B[l]>B[n]&&O!==null;){const W=O.prev;T(B,O),O=W}},T=(B,O)=>{if(O){const W=O.value;B[r]&&B[r](W.key,W.value),B[l]-=W.length,B[y].delete(W.key),B[i].removeNode(O)}};class I{constructor(O,W,v,x,E){this.key=O,this.value=W,this.length=v,this.now=x,this.maxAge=E||0}}const L=(B,O,W,v)=>{let x=W.value;s(B,x)&&(T(B,W),B[f]||(x=void 0)),x&&O.call(v,x.value,x.key,B)};h.exports=b},{yallist:83}],38:[function(c,h,d){(function(o){(function(){const n=h.exports;n.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},n.codes={};for(const a in n.types){const f=n.types[a];n.codes[f]=a}n.CMD_SHIFT=4,n.CMD_MASK=240,n.DUP_MASK=8,n.QOS_MASK=3,n.QOS_SHIFT=1,n.RETAIN_MASK=1,n.VARBYTEINT_MASK=127,n.VARBYTEINT_FIN_MASK=128,n.VARBYTEINT_MAX=268435455,n.SESSIONPRESENT_MASK=1,n.SESSIONPRESENT_HEADER=o.from([n.SESSIONPRESENT_MASK]),n.CONNACK_HEADER=o.from([n.codes.connack<<n.CMD_SHIFT]),n.USERNAME_MASK=128,n.PASSWORD_MASK=64,n.WILL_RETAIN_MASK=32,n.WILL_QOS_MASK=24,n.WILL_QOS_SHIFT=3,n.WILL_FLAG_MASK=4,n.CLEAN_SESSION_MASK=2,n.CONNECT_HEADER=o.from([n.codes.connect<<n.CMD_SHIFT]),n.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},n.propertiesCodes={};for(const a in n.properties){const f=n.properties[a];n.propertiesCodes[f]=a}n.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function l(a){return[0,1,2].map(f=>[0,1].map(e=>[0,1].map(r=>{const t=o.alloc(1);return t.writeUInt8(n.codes[a]<<n.CMD_SHIFT|(e?n.DUP_MASK:0)|f<<n.QOS_SHIFT|r,0,!0),t})))}n.PUBLISH_HEADER=l("publish"),n.SUBSCRIBE_HEADER=l("subscribe"),n.SUBSCRIBE_OPTIONS_QOS_MASK=3,n.SUBSCRIBE_OPTIONS_NL_MASK=1,n.SUBSCRIBE_OPTIONS_NL_SHIFT=2,n.SUBSCRIBE_OPTIONS_RAP_MASK=1,n.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,n.SUBSCRIBE_OPTIONS_RH_MASK=3,n.SUBSCRIBE_OPTIONS_RH_SHIFT=4,n.SUBSCRIBE_OPTIONS_RH=[0,16,32],n.SUBSCRIBE_OPTIONS_NL=4,n.SUBSCRIBE_OPTIONS_RAP=8,n.SUBSCRIBE_OPTIONS_QOS=[0,1,2],n.UNSUBSCRIBE_HEADER=l("unsubscribe"),n.ACKS={unsuback:l("unsuback"),puback:l("puback"),pubcomp:l("pubcomp"),pubrel:l("pubrel"),pubrec:l("pubrec")},n.SUBACK_HEADER=o.from([n.codes.suback<<n.CMD_SHIFT]),n.VERSION3=o.from([3]),n.VERSION4=o.from([4]),n.VERSION5=o.from([5]),n.VERSION131=o.from([131]),n.VERSION132=o.from([132]),n.QOS=[0,1,2].map(a=>o.from([a])),n.EMPTY={pingreq:o.from([n.codes.pingreq<<4,0]),pingresp:o.from([n.codes.pingresp<<4,0]),disconnect:o.from([n.codes.disconnect<<4,0])}}).call(this)}).call(this,c("buffer").Buffer)},{buffer:17}],39:[function(c,h,d){(function(o){(function(){const n=c("./writeToStream"),l=c("events");function a(e,r){const t=new f;return n(e,t,r),t.concat()}class f extends l{constructor(){super();this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0;const t=new Array(this._array.length),i=this._array;let y=0,u;for(u=0;u<i.length&&i[u]!==void 0;u++)typeof i[u]!="string"?t[u]=i[u].length:t[u]=o.byteLength(i[u]),r+=t[u];const m=o.allocUnsafe(r);for(u=0;u<i.length&&i[u]!==void 0;u++)typeof i[u]!="string"?(i[u].copy(m,y),y+=t[u]):(m.write(i[u],y),y+=t[u]);return m}}h.exports=a}).call(this)}).call(this,c("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(c,h,d){d.parser=c("./parser").parser,d.generate=c("./generate"),d.writeToStream=c("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(c,h,d){(function(o){(function(){const n=65536,l={},a=o.isBuffer(o.from([1,2]).subarray(0,1));function f(i){const y=o.allocUnsafe(2);return y.writeUInt8(i>>8,0),y.writeUInt8(i&255,0+1),y}function e(){for(let i=0;i<n;i++)l[i]=f(i)}function r(i){const y=4;let u=0,m=0;const b=o.allocUnsafe(y);do u=i%128|0,i=i/128|0,i>0&&(u=u|128),b.writeUInt8(u,m++);while(i>0&&m<y);return i>0&&(m=0),a?b.subarray(0,m):b.slice(0,m)}function t(i){const y=o.allocUnsafe(4);return y.writeUInt32BE(i,0),y}h.exports={cache:l,generateCache:e,generateNumber:f,genBufVariableByteInt:r,generate4ByteBuffer:t}}).call(this)}).call(this,c("buffer").Buffer)},{buffer:17}],42:[function(c,h,d){class o{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}h.exports=o},{}],43:[function(c,h,d){const o=c("bl"),n=c("events"),l=c("./packet"),a=c("./constants"),f=c("debug")("mqtt-packet:parser");class e extends n{constructor(){super();this.parser=this.constructor.parser}static parser(t){return this instanceof e?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new e().parser(t)}_resetState(){f("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new l,this.error=null,this._list=o(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),f("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,f("parse: state complete. _stateCounter is now: %d",this._stateCounter),f("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return f("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const t=this._list.readUInt8(0);return this.packet.cmd=a.types[t>>a.CMD_SHIFT],this.packet.retain=(t&a.RETAIN_MASK)!=0,this.packet.qos=t>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=(t&a.DUP_MASK)!=0,f("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),f("_parseLength %d",t.value),!!t}_parsePayload(){f("_parsePayload: payload %O",this._list);let t=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return f("_parsePayload complete result: %s",t),t}_parseConnect(){f("_parseConnect");let t,i,y,u;const m={},b=this.packet,p=this._parseString();if(p===null)return this._emitError(new Error("Cannot parse protocolId"));if(p!=="MQTT"&&p!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=p,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(m.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,m.will&&(b.will={},b.will.retain=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK)!=0,b.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),b.clean=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK)!=0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){const _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.properties=_)}const s=this._parseString();if(s===null)return this._emitError(new Error("Packet too short"));if(b.clientId=s,f("_parseConnect: packet.clientId: %s",b.clientId),m.will){if(b.protocolVersion===5){const _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.will.properties=_)}if(t=this._parseString(),t===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=t,f("_parseConnect: packet.will.topic: %s",b.will.topic),i=this._parseBuffer(),i===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=i,f("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(m.username){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse username"));b.username=u,f("_parseConnect: packet.username: %s",b.username)}if(m.password){if(y=this._parseBuffer(),y===null)return this._emitError(new Error("Cannot parse password"));b.password=y}return this.settings=b,f("_parseConnect: complete"),b}_parseConnack(){f("_parseConnack");const t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(t.returnCode===-1||t.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(t.properties=i)}f("_parseConnack: complete")}_parsePublish(){f("_parsePublish");const t=this.packet;if(t.topic=this._parseString(),t.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(t.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(t.properties=i)}t.payload=this._list.slice(this._pos,t.length),f("_parsePublish: payload from buffer list: %o",t.payload)}}_parseSubscribe(){f("_parseSubscribe");const t=this.packet;let i,y,u,m,b,p,s;if(t.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(t.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(t.properties=_)}for(;this._pos<t.length;){if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=t.length)return this._emitError(new Error("Malformed Subscribe Payload"));y=this._parseByte(),u=y&a.SUBSCRIBE_OPTIONS_QOS_MASK,p=(y>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK)!=0,b=(y>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,m=y>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,s={topic:i,qos:u},this.settings.protocolVersion===5?(s.nl=p,s.rap=b,s.rh=m):this.settings.bridgeMode&&(s.rh=0,s.rap=!0,s.nl=!0),f("_parseSubscribe: push subscription `%s` to subscription",s),t.subscriptions.push(s)}}}_parseSuback(){f("_parseSuback");const t=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(t.properties=i)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){f("_parseUnsubscribe");const t=this.packet;if(t.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(t.properties=i)}for(;this._pos<t.length;){const i=this._parseString();if(i===null)return this._emitError(new Error("Cannot parse topic"));f("_parseUnsubscribe: push topic `%s` to unsubscriptions",i),t.unsubscriptions.push(i)}}}_parseUnsuback(){f("_parseUnsuback");const t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const i=this._parseProperties();for(Object.getOwnPropertyNames(i).length&&(t.properties=i),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){f("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const t=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(t.length>2?(t.reasonCode=this._parseByte(),f("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,t.length>3)){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(t.properties=i)}return!0}_parseDisconnect(){const t=this.packet;if(f("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?t.reasonCode=this._parseByte():t.reasonCode=0;const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(t.properties=i)}return f("_parseDisconnect result: true"),!0}_parseAuth(){f("_parseAuth");const t=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();const i=this._parseProperties();return Object.getOwnPropertyNames(i).length&&(t.properties=i),f("_parseAuth: result: true"),!0}_parseMessageId(){const t=this.packet;return t.messageId=this._parseNum(),t.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(f("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){const i=this._parseNum(),y=i+this._pos;if(i===-1||y>this._list.length||y>this.packet.length)return null;const u=this._list.toString("utf8",this._pos,y);return this._pos+=i,f("_parseString: result: %s",u),u}_parseStringPair(){return f("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const t=this._parseNum(),i=t+this._pos;if(t===-1||i>this._list.length||i>this.packet.length)return null;const y=this._list.slice(this._pos,i);return this._pos+=t,f("_parseBuffer: result: %o",y),y}_parseNum(){if(this._list.length-this._pos<2)return-1;const t=this._list.readUInt16BE(this._pos);return this._pos+=2,f("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const t=this._list.readUInt32BE(this._pos);return this._pos+=4,f("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){f("_parseVarByteNum");const i=4;let y=0,u=1,m=0,b=!1,p;const s=this._pos?this._pos:0;for(;y<i&&s+y<this._list.length;){if(p=this._list.readUInt8(s+y++),m+=u*(p&a.VARBYTEINT_MASK),u*=128,(p&a.VARBYTEINT_FIN_MASK)==0){b=!0;break}if(this._list.length<=y)break}return!b&&y===i&&this._list.length>=y&&this._emitError(new Error("Invalid variable byte integer")),s&&(this._pos+=y),b=b?t?{bytes:y,value:m}:m:!1,f("_parseVarByteNum: result: %o",b),b}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),f("_parseByte: result: %o",t),t}_parseByType(t){switch(f("_parseByType: type: %s",t),t){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){f("_parseProperties");const t=this._parseVarByteNum(),y=this._pos+t,u={};for(;this._pos<y;){const m=this._parseByte();if(!m)return this._emitError(new Error("Cannot parse property code type")),!1;const b=a.propertiesCodes[m];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){u[b]||(u[b]=Object.create(null));const p=this._parseByType(a.propertiesTypes[b]);if(u[b][p.name])if(Array.isArray(u[b][p.name]))u[b][p.name].push(p.value);else{const s=u[b][p.name];u[b][p.name]=[s],u[b][p.name].push(p.value)}else u[b][p.name]=p.value;continue}u[b]?Array.isArray(u[b])?u[b].push(this._parseByType(a.propertiesTypes[b])):(u[b]=[u[b]],u[b].push(this._parseByType(a.propertiesTypes[b]))):u[b]=this._parseByType(a.propertiesTypes[b])}return u}_newPacket(){return f("_newPacket"),this.packet&&(this._list.consume(this.packet.length),f("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),f("_newPacket: new packet"),this.packet=new l,this._pos=0,!0}_emitError(t){f("_emitError"),this.error=t,this.emit("error",t)}}h.exports=e},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(c,h,d){(function(o){(function(){const n=c("./constants"),l=o.allocUnsafe(0),a=o.from([0]),f=c("./numbers"),e=c("process-nextick-args").nextTick,r=c("debug")("mqtt-packet:writeToStream"),t=f.cache,i=f.generateNumber,y=f.generateCache,u=f.genBufVariableByteInt,m=f.generate4ByteBuffer;let b=N,p=!0;function s(H,F,Z){switch(r("generate called"),F.cork&&(F.cork(),e(_,F)),p&&(p=!1,y()),r("generate: packet.cmd: %s",H.cmd),H.cmd){case"connect":return T(H,F);case"connack":return I(H,F,Z);case"publish":return L(H,F,Z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return B(H,F,Z);case"subscribe":return O(H,F,Z);case"suback":return W(H,F,Z);case"unsubscribe":return v(H,F,Z);case"unsuback":return x(H,F,Z);case"pingreq":case"pingresp":return E(H,F);case"disconnect":return D(H,F,Z);case"auth":return V(H,F,Z);default:return F.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(s,"cacheNumbers",{get(){return b===N},set(H){H?((!t||Object.keys(t).length===0)&&(p=!0),b=N):(p=!1,b=G)}});function _(H){H.uncork()}function T(H,F,Z){const U=H||{},P=U.protocolId||"MQTT";let z=U.protocolVersion||4;const $=U.will;let X=U.clean;const C=U.keepalive||0,R=U.clientId||"",S=U.username,g=U.password,w=U.properties;X===void 0&&(X=!0);let k=0;if(!P||typeof P!="string"&&!o.isBuffer(P))return F.emit("error",new Error("Invalid protocolId")),!1;if(k+=P.length+2,z!==3&&z!==4&&z!==5)return F.emit("error",new Error("Invalid protocol version")),!1;if(k+=1,(typeof R=="string"||o.isBuffer(R))&&(R||z>=4)&&(R||X))k+=o.byteLength(R)+2;else{if(z<4)return F.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(X*1==0)return F.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof C!="number"||C<0||C>65535||C%1!=0)return F.emit("error",new Error("Invalid keepalive")),!1;if(k+=2,k+=1,z===5){var j=K(F,w);if(!j)return!1;k+=j.length}if($){if(typeof $!="object")return F.emit("error",new Error("Invalid will")),!1;if(!$.topic||typeof $.topic!="string")return F.emit("error",new Error("Invalid will topic")),!1;if(k+=o.byteLength($.topic)+2,k+=2,$.payload)if($.payload.length>=0)typeof $.payload=="string"?k+=o.byteLength($.payload):k+=$.payload.length;else return F.emit("error",new Error("Invalid will payload")),!1;var J={};if(z===5){if(J=K(F,$.properties),!J)return!1;k+=J.length}}let te=!1;if(S!=null)if(ie(S))te=!0,k+=o.byteLength(S)+2;else return F.emit("error",new Error("Invalid username")),!1;if(g!=null){if(!te)return F.emit("error",new Error("Username is required to use password")),!1;if(ie(g))k+=se(g)+2;else return F.emit("error",new Error("Invalid password")),!1}F.write(n.CONNECT_HEADER),Y(F,k),ne(F,P),U.bridgeMode&&(z+=128),F.write(z===131?n.VERSION131:z===132?n.VERSION132:z===4?n.VERSION4:z===5?n.VERSION5:n.VERSION3);let ae=0;return ae|=S!=null?n.USERNAME_MASK:0,ae|=g!=null?n.PASSWORD_MASK:0,ae|=$&&$.retain?n.WILL_RETAIN_MASK:0,ae|=$&&$.qos?$.qos<<n.WILL_QOS_SHIFT:0,ae|=$?n.WILL_FLAG_MASK:0,ae|=X?n.CLEAN_SESSION_MASK:0,F.write(o.from([ae])),b(F,C),z===5&&j.write(),ne(F,R),$&&(z===5&&J.write(),A(F,$.topic),ne(F,$.payload)),S!=null&&ne(F,S),g!=null&&ne(F,g),!0}function I(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=U===5?P.reasonCode:P.returnCode,$=P.properties;let X=2;if(typeof z!="number")return F.emit("error",new Error("Invalid return code")),!1;let C=null;if(U===5){if(C=K(F,$),!C)return!1;X+=C.length}return F.write(n.CONNACK_HEADER),Y(F,X),F.write(P.sessionPresent?n.SESSIONPRESENT_HEADER:a),F.write(o.from([z])),C!=null&&C.write(),!0}function L(H,F,Z){r("publish: packet: %o",H);const U=Z?Z.protocolVersion:4,P=H||{},z=P.qos||0,$=P.retain?n.RETAIN_MASK:0,X=P.topic,C=P.payload||l,R=P.messageId,S=P.properties;let g=0;if(typeof X=="string")g+=o.byteLength(X)+2;else if(o.isBuffer(X))g+=X.length+2;else return F.emit("error",new Error("Invalid topic")),!1;if(o.isBuffer(C)?g+=C.length:g+=o.byteLength(C),z&&typeof R!="number")return F.emit("error",new Error("Invalid messageId")),!1;z&&(g+=2);let w=null;if(U===5){if(w=K(F,S),!w)return!1;g+=w.length}return F.write(n.PUBLISH_HEADER[z][P.dup?1:0][$?1:0]),Y(F,g),b(F,se(X)),F.write(X),z>0&&b(F,R),w!=null&&w.write(),r("publish: payload: %o",C),F.write(C)}function B(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=P.cmd||"puback",$=P.messageId,X=P.dup&&z==="pubrel"?n.DUP_MASK:0;let C=0;const R=P.reasonCode,S=P.properties;let g=U===5?3:2;if(z==="pubrel"&&(C=1),typeof $!="number")return F.emit("error",new Error("Invalid messageId")),!1;let w=null;if(U===5&&typeof S=="object"){if(w=Q(F,S,Z,g),!w)return!1;g+=w.length}return F.write(n.ACKS[z][C][X][0]),Y(F,g),b(F,$),U===5&&F.write(o.from([R])),w!==null&&w.write(),!0}function O(H,F,Z){r("subscribe: packet: ");const U=Z?Z.protocolVersion:4,P=H||{},z=P.dup?n.DUP_MASK:0,$=P.messageId,X=P.subscriptions,C=P.properties;let R=0;if(typeof $!="number")return F.emit("error",new Error("Invalid messageId")),!1;R+=2;let S=null;if(U===5){if(S=K(F,C),!S)return!1;R+=S.length}if(typeof X=="object"&&X.length)for(let w=0;w<X.length;w+=1){const k=X[w].topic,j=X[w].qos;if(typeof k!="string")return F.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof j!="number")return F.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(U===5){if(typeof(X[w].nl||!1)!="boolean")return F.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(X[w].rap||!1)!="boolean")return F.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=X[w].rh||0;if(typeof ae!="number"||ae>2)return F.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}R+=o.byteLength(k)+2+1}else return F.emit("error",new Error("Invalid subscriptions")),!1;r("subscribe: writing to stream: %o",n.SUBSCRIBE_HEADER),F.write(n.SUBSCRIBE_HEADER[1][z?1:0][0]),Y(F,R),b(F,$),S!==null&&S.write();let g=!0;for(const w of X){const k=w.topic,j=w.qos,J=+w.nl,te=+w.rap,ae=w.rh;let fe;A(F,k),fe=n.SUBSCRIBE_OPTIONS_QOS[j],U===5&&(fe|=J?n.SUBSCRIBE_OPTIONS_NL:0,fe|=te?n.SUBSCRIBE_OPTIONS_RAP:0,fe|=ae?n.SUBSCRIBE_OPTIONS_RH[ae]:0),g=F.write(o.from([fe]))}return g}function W(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=P.messageId,$=P.granted,X=P.properties;let C=0;if(typeof z!="number")return F.emit("error",new Error("Invalid messageId")),!1;if(C+=2,typeof $=="object"&&$.length)for(let S=0;S<$.length;S+=1){if(typeof $[S]!="number")return F.emit("error",new Error("Invalid qos vector")),!1;C+=1}else return F.emit("error",new Error("Invalid qos vector")),!1;let R=null;if(U===5){if(R=Q(F,X,Z,C),!R)return!1;C+=R.length}return F.write(n.SUBACK_HEADER),Y(F,C),b(F,z),R!==null&&R.write(),F.write(o.from($))}function v(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=P.messageId,$=P.dup?n.DUP_MASK:0,X=P.unsubscriptions,C=P.properties;let R=0;if(typeof z!="number")return F.emit("error",new Error("Invalid messageId")),!1;if(R+=2,typeof X=="object"&&X.length)for(let w=0;w<X.length;w+=1){if(typeof X[w]!="string")return F.emit("error",new Error("Invalid unsubscriptions")),!1;R+=o.byteLength(X[w])+2}else return F.emit("error",new Error("Invalid unsubscriptions")),!1;let S=null;if(U===5){if(S=K(F,C),!S)return!1;R+=S.length}F.write(n.UNSUBSCRIBE_HEADER[1][$?1:0][0]),Y(F,R),b(F,z),S!==null&&S.write();let g=!0;for(let w=0;w<X.length;w++)g=A(F,X[w]);return g}function x(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=P.messageId,$=P.dup?n.DUP_MASK:0,X=P.granted,C=P.properties,R=P.cmd,S=0;let g=2;if(typeof z!="number")return F.emit("error",new Error("Invalid messageId")),!1;if(U===5)if(typeof X=="object"&&X.length)for(let k=0;k<X.length;k+=1){if(typeof X[k]!="number")return F.emit("error",new Error("Invalid qos vector")),!1;g+=1}else return F.emit("error",new Error("Invalid qos vector")),!1;let w=null;if(U===5){if(w=Q(F,C,Z,g),!w)return!1;g+=w.length}return F.write(n.ACKS[R][S][$][0]),Y(F,g),b(F,z),w!==null&&w.write(),U===5&&F.write(o.from(X)),!0}function E(H,F,Z){return F.write(n.EMPTY[H.cmd])}function D(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=P.reasonCode,$=P.properties;let X=U===5?1:0,C=null;if(U===5){if(C=Q(F,$,Z,X),!C)return!1;X+=C.length}return F.write(o.from([n.codes.disconnect<<4])),Y(F,X),U===5&&F.write(o.from([z])),C!==null&&C.write(),!0}function V(H,F,Z){const U=Z?Z.protocolVersion:4,P=H||{},z=P.reasonCode,$=P.properties;let X=U===5?1:0;U!==5&&F.emit("error",new Error("Invalid mqtt version for auth packet"));const C=Q(F,$,Z,X);return C?(X+=C.length,F.write(o.from([n.codes.auth<<4])),Y(F,X),F.write(o.from([z])),C!==null&&C.write(),!0):!1}const q={};function Y(H,F){if(F>n.VARBYTEINT_MAX)return H.emit("error",new Error(`Invalid variable byte integer: ${F}`)),!1;let Z=q[F];return Z||(Z=u(F),F<16384&&(q[F]=Z)),r("writeVarByteInt: writing to stream: %o",Z),H.write(Z)}function A(H,F){const Z=o.byteLength(F);return b(H,Z),r("writeString: %s",F),H.write(F,"utf8")}function M(H,F,Z){A(H,F),A(H,Z)}function N(H,F){return r("writeNumberCached: number: %d",F),r("writeNumberCached: %o",t[F]),H.write(t[F])}function G(H,F){const Z=i(F);return r("writeNumberGenerated: %o",Z),H.write(Z)}function oe(H,F){const Z=m(F);return r("write4ByteNumber: %o",Z),H.write(Z)}function ne(H,F){typeof F=="string"?A(H,F):F?(b(H,F.length),H.write(F)):b(H,0)}function K(H,F){if(typeof F!="object"||F.length!=null)return{length:1,write(){ee(H,{},0)}};let Z=0;function U(z,$){const X=n.propertiesTypes[z];let C=0;switch(X){case"byte":{if(typeof $!="boolean")return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+1;break}case"int8":{if(typeof $!="number"||$<0||$>255)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+1;break}case"binary":{if($&&$===null)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+o.byteLength($)+2;break}case"int16":{if(typeof $!="number"||$<0||$>65535)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+2;break}case"int32":{if(typeof $!="number"||$<0||$>4294967295)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+4;break}case"var":{if(typeof $!="number"||$<0||$>268435455)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+o.byteLength(u($));break}case"string":{if(typeof $!="string")return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=1+2+o.byteLength($.toString());break}case"pair":{if(typeof $!="object")return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;C+=Object.getOwnPropertyNames($).reduce((R,S)=>{const g=$[S];return Array.isArray(g)?R+=g.reduce((w,k)=>(w+=1+2+o.byteLength(S.toString())+2+o.byteLength(k.toString()),w),0):R+=1+2+o.byteLength(S.toString())+2+o.byteLength($[S].toString()),R},0);break}default:return H.emit("error",new Error(`Invalid property ${z}: ${$}`)),!1}return C}if(F)for(const z in F){let $=0,X=0;const C=F[z];if(Array.isArray(C))for(let R=0;R<C.length;R++){if(X=U(z,C[R]),!X)return!1;$+=X}else{if(X=U(z,C),!X)return!1;$=X}if(!$)return!1;Z+=$}return{length:o.byteLength(u(Z))+Z,write(){ee(H,F,Z)}}}function Q(H,F,Z,U){const P=["reasonString","userProperties"],z=Z&&Z.properties&&Z.properties.maximumPacketSize?Z.properties.maximumPacketSize:0;let $=K(H,F);if(z)for(;U+$.length>z;){const X=P.shift();if(X&&F[X])delete F[X],$=K(H,F);else return!1}return $}function re(H,F,Z){switch(n.propertiesTypes[F]){case"byte":{H.write(o.from([n.properties[F]])),H.write(o.from([+Z]));break}case"int8":{H.write(o.from([n.properties[F]])),H.write(o.from([Z]));break}case"binary":{H.write(o.from([n.properties[F]])),ne(H,Z);break}case"int16":{H.write(o.from([n.properties[F]])),b(H,Z);break}case"int32":{H.write(o.from([n.properties[F]])),oe(H,Z);break}case"var":{H.write(o.from([n.properties[F]])),Y(H,Z);break}case"string":{H.write(o.from([n.properties[F]])),A(H,Z);break}case"pair":{Object.getOwnPropertyNames(Z).forEach(P=>{const z=Z[P];Array.isArray(z)?z.forEach($=>{H.write(o.from([n.properties[F]])),M(H,P.toString(),$.toString())}):(H.write(o.from([n.properties[F]])),M(H,P.toString(),z.toString()))});break}default:return H.emit("error",new Error(`Invalid property ${F} value: ${Z}`)),!1}}function ee(H,F,Z){Y(H,Z);for(const U in F)if(Object.prototype.hasOwnProperty.call(F,U)&&F[U]!==null){const P=F[U];if(Array.isArray(P))for(let z=0;z<P.length;z++)re(H,U,P[z]);else re(H,U,P)}}function se(H){return H?H instanceof o?H.length:o.byteLength(H):0}function ie(H){return typeof H=="string"||H instanceof o}h.exports=s}).call(this)}).call(this,c("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(c,h,d){var o=1e3,n=o*60,l=n*60,a=l*24,f=a*7,e=a*365.25;h.exports=function(u,m){m=m||{};var b=typeof u;if(b==="string"&&u.length>0)return r(u);if(b==="number"&&isFinite(u))return m.long?i(u):t(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function r(u){if(u=String(u),!(u.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(!!m){var b=parseFloat(m[1]),p=(m[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return b*e;case"weeks":case"week":case"w":return b*f;case"days":case"day":case"d":return b*a;case"hours":case"hour":case"hrs":case"hr":case"h":return b*l;case"minutes":case"minute":case"mins":case"min":case"m":return b*n;case"seconds":case"second":case"secs":case"sec":case"s":return b*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function t(u){var m=Math.abs(u);return m>=a?Math.round(u/a)+"d":m>=l?Math.round(u/l)+"h":m>=n?Math.round(u/n)+"m":m>=o?Math.round(u/o)+"s":u+"ms"}function i(u){var m=Math.abs(u);return m>=a?y(u,m,a,"day"):m>=l?y(u,m,l,"hour"):m>=n?y(u,m,n,"minute"):m>=o?y(u,m,o,"second"):u+" ms"}function y(u,m,b,p){var s=m>=b*1.5;return Math.round(u/b)+" "+p+(s?"s":"")}},{}],46:[function(c,h,d){const o=c("./lib/number-allocator.js");h.exports.NumberAllocator=o},{"./lib/number-allocator.js":47}],47:[function(c,h,d){const o=c("js-sdsl").Set,n=c("debug")("number-allocator:trace"),l=c("debug")("number-allocator:error");function a(e,r){this.low=e,this.high=r}a.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},a.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0};function f(e,r){if(!(this instanceof f))return new f(e,r);this.min=e,this.max=r,this.ss=new o([],(t,i)=>t.compare(i)),n("Create"),this.clear()}f.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},f.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;const e=this.ss.front(),r=e.low;return r+1<=e.high?++e.low:this.ss.eraseElementByPos(0),n("alloc():"+r),r},f.prototype.use=function(e){const r=new a(e,e),t=this.ss.lowerBound(r);if(t){if(t.equals(r))return this.ss.eraseElementByValue(t),n("use():"+e),!0;if(t.low>e)return!1;if(t.low===e)return++t.low,n("use():"+e),!0;if(t.high===e)return--t.high,n("use():"+e),!0;const i=t.low;return t.low=e+1,this.ss.insert(new a(i,e-1)),n("use():"+e),!0}return n("use():failed"),!1},f.prototype.free=function(e){if(e<this.min||e>this.max){l("free():"+e+" is out of range");return}const r=new a(e,e),t=this.ss.lowerBound(r);if(t){if(t.low<=e&&e<=t.high){l("free():"+e+" has already been vacant");return}if(t===this.ss.front())e+1===t.low?--t.low:this.ss.insert(r);else{const i=this.ss.reverseLowerBound(r);i.high+1===e?e+1===t.low?(this.ss.eraseElementByValue(i),t.low=i.low):i.high=e:e+1===t.low?t.low=e:this.ss.insert(r)}}else{if(t===this.ss.front()){this.ss.insert(r);return}const i=this.ss.reverseLowerBound(r);i.high+1===e?i.high=e:this.ss.insert(r)}n("free():"+e)},f.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},f.prototype.intervalCount=function(){return this.ss.size()},f.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},h.exports=f},{debug:18,"js-sdsl":36}],48:[function(c,h,d){var o=c("wrappy");h.exports=o(n),h.exports.strict=o(l),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return l(this)},configurable:!0})});function n(a){var f=function(){return f.called?f.value:(f.called=!0,f.value=a.apply(this,arguments))};return f.called=!1,f}function l(a){var f=function(){if(f.called)throw new Error(f.onceError);return f.called=!0,f.value=a.apply(this,arguments)},e=a.name||"Function wrapped with `once`";return f.onceError=e+" shouldn't be called more than once",f.called=!1,f}},{wrappy:79}],49:[function(c,h,d){(function(o){(function(){typeof o=="undefined"||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?h.exports={nextTick:n}:h.exports=o;function n(l,a,f,e){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,t,i;switch(r){case 0:case 1:return o.nextTick(l);case 2:return o.nextTick(function(){l.call(null,a)});case 3:return o.nextTick(function(){l.call(null,a,f)});case 4:return o.nextTick(function(){l.call(null,a,f,e)});default:for(t=new Array(r-1),i=0;i<t.length;)t[i++]=arguments[i];return o.nextTick(function(){l.apply(null,t)})}}}).call(this)}).call(this,c("_process"))},{_process:50}],50:[function(c,h,d){var o=h.exports={},n,l;function a(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=a}catch{n=a}try{typeof clearTimeout=="function"?l=clearTimeout:l=f}catch{l=f}})();function e(_){if(n===setTimeout)return setTimeout(_,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(_,0);try{return n(_,0)}catch{try{return n.call(null,_,0)}catch{return n.call(this,_,0)}}}function r(_){if(l===clearTimeout)return clearTimeout(_);if((l===f||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(_);try{return l(_)}catch{try{return l.call(null,_)}catch{return l.call(this,_)}}}var t=[],i=!1,y,u=-1;function m(){!i||!y||(i=!1,y.length?t=y.concat(t):u=-1,t.length&&b())}function b(){if(!i){var _=e(m);i=!0;for(var T=t.length;T;){for(y=t,t=[];++u<T;)y&&y[u].run();u=-1,T=t.length}y=null,i=!1,r(_)}}o.nextTick=function(_){var T=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)T[I-1]=arguments[I];t.push(new p(_,T)),t.length===1&&!i&&e(b)};function p(_,T){this.fun=_,this.array=T}p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function s(){}o.on=s,o.addListener=s,o.once=s,o.off=s,o.removeListener=s,o.removeAllListeners=s,o.emit=s,o.prependListener=s,o.prependOnceListener=s,o.listeners=function(_){return[]},o.binding=function(_){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(_){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],51:[function(c,h,d){(function(o){(function(){(function(n){var l=typeof d=="object"&&d&&!d.nodeType&&d,a=typeof h=="object"&&h&&!h.nodeType&&h,f=typeof o=="object"&&o;(f.global===f||f.window===f||f.self===f)&&(n=f);var e,r=2147483647,t=36,i=1,y=26,u=38,m=700,b=72,p=128,s="-",_=/^xn--/,T=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=t-i,O=Math.floor,W=String.fromCharCode,v;function x(K){throw new RangeError(L[K])}function E(K,Q){for(var re=K.length,ee=[];re--;)ee[re]=Q(K[re]);return ee}function D(K,Q){var re=K.split("@"),ee="";re.length>1&&(ee=re[0]+"@",K=re[1]),K=K.replace(I,".");var se=K.split("."),ie=E(se,Q).join(".");return ee+ie}function V(K){for(var Q=[],re=0,ee=K.length,se,ie;re<ee;)se=K.charCodeAt(re++),se>=55296&&se<=56319&&re<ee?(ie=K.charCodeAt(re++),(ie&64512)==56320?Q.push(((se&1023)<<10)+(ie&1023)+65536):(Q.push(se),re--)):Q.push(se);return Q}function q(K){return E(K,function(Q){var re="";return Q>65535&&(Q-=65536,re+=W(Q>>>10&1023|55296),Q=56320|Q&1023),re+=W(Q),re}).join("")}function Y(K){return K-48<10?K-22:K-65<26?K-65:K-97<26?K-97:t}function A(K,Q){return K+22+75*(K<26)-((Q!=0)<<5)}function M(K,Q,re){var ee=0;for(K=re?O(K/m):K>>1,K+=O(K/Q);K>B*y>>1;ee+=t)K=O(K/B);return O(ee+(B+1)*K/(K+u))}function N(K){var Q=[],re=K.length,ee,se=0,ie=p,H=b,F,Z,U,P,z,$,X,C,R;for(F=K.lastIndexOf(s),F<0&&(F=0),Z=0;Z<F;++Z)K.charCodeAt(Z)>=128&&x("not-basic"),Q.push(K.charCodeAt(Z));for(U=F>0?F+1:0;U<re;){for(P=se,z=1,$=t;U>=re&&x("invalid-input"),X=Y(K.charCodeAt(U++)),(X>=t||X>O((r-se)/z))&&x("overflow"),se+=X*z,C=$<=H?i:$>=H+y?y:$-H,!(X<C);$+=t)R=t-C,z>O(r/R)&&x("overflow"),z*=R;ee=Q.length+1,H=M(se-P,ee,P==0),O(se/ee)>r-ie&&x("overflow"),ie+=O(se/ee),se%=ee,Q.splice(se++,0,ie)}return q(Q)}function G(K){var Q,re,ee,se,ie,H,F,Z,U,P,z,$=[],X,C,R,S;for(K=V(K),X=K.length,Q=p,re=0,ie=b,H=0;H<X;++H)z=K[H],z<128&&$.push(W(z));for(ee=se=$.length,se&&$.push(s);ee<X;){for(F=r,H=0;H<X;++H)z=K[H],z>=Q&&z<F&&(F=z);for(C=ee+1,F-Q>O((r-re)/C)&&x("overflow"),re+=(F-Q)*C,Q=F,H=0;H<X;++H)if(z=K[H],z<Q&&++re>r&&x("overflow"),z==Q){for(Z=re,U=t;P=U<=ie?i:U>=ie+y?y:U-ie,!(Z<P);U+=t)S=Z-P,R=t-P,$.push(W(A(P+S%R,0))),Z=O(S/R);$.push(W(A(Z,0))),ie=M(re,C,ee==se),re=0,++ee}++re,++Q}return $.join("")}function oe(K){return D(K,function(Q){return _.test(Q)?N(Q.slice(4).toLowerCase()):Q})}function ne(K){return D(K,function(Q){return T.test(Q)?"xn--"+G(Q):Q})}if(e={version:"1.4.1",ucs2:{decode:V,encode:q},decode:N,encode:G,toASCII:ne,toUnicode:oe},l&&a)if(h.exports==l)a.exports=e;else for(v in e)e.hasOwnProperty(v)&&(l[v]=e[v]);else n.punycode=e})(this)}).call(this)}).call(this,typeof we!="undefined"?we:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],52:[function(c,h,d){function o(l,a){return Object.prototype.hasOwnProperty.call(l,a)}h.exports=function(l,a,f,e){a=a||"&",f=f||"=";var r={};if(typeof l!="string"||l.length===0)return r;var t=/\+/g;l=l.split(a);var i=1e3;e&&typeof e.maxKeys=="number"&&(i=e.maxKeys);var y=l.length;i>0&&y>i&&(y=i);for(var u=0;u<y;++u){var m=l[u].replace(t,"%20"),b=m.indexOf(f),p,s,_,T;b>=0?(p=m.substr(0,b),s=m.substr(b+1)):(p=m,s=""),_=decodeURIComponent(p),T=decodeURIComponent(s),o(r,_)?n(r[_])?r[_].push(T):r[_]=[r[_],T]:r[_]=T}return r};var n=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"}},{}],53:[function(c,h,d){var o=function(f){switch(typeof f){case"string":return f;case"boolean":return f?"true":"false";case"number":return isFinite(f)?f:"";default:return""}};h.exports=function(f,e,r,t){return e=e||"&",r=r||"=",f===null&&(f=void 0),typeof f=="object"?l(a(f),function(i){var y=encodeURIComponent(o(i))+r;return n(f[i])?l(f[i],function(u){return y+encodeURIComponent(o(u))}).join(e):y+encodeURIComponent(o(f[i]))}).join(e):t?encodeURIComponent(o(t))+r+encodeURIComponent(o(f)):""};var n=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function l(f,e){if(f.map)return f.map(e);for(var r=[],t=0;t<f.length;t++)r.push(e(f[t],t));return r}var a=Object.keys||function(f){var e=[];for(var r in f)Object.prototype.hasOwnProperty.call(f,r)&&e.push(r);return e}},{}],54:[function(c,h,d){d.decode=d.parse=c("./decode"),d.encode=d.stringify=c("./encode")},{"./decode":52,"./encode":53}],55:[function(c,h,d){function o(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}var n={};function l(t,i,y){y||(y=Error);function u(b,p,s){return typeof i=="string"?i:i(b,p,s)}var m=function(b){o(p,b);function p(s,_,T){return b.call(this,u(s,_,T))||this}return p}(y);m.prototype.name=y.name,m.prototype.code=t,n[t]=m}function a(t,i){if(Array.isArray(t)){var y=t.length;return t=t.map(function(u){return String(u)}),y>2?"one of ".concat(i," ").concat(t.slice(0,y-1).join(", "),", or ")+t[y-1]:y===2?"one of ".concat(i," ").concat(t[0]," or ").concat(t[1]):"of ".concat(i," ").concat(t[0])}else return"of ".concat(i," ").concat(String(t))}function f(t,i,y){return t.substr(!y||y<0?0:+y,i.length)===i}function e(t,i,y){return(y===void 0||y>t.length)&&(y=t.length),t.substring(y-i.length,y)===i}function r(t,i,y){return typeof y!="number"&&(y=0),y+i.length>t.length?!1:t.indexOf(i,y)!==-1}l("ERR_INVALID_OPT_VALUE",function(t,i){return'The value "'+i+'" is invalid for option "'+t+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(t,i,y){var u;typeof i=="string"&&f(i,"not ")?(u="must not be",i=i.replace(/^not /,"")):u="must be";var m;if(e(t," argument"))m="The ".concat(t," ").concat(u," ").concat(a(i,"type"));else{var b=r(t,".")?"property":"argument";m='The "'.concat(t,'" ').concat(b," ").concat(u," ").concat(a(i,"type"))}return m+=". Received type ".concat(typeof y),m},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),h.exports.codes=n},{}],56:[function(c,h,d){(function(o){(function(){var n=Object.keys||function(u){var m=[];for(var b in u)m.push(b);return m};h.exports=t;var l=c("./_stream_readable"),a=c("./_stream_writable");c("inherits")(t,l);for(var f=n(a.prototype),e=0;e<f.length;e++){var r=f[e];t.prototype[r]||(t.prototype[r]=a.prototype[r])}function t(u){if(!(this instanceof t))return new t(u);l.call(this,u),a.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function i(){this._writableState.ended||o.nextTick(y,this)}function y(u){u.end()}Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}).call(this)}).call(this,c("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(c,h,d){h.exports=n;var o=c("./_stream_transform");c("inherits")(n,o);function n(l){if(!(this instanceof n))return new n(l);o.call(this,l)}n.prototype._transform=function(l,a,f){f(null,l)}},{"./_stream_transform":59,inherits:24}],58:[function(c,h,d){(function(o,n){(function(){h.exports=q;var l;q.ReadableState=V,c("events").EventEmitter;var a=function(R,S){return R.listeners(S).length},f=c("./internal/streams/stream"),e=c("buffer").Buffer,r=n.Uint8Array||function(){};function t(C){return e.from(C)}function i(C){return e.isBuffer(C)||C instanceof r}var y=c("util"),u;y&&y.debuglog?u=y.debuglog("stream"):u=function(){};var m=c("./internal/streams/buffer_list"),b=c("./internal/streams/destroy"),p=c("./internal/streams/state"),s=p.getHighWaterMark,_=c("../errors").codes,T=_.ERR_INVALID_ARG_TYPE,I=_.ERR_STREAM_PUSH_AFTER_EOF,L=_.ERR_METHOD_NOT_IMPLEMENTED,B=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,W,v;c("inherits")(q,f);var x=b.errorOrDestroy,E=["error","close","destroy","pause","resume"];function D(C,R,S){if(typeof C.prependListener=="function")return C.prependListener(R,S);!C._events||!C._events[R]?C.on(R,S):Array.isArray(C._events[R])?C._events[R].unshift(S):C._events[R]=[S,C._events[R]]}function V(C,R,S){l=l||c("./_stream_duplex"),C=C||{},typeof S!="boolean"&&(S=R instanceof l),this.objectMode=!!C.objectMode,S&&(this.objectMode=this.objectMode||!!C.readableObjectMode),this.highWaterMark=s(this,C,"readableHighWaterMark",S),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.destroyed=!1,this.defaultEncoding=C.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,C.encoding&&(O||(O=c("string_decoder/").StringDecoder),this.decoder=new O(C.encoding),this.encoding=C.encoding)}function q(C){if(l=l||c("./_stream_duplex"),!(this instanceof q))return new q(C);var R=this instanceof l;this._readableState=new V(C,this,R),this.readable=!0,C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy)),f.call(this)}Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(R){!this._readableState||(this._readableState.destroyed=R)}}),q.prototype.destroy=b.destroy,q.prototype._undestroy=b.undestroy,q.prototype._destroy=function(C,R){R(C)},q.prototype.push=function(C,R){var S=this._readableState,g;return S.objectMode?g=!0:typeof C=="string"&&(R=R||S.defaultEncoding,R!==S.encoding&&(C=e.from(C,R),R=""),g=!0),Y(this,C,R,!1,g)},q.prototype.unshift=function(C){return Y(this,C,null,!0,!1)};function Y(C,R,S,g,w){u("readableAddChunk",R);var k=C._readableState;if(R===null)k.reading=!1,ne(C,k);else{var j;if(w||(j=M(k,R)),j)x(C,j);else if(k.objectMode||R&&R.length>0)if(typeof R!="string"&&!k.objectMode&&Object.getPrototypeOf(R)!==e.prototype&&(R=t(R)),g)k.endEmitted?x(C,new B):A(C,k,R,!0);else if(k.ended)x(C,new I);else{if(k.destroyed)return!1;k.reading=!1,k.decoder&&!S?(R=k.decoder.write(R),k.objectMode||R.length!==0?A(C,k,R,!1):re(C,k)):A(C,k,R,!1)}else g||(k.reading=!1,re(C,k))}return!k.ended&&(k.length<k.highWaterMark||k.length===0)}function A(C,R,S,g){R.flowing&&R.length===0&&!R.sync?(R.awaitDrain=0,C.emit("data",S)):(R.length+=R.objectMode?1:S.length,g?R.buffer.unshift(S):R.buffer.push(S),R.needReadable&&K(C)),re(C,R)}function M(C,R){var S;return!i(R)&&typeof R!="string"&&R!==void 0&&!C.objectMode&&(S=new T("chunk",["string","Buffer","Uint8Array"],R)),S}q.prototype.isPaused=function(){return this._readableState.flowing===!1},q.prototype.setEncoding=function(C){O||(O=c("string_decoder/").StringDecoder);var R=new O(C);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;for(var S=this._readableState.buffer.head,g="";S!==null;)g+=R.write(S.data),S=S.next;return this._readableState.buffer.clear(),g!==""&&this._readableState.buffer.push(g),this._readableState.length=g.length,this};var N=1073741824;function G(C){return C>=N?C=N:(C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++),C}function oe(C,R){return C<=0||R.length===0&&R.ended?0:R.objectMode?1:C!==C?R.flowing&&R.length?R.buffer.head.data.length:R.length:(C>R.highWaterMark&&(R.highWaterMark=G(C)),C<=R.length?C:R.ended?R.length:(R.needReadable=!0,0))}q.prototype.read=function(C){u("read",C),C=parseInt(C,10);var R=this._readableState,S=C;if(C!==0&&(R.emittedReadable=!1),C===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return u("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?z(this):K(this),null;if(C=oe(C,R),C===0&&R.ended)return R.length===0&&z(this),null;var g=R.needReadable;u("need readable",g),(R.length===0||R.length-C<R.highWaterMark)&&(g=!0,u("length less than watermark",g)),R.ended||R.reading?(g=!1,u("reading or ended",g)):g&&(u("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(C=oe(S,R)));var w;return C>0?w=P(C,R):w=null,w===null?(R.needReadable=R.length<=R.highWaterMark,C=0):(R.length-=C,R.awaitDrain=0),R.length===0&&(R.ended||(R.needReadable=!0),S!==C&&R.ended&&z(this)),w!==null&&this.emit("data",w),w};function ne(C,R){if(u("onEofChunk"),!R.ended){if(R.decoder){var S=R.decoder.end();S&&S.length&&(R.buffer.push(S),R.length+=R.objectMode?1:S.length)}R.ended=!0,R.sync?K(C):(R.needReadable=!1,R.emittedReadable||(R.emittedReadable=!0,Q(C)))}}function K(C){var R=C._readableState;u("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(u("emitReadable",R.flowing),R.emittedReadable=!0,o.nextTick(Q,C))}function Q(C){var R=C._readableState;u("emitReadable_",R.destroyed,R.length,R.ended),!R.destroyed&&(R.length||R.ended)&&(C.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,U(C)}function re(C,R){R.readingMore||(R.readingMore=!0,o.nextTick(ee,C,R))}function ee(C,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){var S=R.length;if(u("maybeReadMore read 0"),C.read(0),S===R.length)break}R.readingMore=!1}q.prototype._read=function(C){x(this,new L("_read()"))},q.prototype.pipe=function(C,R){var S=this,g=this._readableState;switch(g.pipesCount){case 0:g.pipes=C;break;case 1:g.pipes=[g.pipes,C];break;default:g.pipes.push(C);break}g.pipesCount+=1,u("pipe count=%d opts=%j",g.pipesCount,R);var w=(!R||R.end!==!1)&&C!==o.stdout&&C!==o.stderr,k=w?J:_e;g.endEmitted?o.nextTick(k):S.once("end",k),C.on("unpipe",j);function j(be,Te){u("onunpipe"),be===S&&Te&&Te.hasUnpiped===!1&&(Te.hasUnpiped=!0,fe())}function J(){u("onend"),C.end()}var te=se(S);C.on("drain",te);var ae=!1;function fe(){u("cleanup"),C.removeListener("close",ce),C.removeListener("finish",me),C.removeListener("drain",te),C.removeListener("error",he),C.removeListener("unpipe",j),S.removeListener("end",J),S.removeListener("end",_e),S.removeListener("data",ue),ae=!0,g.awaitDrain&&(!C._writableState||C._writableState.needDrain)&&te()}S.on("data",ue);function ue(be){u("ondata");var Te=C.write(be);u("dest.write",Te),Te===!1&&((g.pipesCount===1&&g.pipes===C||g.pipesCount>1&&X(g.pipes,C)!==-1)&&!ae&&(u("false write response, pause",g.awaitDrain),g.awaitDrain++),S.pause())}function he(be){u("onerror",be),_e(),C.removeListener("error",he),a(C,"error")===0&&x(C,be)}D(C,"error",he);function ce(){C.removeListener("finish",me),_e()}C.once("close",ce);function me(){u("onfinish"),C.removeListener("close",ce),_e()}C.once("finish",me);function _e(){u("unpipe"),S.unpipe(C)}return C.emit("pipe",S),g.flowing||(u("pipe resume"),S.resume()),C};function se(C){return function(){var S=C._readableState;u("pipeOnDrain",S.awaitDrain),S.awaitDrain&&S.awaitDrain--,S.awaitDrain===0&&a(C,"data")&&(S.flowing=!0,U(C))}}q.prototype.unpipe=function(C){var R=this._readableState,S={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return C&&C!==R.pipes?this:(C||(C=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,C&&C.emit("unpipe",this,S),this);if(!C){var g=R.pipes,w=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var k=0;k<w;k++)g[k].emit("unpipe",this,{hasUnpiped:!1});return this}var j=X(R.pipes,C);return j===-1?this:(R.pipes.splice(j,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),C.emit("unpipe",this,S),this)},q.prototype.on=function(C,R){var S=f.prototype.on.call(this,C,R),g=this._readableState;return C==="data"?(g.readableListening=this.listenerCount("readable")>0,g.flowing!==!1&&this.resume()):C==="readable"&&!g.endEmitted&&!g.readableListening&&(g.readableListening=g.needReadable=!0,g.flowing=!1,g.emittedReadable=!1,u("on readable",g.length,g.reading),g.length?K(this):g.reading||o.nextTick(H,this)),S},q.prototype.addListener=q.prototype.on,q.prototype.removeListener=function(C,R){var S=f.prototype.removeListener.call(this,C,R);return C==="readable"&&o.nextTick(ie,this),S},q.prototype.removeAllListeners=function(C){var R=f.prototype.removeAllListeners.apply(this,arguments);return(C==="readable"||C===void 0)&&o.nextTick(ie,this),R};function ie(C){var R=C._readableState;R.readableListening=C.listenerCount("readable")>0,R.resumeScheduled&&!R.paused?R.flowing=!0:C.listenerCount("data")>0&&C.resume()}function H(C){u("readable nexttick read 0"),C.read(0)}q.prototype.resume=function(){var C=this._readableState;return C.flowing||(u("resume"),C.flowing=!C.readableListening,F(this,C)),C.paused=!1,this};function F(C,R){R.resumeScheduled||(R.resumeScheduled=!0,o.nextTick(Z,C,R))}function Z(C,R){u("resume",R.reading),R.reading||C.read(0),R.resumeScheduled=!1,C.emit("resume"),U(C),R.flowing&&!R.reading&&C.read(0)}q.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(C){var R=C._readableState;for(u("flow",R.flowing);R.flowing&&C.read()!==null;);}q.prototype.wrap=function(C){var R=this,S=this._readableState,g=!1;C.on("end",function(){if(u("wrapped end"),S.decoder&&!S.ended){var j=S.decoder.end();j&&j.length&&R.push(j)}R.push(null)}),C.on("data",function(j){if(u("wrapped data"),S.decoder&&(j=S.decoder.write(j)),!(S.objectMode&&j==null)&&!(!S.objectMode&&(!j||!j.length))){var J=R.push(j);J||(g=!0,C.pause())}});for(var w in C)this[w]===void 0&&typeof C[w]=="function"&&(this[w]=function(J){return function(){return C[J].apply(C,arguments)}}(w));for(var k=0;k<E.length;k++)C.on(E[k],this.emit.bind(this,E[k]));return this._read=function(j){u("wrapped _read",j),g&&(g=!1,C.resume())},this},typeof Symbol=="function"&&(q.prototype[Symbol.asyncIterator]=function(){return W===void 0&&(W=c("./internal/streams/async_iterator")),W(this)}),Object.defineProperty(q.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(q.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(q.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),q._fromList=P,Object.defineProperty(q.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function P(C,R){if(R.length===0)return null;var S;return R.objectMode?S=R.buffer.shift():!C||C>=R.length?(R.decoder?S=R.buffer.join(""):R.buffer.length===1?S=R.buffer.first():S=R.buffer.concat(R.length),R.buffer.clear()):S=R.buffer.consume(C,R.decoder),S}function z(C){var R=C._readableState;u("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,o.nextTick($,R,C))}function $(C,R){if(u("endReadableNT",C.endEmitted,C.length),!C.endEmitted&&C.length===0&&(C.endEmitted=!0,R.readable=!1,R.emit("end"),C.autoDestroy)){var S=R._writableState;(!S||S.autoDestroy&&S.finished)&&R.destroy()}}typeof Symbol=="function"&&(q.from=function(C,R){return v===void 0&&(v=c("./internal/streams/from")),v(q,C,R)});function X(C,R){for(var S=0,g=C.length;S<g;S++)if(C[S]===R)return S;return-1}}).call(this)}).call(this,c("_process"),typeof we!="undefined"?we:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(c,h,d){h.exports=t;var o=c("../errors").codes,n=o.ERR_METHOD_NOT_IMPLEMENTED,l=o.ERR_MULTIPLE_CALLBACK,a=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=o.ERR_TRANSFORM_WITH_LENGTH_0,e=c("./_stream_duplex");c("inherits")(t,e);function r(u,m){var b=this._transformState;b.transforming=!1;var p=b.writecb;if(p===null)return this.emit("error",new l);b.writechunk=null,b.writecb=null,m!=null&&this.push(m),p(u);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function t(u){if(!(this instanceof t))return new t(u);e.call(this,u),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",i)}function i(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(m,b){y(u,m,b)}):y(this,null,null)}t.prototype.push=function(u,m){return this._transformState.needTransform=!1,e.prototype.push.call(this,u,m)},t.prototype._transform=function(u,m,b){b(new n("_transform()"))},t.prototype._write=function(u,m,b){var p=this._transformState;if(p.writecb=b,p.writechunk=u,p.writeencoding=m,!p.transforming){var s=this._readableState;(p.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},t.prototype._read=function(u){var m=this._transformState;m.writechunk!==null&&!m.transforming?(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform)):m.needTransform=!0},t.prototype._destroy=function(u,m){e.prototype._destroy.call(this,u,function(b){m(b)})};function y(u,m,b){if(m)return u.emit("error",m);if(b!=null&&u.push(b),u._writableState.length)throw new f;if(u._transformState.transforming)throw new a;return u.push(null)}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(c,h,d){(function(o,n){(function(){h.exports=V;function l(U){var P=this;this.next=null,this.entry=null,this.finish=function(){Z(P,U)}}var a;V.WritableState=E;var f={deprecate:c("util-deprecate")},e=c("./internal/streams/stream"),r=c("buffer").Buffer,t=n.Uint8Array||function(){};function i(U){return r.from(U)}function y(U){return r.isBuffer(U)||U instanceof t}var u=c("./internal/streams/destroy"),m=c("./internal/streams/state"),b=m.getHighWaterMark,p=c("../errors").codes,s=p.ERR_INVALID_ARG_TYPE,_=p.ERR_METHOD_NOT_IMPLEMENTED,T=p.ERR_MULTIPLE_CALLBACK,I=p.ERR_STREAM_CANNOT_PIPE,L=p.ERR_STREAM_DESTROYED,B=p.ERR_STREAM_NULL_VALUES,O=p.ERR_STREAM_WRITE_AFTER_END,W=p.ERR_UNKNOWN_ENCODING,v=u.errorOrDestroy;c("inherits")(V,e);function x(){}function E(U,P,z){a=a||c("./_stream_duplex"),U=U||{},typeof z!="boolean"&&(z=P instanceof a),this.objectMode=!!U.objectMode,z&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=b(this,U,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=U.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){ne(P,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}E.prototype.getBuffer=function(){for(var P=this.bufferedRequest,z=[];P;)z.push(P),P=P.next;return z},function(){try{Object.defineProperty(E.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(P){return D.call(this,P)?!0:this!==V?!1:P&&P._writableState instanceof E}})):D=function(P){return P instanceof this};function V(U){a=a||c("./_stream_duplex");var P=this instanceof a;if(!P&&!D.call(V,this))return new V(U);this._writableState=new E(U,this,P),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),e.call(this)}V.prototype.pipe=function(){v(this,new I)};function q(U,P){var z=new O;v(U,z),o.nextTick(P,z)}function Y(U,P,z,$){var X;return z===null?X=new B:typeof z!="string"&&!P.objectMode&&(X=new s("chunk",["string","Buffer"],z)),X?(v(U,X),o.nextTick($,X),!1):!0}V.prototype.write=function(U,P,z){var $=this._writableState,X=!1,C=!$.objectMode&&y(U);return C&&!r.isBuffer(U)&&(U=i(U)),typeof P=="function"&&(z=P,P=null),C?P="buffer":P||(P=$.defaultEncoding),typeof z!="function"&&(z=x),$.ending?q(this,z):(C||Y(this,$,U,z))&&($.pendingcb++,X=M(this,$,C,U,P,z)),X},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&re(this,U))},V.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new W(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function A(U,P,z){return!U.objectMode&&U.decodeStrings!==!1&&typeof P=="string"&&(P=r.from(P,z)),P}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function M(U,P,z,$,X,C){if(!z){var R=A(P,$,X);$!==R&&(z=!0,X="buffer",$=R)}var S=P.objectMode?1:$.length;P.length+=S;var g=P.length<P.highWaterMark;if(g||(P.needDrain=!0),P.writing||P.corked){var w=P.lastBufferedRequest;P.lastBufferedRequest={chunk:$,encoding:X,isBuf:z,callback:C,next:null},w?w.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else N(U,P,!1,S,$,X,C);return g}function N(U,P,z,$,X,C,R){P.writelen=$,P.writecb=R,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new L("write")):z?U._writev(X,P.onwrite):U._write(X,C,P.onwrite),P.sync=!1}function G(U,P,z,$,X){--P.pendingcb,z?(o.nextTick(X,$),o.nextTick(H,U,P),U._writableState.errorEmitted=!0,v(U,$)):(X($),U._writableState.errorEmitted=!0,v(U,$),H(U,P))}function oe(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function ne(U,P){var z=U._writableState,$=z.sync,X=z.writecb;if(typeof X!="function")throw new T;if(oe(z),P)G(U,z,$,P,X);else{var C=ee(z)||U.destroyed;!C&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&re(U,z),$?o.nextTick(K,U,z,C,X):K(U,z,C,X)}}function K(U,P,z,$){z||Q(U,P),P.pendingcb--,$(),H(U,P)}function Q(U,P){P.length===0&&P.needDrain&&(P.needDrain=!1,U.emit("drain"))}function re(U,P){P.bufferProcessing=!0;var z=P.bufferedRequest;if(U._writev&&z&&z.next){var $=P.bufferedRequestCount,X=new Array($),C=P.corkedRequestsFree;C.entry=z;for(var R=0,S=!0;z;)X[R]=z,z.isBuf||(S=!1),z=z.next,R+=1;X.allBuffers=S,N(U,P,!0,P.length,X,"",C.finish),P.pendingcb++,P.lastBufferedRequest=null,C.next?(P.corkedRequestsFree=C.next,C.next=null):P.corkedRequestsFree=new l(P),P.bufferedRequestCount=0}else{for(;z;){var g=z.chunk,w=z.encoding,k=z.callback,j=P.objectMode?1:g.length;if(N(U,P,!1,j,g,w,k),z=z.next,P.bufferedRequestCount--,P.writing)break}z===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=z,P.bufferProcessing=!1}V.prototype._write=function(U,P,z){z(new _("_write()"))},V.prototype._writev=null,V.prototype.end=function(U,P,z){var $=this._writableState;return typeof U=="function"?(z=U,U=null,P=null):typeof P=="function"&&(z=P,P=null),U!=null&&this.write(U,P),$.corked&&($.corked=1,this.uncork()),$.ending||F(this,$,z),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ee(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function se(U,P){U._final(function(z){P.pendingcb--,z&&v(U,z),P.prefinished=!0,U.emit("prefinish"),H(U,P)})}function ie(U,P){!P.prefinished&&!P.finalCalled&&(typeof U._final=="function"&&!P.destroyed?(P.pendingcb++,P.finalCalled=!0,o.nextTick(se,U,P)):(P.prefinished=!0,U.emit("prefinish")))}function H(U,P){var z=ee(P);if(z&&(ie(U,P),P.pendingcb===0&&(P.finished=!0,U.emit("finish"),P.autoDestroy))){var $=U._readableState;(!$||$.autoDestroy&&$.endEmitted)&&U.destroy()}return z}function F(U,P,z){P.ending=!0,H(U,P),z&&(P.finished?o.nextTick(z):U.once("finish",z)),P.ended=!0,U.writable=!1}function Z(U,P,z){var $=U.entry;for(U.entry=null;$;){var X=$.callback;P.pendingcb--,X(z),$=$.next}P.corkedRequestsFree.next=U}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(P){!this._writableState||(this._writableState.destroyed=P)}}),V.prototype.destroy=u.destroy,V.prototype._undestroy=u.undestroy,V.prototype._destroy=function(U,P){P(U)}}).call(this)}).call(this,c("_process"),typeof we!="undefined"?we:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(c,h,d){(function(o){(function(){var n;function l(L,B,O){return B in L?Object.defineProperty(L,B,{value:O,enumerable:!0,configurable:!0,writable:!0}):L[B]=O,L}var a=c("./end-of-stream"),f=Symbol("lastResolve"),e=Symbol("lastReject"),r=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),y=Symbol("handlePromise"),u=Symbol("stream");function m(L,B){return{value:L,done:B}}function b(L){var B=L[f];if(B!==null){var O=L[u].read();O!==null&&(L[i]=null,L[f]=null,L[e]=null,B(m(O,!1)))}}function p(L){o.nextTick(b,L)}function s(L,B){return function(O,W){L.then(function(){if(B[t]){O(m(void 0,!0));return}B[y](O,W)},W)}}var _=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((n={get stream(){return this[u]},next:function(){var B=this,O=this[r];if(O!==null)return Promise.reject(O);if(this[t])return Promise.resolve(m(void 0,!0));if(this[u].destroyed)return new Promise(function(E,D){o.nextTick(function(){B[r]?D(B[r]):E(m(void 0,!0))})});var W=this[i],v;if(W)v=new Promise(s(W,this));else{var x=this[u].read();if(x!==null)return Promise.resolve(m(x,!1));v=new Promise(this[y])}return this[i]=v,v}},l(n,Symbol.asyncIterator,function(){return this}),l(n,"return",function(){var B=this;return new Promise(function(O,W){B[u].destroy(null,function(v){if(v){W(v);return}O(m(void 0,!0))})})}),n),_),I=function(B){var O,W=Object.create(T,(O={},l(O,u,{value:B,writable:!0}),l(O,f,{value:null,writable:!0}),l(O,e,{value:null,writable:!0}),l(O,r,{value:null,writable:!0}),l(O,t,{value:B._readableState.endEmitted,writable:!0}),l(O,y,{value:function(x,E){var D=W[u].read();D?(W[i]=null,W[f]=null,W[e]=null,x(m(D,!1))):(W[f]=x,W[e]=E)},writable:!0}),O));return W[i]=null,a(B,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=W[e];x!==null&&(W[i]=null,W[f]=null,W[e]=null,x(v)),W[r]=v;return}var E=W[f];E!==null&&(W[i]=null,W[f]=null,W[e]=null,E(m(void 0,!0))),W[t]=!0}),B.on("readable",p.bind(null,W)),W};h.exports=I}).call(this)}).call(this,c("_process"))},{"./end-of-stream":64,_process:50}],62:[function(c,h,d){function o(b,p){var s=Object.keys(b);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(b);p&&(_=_.filter(function(T){return Object.getOwnPropertyDescriptor(b,T).enumerable})),s.push.apply(s,_)}return s}function n(b){for(var p=1;p<arguments.length;p++){var s=arguments[p]!=null?arguments[p]:{};p%2?o(Object(s),!0).forEach(function(_){l(b,_,s[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(_){Object.defineProperty(b,_,Object.getOwnPropertyDescriptor(s,_))})}return b}function l(b,p,s){return p in b?Object.defineProperty(b,p,{value:s,enumerable:!0,configurable:!0,writable:!0}):b[p]=s,b}function a(b,p){if(!(b instanceof p))throw new TypeError("Cannot call a class as a function")}function f(b,p){for(var s=0;s<p.length;s++){var _=p[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}function e(b,p,s){return p&&f(b.prototype,p),s&&f(b,s),b}var r=c("buffer"),t=r.Buffer,i=c("util"),y=i.inspect,u=y&&y.custom||"inspect";function m(b,p,s){t.prototype.copy.call(b,p,s)}h.exports=function(){function b(){a(this,b),this.head=null,this.tail=null,this.length=0}return e(b,[{key:"push",value:function(s){var _={data:s,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(s){var _={data:s,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(this.length===0)return"";for(var _=this.head,T=""+_.data;_=_.next;)T+=s+_.data;return T}},{key:"concat",value:function(s){if(this.length===0)return t.alloc(0);for(var _=t.allocUnsafe(s>>>0),T=this.head,I=0;T;)m(T.data,_,I),I+=T.data.length,T=T.next;return _}},{key:"consume",value:function(s,_){var T;return s<this.head.data.length?(T=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):s===this.head.data.length?T=this.shift():T=_?this._getString(s):this._getBuffer(s),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var _=this.head,T=1,I=_.data;for(s-=I.length;_=_.next;){var L=_.data,B=s>L.length?L.length:s;if(B===L.length?I+=L:I+=L.slice(0,s),s-=B,s===0){B===L.length?(++T,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=L.slice(B));break}++T}return this.length-=T,I}},{key:"_getBuffer",value:function(s){var _=t.allocUnsafe(s),T=this.head,I=1;for(T.data.copy(_),s-=T.data.length;T=T.next;){var L=T.data,B=s>L.length?L.length:s;if(L.copy(_,_.length-s,0,B),s-=B,s===0){B===L.length?(++I,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=L.slice(B));break}++I}return this.length-=I,_}},{key:u,value:function(s,_){return y(this,n({},_,{depth:0,customInspect:!1}))}}]),b}()},{buffer:17,util:16}],63:[function(c,h,d){(function(o){(function(){function n(t,i){var y=this,u=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return u||m?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(e,this,t)):o.nextTick(e,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(b){!i&&b?y._writableState?y._writableState.errorEmitted?o.nextTick(a,y):(y._writableState.errorEmitted=!0,o.nextTick(l,y,b)):o.nextTick(l,y,b):i?(o.nextTick(a,y),i(b)):o.nextTick(a,y)}),this)}function l(t,i){e(t,i),a(t)}function a(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function f(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function e(t,i){t.emit("error",i)}function r(t,i){var y=t._readableState,u=t._writableState;y&&y.autoDestroy||u&&u.autoDestroy?t.destroy(i):t.emit("error",i)}h.exports={destroy:n,undestroy:f,errorOrDestroy:r}}).call(this)}).call(this,c("_process"))},{_process:50}],64:[function(c,h,d){var o=c("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function n(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,i=new Array(t),y=0;y<t;y++)i[y]=arguments[y];e.apply(this,i)}}}function l(){}function a(e){return e.setHeader&&typeof e.abort=="function"}function f(e,r,t){if(typeof r=="function")return f(e,null,r);r||(r={}),t=n(t||l);var i=r.readable||r.readable!==!1&&e.readable,y=r.writable||r.writable!==!1&&e.writable,u=function(){e.writable||b()},m=e._writableState&&e._writableState.finished,b=function(){y=!1,m=!0,i||t.call(e)},p=e._readableState&&e._readableState.endEmitted,s=function(){i=!1,p=!0,y||t.call(e)},_=function(B){t.call(e,B)},T=function(){var B;if(i&&!p)return(!e._readableState||!e._readableState.ended)&&(B=new o),t.call(e,B);if(y&&!m)return(!e._writableState||!e._writableState.ended)&&(B=new o),t.call(e,B)},I=function(){e.req.on("finish",b)};return a(e)?(e.on("complete",b),e.on("abort",T),e.req?I():e.on("request",I)):y&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",s),e.on("finish",b),r.error!==!1&&e.on("error",_),e.on("close",T),function(){e.removeListener("complete",b),e.removeListener("abort",T),e.removeListener("request",I),e.req&&e.req.removeListener("finish",b),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",b),e.removeListener("end",s),e.removeListener("error",_),e.removeListener("close",T)}}h.exports=f},{"../../../errors":55}],65:[function(c,h,d){h.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(c,h,d){var o;function n(b){var p=!1;return function(){p||(p=!0,b.apply(void 0,arguments))}}var l=c("../../../errors").codes,a=l.ERR_MISSING_ARGS,f=l.ERR_STREAM_DESTROYED;function e(b){if(b)throw b}function r(b){return b.setHeader&&typeof b.abort=="function"}function t(b,p,s,_){_=n(_);var T=!1;b.on("close",function(){T=!0}),o===void 0&&(o=c("./end-of-stream")),o(b,{readable:p,writable:s},function(L){if(L)return _(L);T=!0,_()});var I=!1;return function(L){if(!T&&!I){if(I=!0,r(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();_(L||new f("pipe"))}}}function i(b){b()}function y(b,p){return b.pipe(p)}function u(b){return!b.length||typeof b[b.length-1]!="function"?e:b.pop()}function m(){for(var b=arguments.length,p=new Array(b),s=0;s<b;s++)p[s]=arguments[s];var _=u(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new a("streams");var T,I=p.map(function(L,B){var O=B<p.length-1,W=B>0;return t(L,O,W,function(v){T||(T=v),v&&I.forEach(i),!O&&(I.forEach(i),_(T))})});return p.reduce(y)}h.exports=m},{"../../../errors":55,"./end-of-stream":64}],67:[function(c,h,d){var o=c("../../../errors").codes.ERR_INVALID_OPT_VALUE;function n(a,f,e){return a.highWaterMark!=null?a.highWaterMark:f?a[e]:null}function l(a,f,e,r){var t=n(f,r,e);if(t!=null){if(!(isFinite(t)&&Math.floor(t)===t)||t<0){var i=r?e:"highWaterMark";throw new o(i,t)}return Math.floor(t)}return a.objectMode?16:16*1024}h.exports={getHighWaterMark:l}},{"../../../errors":55}],68:[function(c,h,d){h.exports=c("events").EventEmitter},{events:22}],69:[function(c,h,d){d=h.exports=c("./lib/_stream_readable.js"),d.Stream=d,d.Readable=d,d.Writable=c("./lib/_stream_writable.js"),d.Duplex=c("./lib/_stream_duplex.js"),d.Transform=c("./lib/_stream_transform.js"),d.PassThrough=c("./lib/_stream_passthrough.js"),d.finished=c("./lib/internal/streams/end-of-stream.js"),d.pipeline=c("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(c,h,d){function o(l,a,f){var e=this;this._callback=l,this._args=f,this._interval=setInterval(l,a,this._args),this.reschedule=function(r){r||(r=e._interval),e._interval&&clearInterval(e._interval),e._interval=setInterval(e._callback,r,e._args)},this.clear=function(){e._interval&&(clearInterval(e._interval),e._interval=void 0)},this.destroy=function(){e._interval&&clearInterval(e._interval),e._callback=void 0,e._interval=void 0,e._args=void 0}}function n(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var l;if(arguments.length>0){l=new Array(arguments.length-2);for(var a=0;a<l.length;a++)l[a]=arguments[a+2]}return new o(arguments[0],arguments[1],l)}h.exports=n},{}],71:[function(c,h,d){h.exports=c("./index.js")()},{"./index.js":72}],72:[function(c,h,d){(function(o){(function(){h.exports=l;function n(f){return f instanceof o?o.from(f):new f.constructor(f.buffer.slice(),f.byteOffset,f.length)}function l(f){if(f=f||{},f.circles)return a(f);return f.proto?t:r;function e(i,y){for(var u=Object.keys(i),m=new Array(u.length),b=0;b<u.length;b++){var p=u[b],s=i[p];typeof s!="object"||s===null?m[p]=s:s instanceof Date?m[p]=new Date(s):ArrayBuffer.isView(s)?m[p]=n(s):m[p]=y(s)}return m}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,r);if(i instanceof Map)return new Map(e(Array.from(i),r));if(i instanceof Set)return new Set(e(Array.from(i),r));var y={};for(var u in i)if(Object.hasOwnProperty.call(i,u)!==!1){var m=i[u];typeof m!="object"||m===null?y[u]=m:m instanceof Date?y[u]=new Date(m):m instanceof Map?y[u]=new Map(e(Array.from(m),r)):m instanceof Set?y[u]=new Set(e(Array.from(m),r)):ArrayBuffer.isView(m)?y[u]=n(m):y[u]=r(m)}return y}function t(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,t);if(i instanceof Map)return new Map(e(Array.from(i),t));if(i instanceof Set)return new Set(e(Array.from(i),t));var y={};for(var u in i){var m=i[u];typeof m!="object"||m===null?y[u]=m:m instanceof Date?y[u]=new Date(m):m instanceof Map?y[u]=new Map(e(Array.from(m),t)):m instanceof Set?y[u]=new Set(e(Array.from(m),t)):ArrayBuffer.isView(m)?y[u]=n(m):y[u]=t(m)}return y}}function a(f){var e=[],r=[];return f.proto?y:i;function t(u,m){for(var b=Object.keys(u),p=new Array(b.length),s=0;s<b.length;s++){var _=b[s],T=u[_];if(typeof T!="object"||T===null)p[_]=T;else if(T instanceof Date)p[_]=new Date(T);else if(ArrayBuffer.isView(T))p[_]=n(T);else{var I=e.indexOf(T);I!==-1?p[_]=r[I]:p[_]=m(T)}}return p}function i(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return t(u,i);if(u instanceof Map)return new Map(t(Array.from(u),i));if(u instanceof Set)return new Set(t(Array.from(u),i));var m={};e.push(u),r.push(m);for(var b in u)if(Object.hasOwnProperty.call(u,b)!==!1){var p=u[b];if(typeof p!="object"||p===null)m[b]=p;else if(p instanceof Date)m[b]=new Date(p);else if(p instanceof Map)m[b]=new Map(t(Array.from(p),i));else if(p instanceof Set)m[b]=new Set(t(Array.from(p),i));else if(ArrayBuffer.isView(p))m[b]=n(p);else{var s=e.indexOf(p);s!==-1?m[b]=r[s]:m[b]=i(p)}}return e.pop(),r.pop(),m}function y(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return t(u,y);if(u instanceof Map)return new Map(t(Array.from(u),y));if(u instanceof Set)return new Set(t(Array.from(u),y));var m={};e.push(u),r.push(m);for(var b in u){var p=u[b];if(typeof p!="object"||p===null)m[b]=p;else if(p instanceof Date)m[b]=new Date(p);else if(p instanceof Map)m[b]=new Map(t(Array.from(p),y));else if(p instanceof Set)m[b]=new Set(t(Array.from(p),y));else if(ArrayBuffer.isView(p))m[b]=n(p);else{var s=e.indexOf(p);s!==-1?m[b]=r[s]:m[b]=y(p)}}return e.pop(),r.pop(),m}}}).call(this)}).call(this,c("buffer").Buffer)},{buffer:17}],73:[function(c,h,d){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=c("buffer"),n=o.Buffer;function l(f,e){for(var r in f)e[r]=f[r]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?h.exports=o:(l(o,d),d.Buffer=a);function a(f,e,r){return n(f,e,r)}a.prototype=Object.create(n.prototype),l(n,a),a.from=function(f,e,r){if(typeof f=="number")throw new TypeError("Argument must not be a number");return n(f,e,r)},a.alloc=function(f,e,r){if(typeof f!="number")throw new TypeError("Argument must be a number");var t=n(f);return e!==void 0?typeof r=="string"?t.fill(e,r):t.fill(e):t.fill(0),t},a.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return n(f)},a.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(f)}},{buffer:17}],74:[function(c,h,d){h.exports=o;function o(l){var a=l._readableState;return a?a.objectMode||typeof l._duplexState=="number"?l.read():l.read(n(a)):null}function n(l){return l.buffer.length?l.buffer.head?l.buffer.head.data.length:l.buffer[0].length:l.length}},{}],75:[function(c,h,d){var o=c("safe-buffer").Buffer,n=o.isEncoding||function(I){switch(I=""+I,I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(I){if(!I)return"utf8";for(var L;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(L)return;I=(""+I).toLowerCase(),L=!0}}function a(I){var L=l(I);if(typeof L!="string"&&(o.isEncoding===n||!n(I)))throw new Error("Unknown encoding: "+I);return L||I}d.StringDecoder=f;function f(I){this.encoding=a(I);var L;switch(this.encoding){case"utf16le":this.text=m,this.end=b,L=4;break;case"utf8":this.fillLast=i,L=4;break;case"base64":this.text=p,this.end=s,L=3;break;default:this.write=_,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(L)}f.prototype.write=function(I){if(I.length===0)return"";var L,B;if(this.lastNeed){if(L=this.fillLast(I),L===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<I.length?L?L+this.text(I,B):this.text(I,B):L||""},f.prototype.end=u,f.prototype.text=y,f.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length};function e(I){return I<=127?0:I>>5==6?2:I>>4==14?3:I>>3==30?4:I>>6==2?-1:-2}function r(I,L,B){var O=L.length-1;if(O<B)return 0;var W=e(L[O]);return W>=0?(W>0&&(I.lastNeed=W-1),W):--O<B||W===-2?0:(W=e(L[O]),W>=0?(W>0&&(I.lastNeed=W-2),W):--O<B||W===-2?0:(W=e(L[O]),W>=0?(W>0&&(W===2?W=0:I.lastNeed=W-3),W):0))}function t(I,L,B){if((L[0]&192)!=128)return I.lastNeed=0,"\uFFFD";if(I.lastNeed>1&&L.length>1){if((L[1]&192)!=128)return I.lastNeed=1,"\uFFFD";if(I.lastNeed>2&&L.length>2&&(L[2]&192)!=128)return I.lastNeed=2,"\uFFFD"}}function i(I){var L=this.lastTotal-this.lastNeed,B=t(this,I);if(B!==void 0)return B;if(this.lastNeed<=I.length)return I.copy(this.lastChar,L,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,L,0,I.length),this.lastNeed-=I.length}function y(I,L){var B=r(this,I,L);if(!this.lastNeed)return I.toString("utf8",L);this.lastTotal=B;var O=I.length-(B-this.lastNeed);return I.copy(this.lastChar,0,O),I.toString("utf8",L,O)}function u(I){var L=I&&I.length?this.write(I):"";return this.lastNeed?L+"\uFFFD":L}function m(I,L){if((I.length-L)%2==0){var B=I.toString("utf16le",L);if(B){var O=B.charCodeAt(B.length-1);if(O>=55296&&O<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",L,I.length-1)}function b(I){var L=I&&I.length?this.write(I):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return L+this.lastChar.toString("utf16le",0,B)}return L}function p(I,L){var B=(I.length-L)%3;return B===0?I.toString("base64",L):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",L,I.length-B))}function s(I){var L=I&&I.length?this.write(I):"";return this.lastNeed?L+this.lastChar.toString("base64",0,3-this.lastNeed):L}function _(I){return I.toString(this.encoding)}function T(I){return I&&I.length?this.write(I):""}},{"safe-buffer":73}],76:[function(c,h,d){var o=c("punycode"),n=c("./util");d.parse=L,d.resolve=O,d.resolveObject=W,d.format=B,d.Url=l;function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var a=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],t=["{","}","|","\\","^","`"].concat(r),i=["'"].concat(t),y=["%","/","?",";","#"].concat(i),u=["/","?","#"],m=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,s={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=c("querystring");function L(v,x,E){if(v&&n.isObject(v)&&v instanceof l)return v;var D=new l;return D.parse(v,x,E),D}l.prototype.parse=function(v,x,E){if(!n.isString(v))throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var D=v.indexOf("?"),V=D!==-1&&D<v.indexOf("#")?"?":"#",q=v.split(V),Y=/\\/g;q[0]=q[0].replace(Y,"/"),v=q.join(V);var A=v;if(A=A.trim(),!E&&v.split("#").length===1){var M=e.exec(A);if(M)return this.path=A,this.href=A,this.pathname=M[1],M[2]?(this.search=M[2],x?this.query=I.parse(this.search.substr(1)):this.query=this.search.substr(1)):x&&(this.search="",this.query={}),this}var N=a.exec(A);if(N){N=N[0];var G=N.toLowerCase();this.protocol=G,A=A.substr(N.length)}if(E||N||A.match(/^\/\/[^@\/]+@[^@\/]+/)){var oe=A.substr(0,2)==="//";oe&&!(N&&_[N])&&(A=A.substr(2),this.slashes=!0)}if(!_[N]&&(oe||N&&!T[N])){for(var ne=-1,K=0;K<u.length;K++){var Q=A.indexOf(u[K]);Q!==-1&&(ne===-1||Q<ne)&&(ne=Q)}var re,ee;ne===-1?ee=A.lastIndexOf("@"):ee=A.lastIndexOf("@",ne),ee!==-1&&(re=A.slice(0,ee),A=A.slice(ee+1),this.auth=decodeURIComponent(re)),ne=-1;for(var K=0;K<y.length;K++){var Q=A.indexOf(y[K]);Q!==-1&&(ne===-1||Q<ne)&&(ne=Q)}ne===-1&&(ne=A.length),this.host=A.slice(0,ne),A=A.slice(ne),this.parseHost(),this.hostname=this.hostname||"";var se=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!se)for(var ie=this.hostname.split(/\./),K=0,H=ie.length;K<H;K++){var F=ie[K];if(!!F&&!F.match(b)){for(var Z="",U=0,P=F.length;U<P;U++)F.charCodeAt(U)>127?Z+="x":Z+=F[U];if(!Z.match(b)){var z=ie.slice(0,K),$=ie.slice(K+1),X=F.match(p);X&&(z.push(X[1]),$.unshift(X[2])),$.length&&(A="/"+$.join(".")+A),this.hostname=z.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),se||(this.hostname=o.toASCII(this.hostname));var C=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+C,this.href+=this.host,se&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),A[0]!=="/"&&(A="/"+A))}if(!s[G])for(var K=0,H=i.length;K<H;K++){var S=i[K];if(A.indexOf(S)!==-1){var g=encodeURIComponent(S);g===S&&(g=escape(S)),A=A.split(S).join(g)}}var w=A.indexOf("#");w!==-1&&(this.hash=A.substr(w),A=A.slice(0,w));var k=A.indexOf("?");if(k!==-1?(this.search=A.substr(k),this.query=A.substr(k+1),x&&(this.query=I.parse(this.query)),A=A.slice(0,k)):x&&(this.search="",this.query={}),A&&(this.pathname=A),T[G]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var C=this.pathname||"",j=this.search||"";this.path=C+j}return this.href=this.format(),this};function B(v){return n.isString(v)&&(v=L(v)),v instanceof l?v.format():l.prototype.format.call(v)}l.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var x=this.protocol||"",E=this.pathname||"",D=this.hash||"",V=!1,q="";this.host?V=v+this.host:this.hostname&&(V=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(V+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(q=I.stringify(this.query));var Y=this.search||q&&"?"+q||"";return x&&x.substr(-1)!==":"&&(x+=":"),this.slashes||(!x||T[x])&&V!==!1?(V="//"+(V||""),E&&E.charAt(0)!=="/"&&(E="/"+E)):V||(V=""),D&&D.charAt(0)!=="#"&&(D="#"+D),Y&&Y.charAt(0)!=="?"&&(Y="?"+Y),E=E.replace(/[?#]/g,function(A){return encodeURIComponent(A)}),Y=Y.replace("#","%23"),x+V+E+Y+D};function O(v,x){return L(v,!1,!0).resolve(x)}l.prototype.resolve=function(v){return this.resolveObject(L(v,!1,!0)).format()};function W(v,x){return v?L(v,!1,!0).resolveObject(x):x}l.prototype.resolveObject=function(v){if(n.isString(v)){var x=new l;x.parse(v,!1,!0),v=x}for(var E=new l,D=Object.keys(this),V=0;V<D.length;V++){var q=D[V];E[q]=this[q]}if(E.hash=v.hash,v.href==="")return E.href=E.format(),E;if(v.slashes&&!v.protocol){for(var Y=Object.keys(v),A=0;A<Y.length;A++){var M=Y[A];M!=="protocol"&&(E[M]=v[M])}return T[E.protocol]&&E.hostname&&!E.pathname&&(E.path=E.pathname="/"),E.href=E.format(),E}if(v.protocol&&v.protocol!==E.protocol){if(!T[v.protocol]){for(var N=Object.keys(v),G=0;G<N.length;G++){var oe=N[G];E[oe]=v[oe]}return E.href=E.format(),E}if(E.protocol=v.protocol,!v.host&&!_[v.protocol]){for(var H=(v.pathname||"").split("/");H.length&&!(v.host=H.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),H[0]!==""&&H.unshift(""),H.length<2&&H.unshift(""),E.pathname=H.join("/")}else E.pathname=v.pathname;if(E.search=v.search,E.query=v.query,E.host=v.host||"",E.auth=v.auth,E.hostname=v.hostname||v.host,E.port=v.port,E.pathname||E.search){var ne=E.pathname||"",K=E.search||"";E.path=ne+K}return E.slashes=E.slashes||v.slashes,E.href=E.format(),E}var Q=E.pathname&&E.pathname.charAt(0)==="/",re=v.host||v.pathname&&v.pathname.charAt(0)==="/",ee=re||Q||E.host&&v.pathname,se=ee,ie=E.pathname&&E.pathname.split("/")||[],H=v.pathname&&v.pathname.split("/")||[],F=E.protocol&&!T[E.protocol];if(F&&(E.hostname="",E.port=null,E.host&&(ie[0]===""?ie[0]=E.host:ie.unshift(E.host)),E.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(H[0]===""?H[0]=v.host:H.unshift(v.host)),v.host=null),ee=ee&&(H[0]===""||ie[0]==="")),re)E.host=v.host||v.host===""?v.host:E.host,E.hostname=v.hostname||v.hostname===""?v.hostname:E.hostname,E.search=v.search,E.query=v.query,ie=H;else if(H.length)ie||(ie=[]),ie.pop(),ie=ie.concat(H),E.search=v.search,E.query=v.query;else if(!n.isNullOrUndefined(v.search)){if(F){E.hostname=E.host=ie.shift();var Z=E.host&&E.host.indexOf("@")>0?E.host.split("@"):!1;Z&&(E.auth=Z.shift(),E.host=E.hostname=Z.shift())}return E.search=v.search,E.query=v.query,(!n.isNull(E.pathname)||!n.isNull(E.search))&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E}if(!ie.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var U=ie.slice(-1)[0],P=(E.host||v.host||ie.length>1)&&(U==="."||U==="..")||U==="",z=0,$=ie.length;$>=0;$--)U=ie[$],U==="."?ie.splice($,1):U===".."?(ie.splice($,1),z++):z&&(ie.splice($,1),z--);if(!ee&&!se)for(;z--;z)ie.unshift("..");ee&&ie[0]!==""&&(!ie[0]||ie[0].charAt(0)!=="/")&&ie.unshift(""),P&&ie.join("/").substr(-1)!=="/"&&ie.push("");var X=ie[0]===""||ie[0]&&ie[0].charAt(0)==="/";if(F){E.hostname=E.host=X?"":ie.length?ie.shift():"";var Z=E.host&&E.host.indexOf("@")>0?E.host.split("@"):!1;Z&&(E.auth=Z.shift(),E.host=E.hostname=Z.shift())}return ee=ee||E.host&&ie.length,ee&&!X&&ie.unshift(""),ie.length?E.pathname=ie.join("/"):(E.pathname=null,E.path=null),(!n.isNull(E.pathname)||!n.isNull(E.search))&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=v.auth||E.auth,E.slashes=E.slashes||v.slashes,E.href=E.format(),E},l.prototype.parseHost=function(){var v=this.host,x=f.exec(v);x&&(x=x[0],x!==":"&&(this.port=x.substr(1)),v=v.substr(0,v.length-x.length)),v&&(this.hostname=v)}},{"./util":77,punycode:51,querystring:54}],77:[function(c,h,d){h.exports={isString:function(o){return typeof o=="string"},isObject:function(o){return typeof o=="object"&&o!==null},isNull:function(o){return o===null},isNullOrUndefined:function(o){return o==null}}},{}],78:[function(c,h,d){(function(o){(function(){h.exports=n;function n(a,f){if(l("noDeprecation"))return a;var e=!1;function r(){if(!e){if(l("throwDeprecation"))throw new Error(f);l("traceDeprecation")?console.trace(f):console.warn(f),e=!0}return a.apply(this,arguments)}return r}function l(a){try{if(!o.localStorage)return!1}catch{return!1}var f=o.localStorage[a];return f==null?!1:String(f).toLowerCase()==="true"}}).call(this)}).call(this,typeof we!="undefined"?we:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],79:[function(c,h,d){h.exports=o;function o(n,l){if(n&&l)return o(n)(l);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(f){a[f]=n[f]}),a;function a(){for(var f=new Array(arguments.length),e=0;e<f.length;e++)f[e]=arguments[e];var r=n.apply(this,f),t=f[f.length-1];return typeof r=="function"&&r!==t&&Object.keys(t).forEach(function(i){r[i]=t[i]}),r}}},{}],80:[function(c,h,d){h.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(c,h,d){h.exports=n;var o=Object.prototype.hasOwnProperty;function n(){for(var l={},a=0;a<arguments.length;a++){var f=arguments[a];for(var e in f)o.call(f,e)&&(l[e]=f[e])}return l}},{}],82:[function(c,h,d){h.exports=function(o){o.prototype[Symbol.iterator]=function*(){for(let n=this.head;n;n=n.next)yield n.value}}},{}],83:[function(c,h,d){h.exports=o,o.Node=f,o.create=o;function o(e){var r=this;if(r instanceof o||(r=new o),r.tail=null,r.head=null,r.length=0,e&&typeof e.forEach=="function")e.forEach(function(y){r.push(y)});else if(arguments.length>0)for(var t=0,i=arguments.length;t<i;t++)r.push(arguments[t]);return r}o.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var r=e.next,t=e.prev;return r&&(r.prev=t),t&&(t.next=r),e===this.head&&(this.head=r),e===this.tail&&(this.tail=t),e.list.length--,e.next=null,e.prev=null,e.list=null,r},o.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var r=this.head;e.list=this,e.next=r,r&&(r.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},o.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var r=this.tail;e.list=this,e.prev=r,r&&(r.next=e),this.tail=e,this.head||(this.head=e),this.length++}},o.prototype.push=function(){for(var e=0,r=arguments.length;e<r;e++)l(this,arguments[e]);return this.length},o.prototype.unshift=function(){for(var e=0,r=arguments.length;e<r;e++)a(this,arguments[e]);return this.length},o.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},o.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},o.prototype.forEach=function(e,r){r=r||this;for(var t=this.head,i=0;t!==null;i++)e.call(r,t.value,i,this),t=t.next},o.prototype.forEachReverse=function(e,r){r=r||this;for(var t=this.tail,i=this.length-1;t!==null;i--)e.call(r,t.value,i,this),t=t.prev},o.prototype.get=function(e){for(var r=0,t=this.head;t!==null&&r<e;r++)t=t.next;if(r===e&&t!==null)return t.value},o.prototype.getReverse=function(e){for(var r=0,t=this.tail;t!==null&&r<e;r++)t=t.prev;if(r===e&&t!==null)return t.value},o.prototype.map=function(e,r){r=r||this;for(var t=new o,i=this.head;i!==null;)t.push(e.call(r,i.value,this)),i=i.next;return t},o.prototype.mapReverse=function(e,r){r=r||this;for(var t=new o,i=this.tail;i!==null;)t.push(e.call(r,i.value,this)),i=i.prev;return t},o.prototype.reduce=function(e,r){var t,i=this.head;if(arguments.length>1)t=r;else if(this.head)i=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=0;i!==null;y++)t=e(t,i.value,y),i=i.next;return t},o.prototype.reduceReverse=function(e,r){var t,i=this.tail;if(arguments.length>1)t=r;else if(this.tail)i=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=this.length-1;i!==null;y--)t=e(t,i.value,y),i=i.prev;return t},o.prototype.toArray=function(){for(var e=new Array(this.length),r=0,t=this.head;t!==null;r++)e[r]=t.value,t=t.next;return e},o.prototype.toArrayReverse=function(){for(var e=new Array(this.length),r=0,t=this.tail;t!==null;r++)e[r]=t.value,t=t.prev;return e},o.prototype.slice=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new o;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var i=0,y=this.head;y!==null&&i<e;i++)y=y.next;for(;y!==null&&i<r;i++,y=y.next)t.push(y.value);return t},o.prototype.sliceReverse=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new o;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var i=this.length,y=this.tail;y!==null&&i>r;i--)y=y.prev;for(;y!==null&&i>e;i--,y=y.prev)t.push(y.value);return t},o.prototype.splice=function(e,r,...t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,y=this.head;y!==null&&i<e;i++)y=y.next;for(var u=[],i=0;y&&i<r;i++)u.push(y.value),y=this.removeNode(y);y===null&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev);for(var i=0;i<t.length;i++)y=n(this,y,t[i]);return u},o.prototype.reverse=function(){for(var e=this.head,r=this.tail,t=e;t!==null;t=t.prev){var i=t.prev;t.prev=t.next,t.next=i}return this.head=r,this.tail=e,this};function n(e,r,t){var i=r===e.head?new f(t,null,r,e):new f(t,r,r.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function l(e,r){e.tail=new f(r,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,r){e.head=new f(r,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function f(e,r,t,i){if(!(this instanceof f))return new f(e,r,t,i);this.list=i,this.value=e,r?(r.next=this,this.prev=r):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{c("./iterator.js")(o)}catch{}},{"./iterator.js":82}]},{},[12])(12)});var At=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),kt=Ze(At);const Je=kt;class ze{constructor(h){this._client=h}set handleMessage(h){this._client.handleMessage=h}get handleMessage(){return this._client.handleMessage}get connected(){return this._client.connected}get reconnecting(){return this._client.reconnecting}publish(...h){return new Promise((d,o)=>{this._client.publish(...h,(n,l)=>{n?o(n):d(l)})})}subscribe(...h){return new Promise((d,o)=>{this._client.subscribe(...h,(n,l)=>{n?o(n):d(l)})})}unsubscribe(...h){return new Promise((d,o)=>{this._client.unsubscribe(...h,(n,l)=>{n?o(n):d(l)})})}end(...h){return new Promise((d,o)=>{this._client.end(...h,(n,l)=>{n?o(n):d(l)})})}reconnect(...h){return this._client.reconnect(...h)}addListener(...h){return this._client.addListener(...h)}emit(...h){return this._client.emit(...h)}eventNames(...h){return this._client.eventNames(...h)}getLastMessageId(...h){return this._client.getLastMessageId(...h)}getMaxListeners(...h){return this._client.getMaxListeners(...h)}listenerCount(...h){return this._client.listenerCount(...h)}listeners(...h){return this._client.listeners(...h)}off(...h){return this._client.off(...h)}on(...h){return this._client.on(...h)}once(...h){return this._client.once(...h)}prependListener(...h){return this._client.prependListener(...h)}prependOnceListener(...h){return this._client.prependOnceListener(...h)}rawListeners(...h){return this._client.rawListeners(...h)}removeAllListeners(...h){return this._client.removeAllListeners(...h)}removeListener(...h){return this._client.removeListener(...h)}removeOutgoingMessage(...h){return this._client.removeOutgoingMessage(...h)}setMaxListeners(...h){return this._client.setMaxListeners(...h)}}var It={connect(c,h){const d=Je.connect(c,h);return new ze(d)},connectAsync(c,h,d=!0){const o=Je.connect(c,h),n=new ze(o);return new Promise((l,a)=>{const f={connect:r=>{e(),l(n)},end:()=>{e(),l(n)},error:r=>{e(),o.end(),a(r)}};d===!1&&(f.close=()=>{f.error("Couldn't connect to server")});function e(){Object.keys(f).forEach(r=>{o.removeListener(r,f[r])})}Object.keys(f).forEach(r=>{o.on(r,f[r])})})},AsyncClient:ze},Ve={exports:{}},Ce=typeof Reflect=="object"?Reflect:null,et=Ce&&typeof Ce.apply=="function"?Ce.apply:function(h,d,o){return Function.prototype.apply.call(h,d,o)},Le;Ce&&typeof Ce.ownKeys=="function"?Le=Ce.ownKeys:Object.getOwnPropertySymbols?Le=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:Le=function(h){return Object.getOwnPropertyNames(h)};function Rt(c){console&&console.warn&&console.warn(c)}var tt=Number.isNaN||function(h){return h!==h};function le(){le.init.call(this)}Ve.exports=le;Ve.exports.once=Pt;le.EventEmitter=le;le.prototype._events=void 0;le.prototype._eventsCount=0;le.prototype._maxListeners=void 0;var rt=10;function Pe(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}Object.defineProperty(le,"defaultMaxListeners",{enumerable:!0,get:function(){return rt},set:function(c){if(typeof c!="number"||c<0||tt(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");rt=c}});le.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};le.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||tt(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};function nt(c){return c._maxListeners===void 0?le.defaultMaxListeners:c._maxListeners}le.prototype.getMaxListeners=function(){return nt(this)};le.prototype.emit=function(h){for(var d=[],o=1;o<arguments.length;o++)d.push(arguments[o]);var n=h==="error",l=this._events;if(l!==void 0)n=n&&l.error===void 0;else if(!n)return!1;if(n){var a;if(d.length>0&&(a=d[0]),a instanceof Error)throw a;var f=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw f.context=a,f}var e=l[h];if(e===void 0)return!1;if(typeof e=="function")et(e,this,d);else for(var r=e.length,t=ft(e,r),o=0;o<r;++o)et(t[o],this,d);return!0};function it(c,h,d,o){var n,l,a;if(Pe(d),l=c._events,l===void 0?(l=c._events=Object.create(null),c._eventsCount=0):(l.newListener!==void 0&&(c.emit("newListener",h,d.listener?d.listener:d),l=c._events),a=l[h]),a===void 0)a=l[h]=d,++c._eventsCount;else if(typeof a=="function"?a=l[h]=o?[d,a]:[a,d]:o?a.unshift(d):a.push(d),n=nt(c),n>0&&a.length>n&&!a.warned){a.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=c,f.type=h,f.count=a.length,Rt(f)}return c}le.prototype.addListener=function(h,d){return it(this,h,d,!1)};le.prototype.on=le.prototype.addListener;le.prototype.prependListener=function(h,d){return it(this,h,d,!0)};function Mt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ot(c,h,d){var o={fired:!1,wrapFn:void 0,target:c,type:h,listener:d},n=Mt.bind(o);return n.listener=d,o.wrapFn=n,n}le.prototype.once=function(h,d){return Pe(d),this.on(h,ot(this,h,d)),this};le.prototype.prependOnceListener=function(h,d){return Pe(d),this.prependListener(h,ot(this,h,d)),this};le.prototype.removeListener=function(h,d){var o,n,l,a,f;if(Pe(d),n=this._events,n===void 0)return this;if(o=n[h],o===void 0)return this;if(o===d||o.listener===d)--this._eventsCount==0?this._events=Object.create(null):(delete n[h],n.removeListener&&this.emit("removeListener",h,o.listener||d));else if(typeof o!="function"){for(l=-1,a=o.length-1;a>=0;a--)if(o[a]===d||o[a].listener===d){f=o[a].listener,l=a;break}if(l<0)return this;l===0?o.shift():Ot(o,l),o.length===1&&(n[h]=o[0]),n.removeListener!==void 0&&this.emit("removeListener",h,f||d)}return this};le.prototype.off=le.prototype.removeListener;le.prototype.removeAllListeners=function(h){var d,o,n;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[h]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[h]),this;if(arguments.length===0){var l=Object.keys(o),a;for(n=0;n<l.length;++n)a=l[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(d=o[h],typeof d=="function")this.removeListener(h,d);else if(d!==void 0)for(n=d.length-1;n>=0;n--)this.removeListener(h,d[n]);return this};function st(c,h,d){var o=c._events;if(o===void 0)return[];var n=o[h];return n===void 0?[]:typeof n=="function"?d?[n.listener||n]:[n]:d?Lt(n):ft(n,n.length)}le.prototype.listeners=function(h){return st(this,h,!0)};le.prototype.rawListeners=function(h){return st(this,h,!1)};le.listenerCount=function(c,h){return typeof c.listenerCount=="function"?c.listenerCount(h):at.call(c,h)};le.prototype.listenerCount=at;function at(c){var h=this._events;if(h!==void 0){var d=h[c];if(typeof d=="function")return 1;if(d!==void 0)return d.length}return 0}le.prototype.eventNames=function(){return this._eventsCount>0?Le(this._events):[]};function ft(c,h){for(var d=new Array(h),o=0;o<h;++o)d[o]=c[o];return d}function Ot(c,h){for(;h+1<c.length;h++)c[h]=c[h+1];c.pop()}function Lt(c){for(var h=new Array(c.length),d=0;d<h.length;++d)h[d]=c[d].listener||c[d];return h}function Pt(c,h){return new Promise(function(d,o){function n(a){c.removeListener(h,l),o(a)}function l(){typeof c.removeListener=="function"&&c.removeListener("error",n),d([].slice.call(arguments))}lt(c,h,l,{once:!0}),h!=="error"&&Bt(c,n,{once:!0})})}function Bt(c,h,d){typeof c.on=="function"&&lt(c,"error",h,d)}function lt(c,h,d,o){if(typeof c.on=="function")o.once?c.once(h,d):c.on(h,d);else if(typeof c.addEventListener=="function")c.addEventListener(h,function n(l){o.once&&c.removeEventListener(h,n),d(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c)}var He={};Object.defineProperty(He,"__esModule",{value:!0});const Ut={broker:{protocol:"tcp",host:"tether-io.dev",port:1883,path:"",username:"tether",password:"sp_ceB0ss!"}};He.default=Ut;var Be,Ft=new Uint8Array(16);function ut(){if(!Be&&(Be=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Be))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Be(Ft)}var Dt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ue(c){return typeof c=="string"&&Dt.test(c)}var de=[];for(var qe=0;qe<256;++qe)de.push((qe+256).toString(16).substr(1));function Fe(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=(de[c[h+0]]+de[c[h+1]]+de[c[h+2]]+de[c[h+3]]+"-"+de[c[h+4]]+de[c[h+5]]+"-"+de[c[h+6]]+de[c[h+7]]+"-"+de[c[h+8]]+de[c[h+9]]+"-"+de[c[h+10]]+de[c[h+11]]+de[c[h+12]]+de[c[h+13]]+de[c[h+14]]+de[c[h+15]]).toLowerCase();if(!Ue(d))throw TypeError("Stringified UUID is invalid");return d}var ct,We,Ke=0,Qe=0;function Nt(c,h,d){var o=h&&d||0,n=h||new Array(16);c=c||{};var l=c.node||ct,a=c.clockseq!==void 0?c.clockseq:We;if(l==null||a==null){var f=c.random||(c.rng||ut)();l==null&&(l=ct=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=We=(f[6]<<8|f[7])&16383)}var e=c.msecs!==void 0?c.msecs:Date.now(),r=c.nsecs!==void 0?c.nsecs:Qe+1,t=e-Ke+(r-Qe)/1e4;if(t<0&&c.clockseq===void 0&&(a=a+1&16383),(t<0||e>Ke)&&c.nsecs===void 0&&(r=0),r>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ke=e,Qe=r,We=a,e+=122192928e5;var i=((e&268435455)*1e4+r)%4294967296;n[o++]=i>>>24&255,n[o++]=i>>>16&255,n[o++]=i>>>8&255,n[o++]=i&255;var y=e/4294967296*1e4&268435455;n[o++]=y>>>8&255,n[o++]=y&255,n[o++]=y>>>24&15|16,n[o++]=y>>>16&255,n[o++]=a>>>8|128,n[o++]=a&255;for(var u=0;u<6;++u)n[o+u]=l[u];return h||Fe(n)}function ht(c){if(!Ue(c))throw TypeError("Invalid UUID");var h,d=new Uint8Array(16);return d[0]=(h=parseInt(c.slice(0,8),16))>>>24,d[1]=h>>>16&255,d[2]=h>>>8&255,d[3]=h&255,d[4]=(h=parseInt(c.slice(9,13),16))>>>8,d[5]=h&255,d[6]=(h=parseInt(c.slice(14,18),16))>>>8,d[7]=h&255,d[8]=(h=parseInt(c.slice(19,23),16))>>>8,d[9]=h&255,d[10]=(h=parseInt(c.slice(24,36),16))/1099511627776&255,d[11]=h/4294967296&255,d[12]=h>>>24&255,d[13]=h>>>16&255,d[14]=h>>>8&255,d[15]=h&255,d}function jt(c){c=unescape(encodeURIComponent(c));for(var h=[],d=0;d<c.length;++d)h.push(c.charCodeAt(d));return h}var zt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Vt="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function dt(c,h,d){function o(n,l,a,f){if(typeof n=="string"&&(n=jt(n)),typeof l=="string"&&(l=ht(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var e=new Uint8Array(16+n.length);if(e.set(l),e.set(n,l.length),e=d(e),e[6]=e[6]&15|h,e[8]=e[8]&63|128,a){f=f||0;for(var r=0;r<16;++r)a[f+r]=e[r];return a}return Fe(e)}try{o.name=c}catch{}return o.DNS=zt,o.URL=Vt,o}function Ht(c){if(typeof c=="string"){var h=unescape(encodeURIComponent(c));c=new Uint8Array(h.length);for(var d=0;d<h.length;++d)c[d]=h.charCodeAt(d)}return qt(Wt(Kt(c),c.length*8))}function qt(c){for(var h=[],d=c.length*32,o="0123456789abcdef",n=0;n<d;n+=8){var l=c[n>>5]>>>n%32&255,a=parseInt(o.charAt(l>>>4&15)+o.charAt(l&15),16);h.push(a)}return h}function pt(c){return(c+64>>>9<<4)+14+1}function Wt(c,h){c[h>>5]|=128<<h%32,c[pt(h)-1]=h;for(var d=1732584193,o=-271733879,n=-1732584194,l=271733878,a=0;a<c.length;a+=16){var f=d,e=o,r=n,t=l;d=pe(d,o,n,l,c[a],7,-680876936),l=pe(l,d,o,n,c[a+1],12,-389564586),n=pe(n,l,d,o,c[a+2],17,606105819),o=pe(o,n,l,d,c[a+3],22,-1044525330),d=pe(d,o,n,l,c[a+4],7,-176418897),l=pe(l,d,o,n,c[a+5],12,1200080426),n=pe(n,l,d,o,c[a+6],17,-1473231341),o=pe(o,n,l,d,c[a+7],22,-45705983),d=pe(d,o,n,l,c[a+8],7,1770035416),l=pe(l,d,o,n,c[a+9],12,-1958414417),n=pe(n,l,d,o,c[a+10],17,-42063),o=pe(o,n,l,d,c[a+11],22,-1990404162),d=pe(d,o,n,l,c[a+12],7,1804603682),l=pe(l,d,o,n,c[a+13],12,-40341101),n=pe(n,l,d,o,c[a+14],17,-1502002290),o=pe(o,n,l,d,c[a+15],22,1236535329),d=ye(d,o,n,l,c[a+1],5,-165796510),l=ye(l,d,o,n,c[a+6],9,-1069501632),n=ye(n,l,d,o,c[a+11],14,643717713),o=ye(o,n,l,d,c[a],20,-373897302),d=ye(d,o,n,l,c[a+5],5,-701558691),l=ye(l,d,o,n,c[a+10],9,38016083),n=ye(n,l,d,o,c[a+15],14,-660478335),o=ye(o,n,l,d,c[a+4],20,-405537848),d=ye(d,o,n,l,c[a+9],5,568446438),l=ye(l,d,o,n,c[a+14],9,-1019803690),n=ye(n,l,d,o,c[a+3],14,-187363961),o=ye(o,n,l,d,c[a+8],20,1163531501),d=ye(d,o,n,l,c[a+13],5,-1444681467),l=ye(l,d,o,n,c[a+2],9,-51403784),n=ye(n,l,d,o,c[a+7],14,1735328473),o=ye(o,n,l,d,c[a+12],20,-1926607734),d=ge(d,o,n,l,c[a+5],4,-378558),l=ge(l,d,o,n,c[a+8],11,-2022574463),n=ge(n,l,d,o,c[a+11],16,1839030562),o=ge(o,n,l,d,c[a+14],23,-35309556),d=ge(d,o,n,l,c[a+1],4,-1530992060),l=ge(l,d,o,n,c[a+4],11,1272893353),n=ge(n,l,d,o,c[a+7],16,-155497632),o=ge(o,n,l,d,c[a+10],23,-1094730640),d=ge(d,o,n,l,c[a+13],4,681279174),l=ge(l,d,o,n,c[a],11,-358537222),n=ge(n,l,d,o,c[a+3],16,-722521979),o=ge(o,n,l,d,c[a+6],23,76029189),d=ge(d,o,n,l,c[a+9],4,-640364487),l=ge(l,d,o,n,c[a+12],11,-421815835),n=ge(n,l,d,o,c[a+15],16,530742520),o=ge(o,n,l,d,c[a+2],23,-995338651),d=ve(d,o,n,l,c[a],6,-198630844),l=ve(l,d,o,n,c[a+7],10,1126891415),n=ve(n,l,d,o,c[a+14],15,-1416354905),o=ve(o,n,l,d,c[a+5],21,-57434055),d=ve(d,o,n,l,c[a+12],6,1700485571),l=ve(l,d,o,n,c[a+3],10,-1894986606),n=ve(n,l,d,o,c[a+10],15,-1051523),o=ve(o,n,l,d,c[a+1],21,-2054922799),d=ve(d,o,n,l,c[a+8],6,1873313359),l=ve(l,d,o,n,c[a+15],10,-30611744),n=ve(n,l,d,o,c[a+6],15,-1560198380),o=ve(o,n,l,d,c[a+13],21,1309151649),d=ve(d,o,n,l,c[a+4],6,-145523070),l=ve(l,d,o,n,c[a+11],10,-1120210379),n=ve(n,l,d,o,c[a+2],15,718787259),o=ve(o,n,l,d,c[a+9],21,-343485551),d=Ee(d,f),o=Ee(o,e),n=Ee(n,r),l=Ee(l,t)}return[d,o,n,l]}function Kt(c){if(c.length===0)return[];for(var h=c.length*8,d=new Uint32Array(pt(h)),o=0;o<h;o+=8)d[o>>5]|=(c[o/8]&255)<<o%32;return d}function Ee(c,h){var d=(c&65535)+(h&65535),o=(c>>16)+(h>>16)+(d>>16);return o<<16|d&65535}function Qt(c,h){return c<<h|c>>>32-h}function De(c,h,d,o,n,l){return Ee(Qt(Ee(Ee(h,c),Ee(o,l)),n),d)}function pe(c,h,d,o,n,l,a){return De(h&d|~h&o,c,h,n,l,a)}function ye(c,h,d,o,n,l,a){return De(h&o|d&~o,c,h,n,l,a)}function ge(c,h,d,o,n,l,a){return De(h^d^o,c,h,n,l,a)}function ve(c,h,d,o,n,l,a){return De(d^(h|~o),c,h,n,l,a)}var $t=dt("v3",48,Ht),Gt=$t;function Yt(c,h,d){c=c||{};var o=c.random||(c.rng||ut)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,h){d=d||0;for(var n=0;n<16;++n)h[d+n]=o[n];return h}return Fe(o)}function Xt(c,h,d,o){switch(c){case 0:return h&d^~h&o;case 1:return h^d^o;case 2:return h&d^h&o^d&o;case 3:return h^d^o}}function $e(c,h){return c<<h|c>>>32-h}function Zt(c){var h=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof c=="string"){var o=unescape(encodeURIComponent(c));c=[];for(var n=0;n<o.length;++n)c.push(o.charCodeAt(n))}else Array.isArray(c)||(c=Array.prototype.slice.call(c));c.push(128);for(var l=c.length/4+2,a=Math.ceil(l/16),f=new Array(a),e=0;e<a;++e){for(var r=new Uint32Array(16),t=0;t<16;++t)r[t]=c[e*64+t*4]<<24|c[e*64+t*4+1]<<16|c[e*64+t*4+2]<<8|c[e*64+t*4+3];f[e]=r}f[a-1][14]=(c.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(c.length-1)*8&4294967295;for(var i=0;i<a;++i){for(var y=new Uint32Array(80),u=0;u<16;++u)y[u]=f[i][u];for(var m=16;m<80;++m)y[m]=$e(y[m-3]^y[m-8]^y[m-14]^y[m-16],1);for(var b=d[0],p=d[1],s=d[2],_=d[3],T=d[4],I=0;I<80;++I){var L=Math.floor(I/20),B=$e(b,5)+Xt(L,p,s,_)+T+h[L]+y[I]>>>0;T=_,_=s,s=$e(p,30)>>>0,p=b,b=B}d[0]=d[0]+b>>>0,d[1]=d[1]+p>>>0,d[2]=d[2]+s>>>0,d[3]=d[3]+_>>>0,d[4]=d[4]+T>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var Jt=dt("v5",80,Zt),er=Jt,tr="00000000-0000-0000-0000-000000000000";function rr(c){if(!Ue(c))throw TypeError("Invalid UUID");return parseInt(c.substr(14,1),16)}var nr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",v1:Nt,v3:Gt,v4:Yt,v5:er,NIL:tr,version:rr,validate:Ue,stringify:Fe,parse:ht}),ir=Ze(nr),Ae=Oe&&Oe.__awaiter||function(c,h,d,o){function n(l){return l instanceof d?l:new d(function(a){a(l)})}return new(d||(d=Promise))(function(l,a){function f(t){try{r(o.next(t))}catch(i){a(i)}}function e(t){try{r(o.throw(t))}catch(i){a(i)}}function r(t){t.done?l(t.value):n(t.value).then(f,e)}r((o=o.apply(c,h||[])).next())})},yt=Oe&&Oe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Se,"__esModule",{value:!0});var or=Se.TetherAgent=Se.Output=Se.Input=void 0;const sr=yt(It),ar=Ve.exports,ke=yt(He),fr=ir;class gt extends ar.EventEmitter{constructor(h,d){super();this.getDefinition=()=>this.definition,this.client=h,this.definition=d}}class vt extends gt{constructor(){super(...arguments);this.subscribe=()=>Ae(this,void 0,void 0,function*(){this.client===null&&console.warn("subscribing to topic before client is connected; this is allowed but you won't receive any messages until connected"),yield this.client.subscribe(this.definition.topic),console.log("subscribed to topic",this.definition.topic)})}}Se.Input=vt;class wt extends gt{constructor(){super(...arguments);this.publish=h=>Ae(this,void 0,void 0,function*(){this.client===null?console.error("trying to send without connection; not possible until connected"):this.client.publish(this.definition.topic,h)})}}Se.Output=wt;class lr{constructor(h,d){this.agentType=null,this.agentID=null,this.inputs=[],this.outputs=[],this.connect=(o,n=!0)=>Ae(this,void 0,void 0,function*(){const l=(o==null?void 0:o.protocol)||ke.default.broker.protocol,a=(o==null?void 0:o.host)||ke.default.broker.host,f=(o==null?void 0:o.port)||ke.default.broker.port,e=(o==null?void 0:o.path)||ke.default.broker.path,r=(o==null?void 0:o.username)||ke.default.broker.username,t=(o==null?void 0:o.password)||ke.default.broker.password,i=`${l}://${a}:${f}${e}`;console.log("Tether Agent connecting to MQTT broker @",i);try{this.client=yield sr.default.connectAsync(i,{username:r,password:t},n),console.info("Connected OK"),this.listenForIncoming()}catch(y){throw console.error("Error connecting to MQTT broker:",{error:y,url:i}),y}}),this.disconnect=()=>Ae(this,void 0,void 0,function*(){this.client?(yield this.client.end(),console.log("MQTT client closed normally")):console.warn("MQTT client not available on disconnect request")}),this.getClient=()=>this.client,this.getIsConnected=()=>this.client!==null,this.getInput=o=>this.inputs.find(n=>n.getDefinition().name===o),this.getOutput=o=>this.inputs.find(n=>n.getDefinition().name===o),this.createOutput=(o,n)=>Ae(this,void 0,void 0,function*(){const l={name:o,topic:n||`${this.agentType}/${this.agentID}/${o}`,flowDirection:"out"},a=new wt(this.client,l);return this.outputs.push(a),a}),this.createInput=(o,n)=>Ae(this,void 0,void 0,function*(){const l={name:o,topic:n||`+/+/${o}`,flowDirection:"in"},a=new vt(this.client,l);return a.subscribe(),this.inputs.push(a),a}),this.listenForIncoming=()=>{this.client.on("message",(o,n)=>{const l=this.inputs.find(a=>ur(a.getDefinition().topic)?cr(o,a.getDefinition().name):a.getDefinition().topic===o);l?l.emit("message",o,n):console.warn("message received but cannot match to Input Plug:",{topic:o,payload:n})})},this.agentType=h,this.agentID=d||(0,fr.v4)(),this.client=null,console.log("Tether Agent instance:",{agentType:h,agentId:this.agentID})}}or=Se.TetherAgent=lr;const ur=c=>c.includes("+"),cr=(c,h)=>c.split("/")[2]===h;var bt=4294967295;function hr(c,h,d){var o=d/4294967296,n=d;c.setUint32(h,o),c.setUint32(h+4,n)}function mt(c,h,d){var o=Math.floor(d/4294967296),n=d;c.setUint32(h,o),c.setUint32(h+4,n)}function dr(c,h){var d=c.getInt32(h),o=c.getUint32(h+4);return d*4294967296+o}var Ne=(typeof process=="undefined"||process.env.TEXT_ENCODING!=="never")&&typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined";function _t(c){for(var h=c.length,d=0,o=0;o<h;){var n=c.charCodeAt(o++);if((n&4294967168)==0){d++;continue}else if((n&4294965248)==0)d+=2;else{if(n>=55296&&n<=56319&&o<h){var l=c.charCodeAt(o);(l&64512)==56320&&(++o,n=((n&1023)<<10)+(l&1023)+65536)}(n&4294901760)==0?d+=3:d+=4}}return d}function pr(c,h,d){for(var o=c.length,n=d,l=0;l<o;){var a=c.charCodeAt(l++);if((a&4294967168)==0){h[n++]=a;continue}else if((a&4294965248)==0)h[n++]=a>>6&31|192;else{if(a>=55296&&a<=56319&&l<o){var f=c.charCodeAt(l);(f&64512)==56320&&(++l,a=((a&1023)<<10)+(f&1023)+65536)}(a&4294901760)==0?(h[n++]=a>>12&15|224,h[n++]=a>>6&63|128):(h[n++]=a>>18&7|240,h[n++]=a>>12&63|128,h[n++]=a>>6&63|128)}h[n++]=a&63|128}}var Ie=Ne?new TextEncoder:void 0,yr=Ne?typeof process!="undefined"&&process.env.TEXT_ENCODING!=="force"?200:0:bt;function gr(c,h,d){h.set(Ie.encode(c),d)}function vr(c,h,d){Ie.encodeInto(c,h.subarray(d))}var wr=(Ie==null?void 0:Ie.encodeInto)?vr:gr;Ne&&new TextDecoder;Ne&&typeof process!="undefined"&&process.env.TEXT_DECODER;var je=function(){function c(h,d){this.type=h,this.data=d}return c}(),br=globalThis&&globalThis.__extends||function(){var c=function(h,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(o[l]=n[l])},c(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(h,d);function o(){this.constructor=h}h.prototype=d===null?Object.create(d):(o.prototype=d.prototype,new o)}}(),mr=function(c){br(h,c);function h(d){var o=c.call(this,d)||this,n=Object.create(h.prototype);return Object.setPrototypeOf(o,n),Object.defineProperty(o,"name",{configurable:!0,enumerable:!1,value:h.name}),o}return h}(Error),_r=-1,Er=4294967296-1,Sr=17179869184-1;function xr(c){var h=c.sec,d=c.nsec;if(h>=0&&d>=0&&h<=Sr)if(d===0&&h<=Er){var o=new Uint8Array(4),n=new DataView(o.buffer);return n.setUint32(0,h),o}else{var l=h/4294967296,a=h&4294967295,o=new Uint8Array(8),n=new DataView(o.buffer);return n.setUint32(0,d<<2|l&3),n.setUint32(4,a),o}else{var o=new Uint8Array(12),n=new DataView(o.buffer);return n.setUint32(0,d),mt(n,4,h),o}}function Tr(c){var h=c.getTime(),d=Math.floor(h/1e3),o=(h-d*1e3)*1e6,n=Math.floor(o/1e9);return{sec:d+n,nsec:o-n*1e9}}function Cr(c){if(c instanceof Date){var h=Tr(c);return xr(h)}else return null}function Ar(c){var h=new DataView(c.buffer,c.byteOffset,c.byteLength);switch(c.byteLength){case 4:{var d=h.getUint32(0),o=0;return{sec:d,nsec:o}}case 8:{var n=h.getUint32(0),l=h.getUint32(4),d=(n&3)*4294967296+l,o=n>>>2;return{sec:d,nsec:o}}case 12:{var d=dr(h,4),o=h.getUint32(0);return{sec:d,nsec:o}}default:throw new mr("Unrecognized data size for timestamp (expected 4, 8, or 12): "+c.length)}}function kr(c){var h=Ar(c);return new Date(h.sec*1e3+h.nsec/1e6)}var Ir={type:_r,encode:Cr,decode:kr},Rr=function(){function c(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Ir)}return c.prototype.register=function(h){var d=h.type,o=h.encode,n=h.decode;if(d>=0)this.encoders[d]=o,this.decoders[d]=n;else{var l=1+d;this.builtInEncoders[l]=o,this.builtInDecoders[l]=n}},c.prototype.tryToEncode=function(h,d){for(var o=0;o<this.builtInEncoders.length;o++){var n=this.builtInEncoders[o];if(n!=null){var l=n(h,d);if(l!=null){var a=-1-o;return new je(a,l)}}}for(var o=0;o<this.encoders.length;o++){var n=this.encoders[o];if(n!=null){var l=n(h,d);if(l!=null){var a=o;return new je(a,l)}}}return h instanceof je?h:null},c.prototype.decode=function(h,d,o){var n=d<0?this.builtInDecoders[-1-d]:this.decoders[d];return n?n(h,d,o):new je(d,h)},c.defaultCodec=new c,c}();function Mr(c){return c instanceof Uint8Array?c:ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):c instanceof ArrayBuffer?new Uint8Array(c):Uint8Array.from(c)}var Or=100,Lr=2048,Pr=function(){function c(h,d,o,n,l,a,f,e){h===void 0&&(h=Rr.defaultCodec),d===void 0&&(d=void 0),o===void 0&&(o=Or),n===void 0&&(n=Lr),l===void 0&&(l=!1),a===void 0&&(a=!1),f===void 0&&(f=!1),e===void 0&&(e=!1),this.extensionCodec=h,this.context=d,this.maxDepth=o,this.initialBufferSize=n,this.sortKeys=l,this.forceFloat32=a,this.ignoreUndefined=f,this.forceIntegerToFloat=e,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return c.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},c.prototype.reinitializeState=function(){this.pos=0},c.prototype.encode=function(h){return this.reinitializeState(),this.doEncode(h,1),this.getUint8Array()},c.prototype.doEncode=function(h,d){if(d>this.maxDepth)throw new Error("Too deep objects in depth "+d);h==null?this.encodeNil():typeof h=="boolean"?this.encodeBoolean(h):typeof h=="number"?this.encodeNumber(h):typeof h=="string"?this.encodeString(h):this.encodeObject(h,d)},c.prototype.ensureBufferSizeToWrite=function(h){var d=this.pos+h;this.view.byteLength<d&&this.resizeBuffer(d*2)},c.prototype.resizeBuffer=function(h){var d=new ArrayBuffer(h),o=new Uint8Array(d),n=new DataView(d);o.set(this.bytes),this.view=n,this.bytes=o},c.prototype.encodeNil=function(){this.writeU8(192)},c.prototype.encodeBoolean=function(h){h===!1?this.writeU8(194):this.writeU8(195)},c.prototype.encodeNumber=function(h){Number.isSafeInteger(h)&&!this.forceIntegerToFloat?h>=0?h<128?this.writeU8(h):h<256?(this.writeU8(204),this.writeU8(h)):h<65536?(this.writeU8(205),this.writeU16(h)):h<4294967296?(this.writeU8(206),this.writeU32(h)):(this.writeU8(207),this.writeU64(h)):h>=-32?this.writeU8(224|h+32):h>=-128?(this.writeU8(208),this.writeI8(h)):h>=-32768?(this.writeU8(209),this.writeI16(h)):h>=-2147483648?(this.writeU8(210),this.writeI32(h)):(this.writeU8(211),this.writeI64(h)):this.forceFloat32?(this.writeU8(202),this.writeF32(h)):(this.writeU8(203),this.writeF64(h))},c.prototype.writeStringHeader=function(h){if(h<32)this.writeU8(160+h);else if(h<256)this.writeU8(217),this.writeU8(h);else if(h<65536)this.writeU8(218),this.writeU16(h);else if(h<4294967296)this.writeU8(219),this.writeU32(h);else throw new Error("Too long string: "+h+" bytes in UTF-8")},c.prototype.encodeString=function(h){var d=1+4,o=h.length;if(o>yr){var n=_t(h);this.ensureBufferSizeToWrite(d+n),this.writeStringHeader(n),wr(h,this.bytes,this.pos),this.pos+=n}else{var n=_t(h);this.ensureBufferSizeToWrite(d+n),this.writeStringHeader(n),pr(h,this.bytes,this.pos),this.pos+=n}},c.prototype.encodeObject=function(h,d){var o=this.extensionCodec.tryToEncode(h,this.context);if(o!=null)this.encodeExtension(o);else if(Array.isArray(h))this.encodeArray(h,d);else if(ArrayBuffer.isView(h))this.encodeBinary(h);else if(typeof h=="object")this.encodeMap(h,d);else throw new Error("Unrecognized object: "+Object.prototype.toString.apply(h))},c.prototype.encodeBinary=function(h){var d=h.byteLength;if(d<256)this.writeU8(196),this.writeU8(d);else if(d<65536)this.writeU8(197),this.writeU16(d);else if(d<4294967296)this.writeU8(198),this.writeU32(d);else throw new Error("Too large binary: "+d);var o=Mr(h);this.writeU8a(o)},c.prototype.encodeArray=function(h,d){var o=h.length;if(o<16)this.writeU8(144+o);else if(o<65536)this.writeU8(220),this.writeU16(o);else if(o<4294967296)this.writeU8(221),this.writeU32(o);else throw new Error("Too large array: "+o);for(var n=0,l=h;n<l.length;n++){var a=l[n];this.doEncode(a,d+1)}},c.prototype.countWithoutUndefined=function(h,d){for(var o=0,n=0,l=d;n<l.length;n++){var a=l[n];h[a]!==void 0&&o++}return o},c.prototype.encodeMap=function(h,d){var o=Object.keys(h);this.sortKeys&&o.sort();var n=this.ignoreUndefined?this.countWithoutUndefined(h,o):o.length;if(n<16)this.writeU8(128+n);else if(n<65536)this.writeU8(222),this.writeU16(n);else if(n<4294967296)this.writeU8(223),this.writeU32(n);else throw new Error("Too large map object: "+n);for(var l=0,a=o;l<a.length;l++){var f=a[l],e=h[f];this.ignoreUndefined&&e===void 0||(this.encodeString(f),this.doEncode(e,d+1))}},c.prototype.encodeExtension=function(h){var d=h.data.length;if(d===1)this.writeU8(212);else if(d===2)this.writeU8(213);else if(d===4)this.writeU8(214);else if(d===8)this.writeU8(215);else if(d===16)this.writeU8(216);else if(d<256)this.writeU8(199),this.writeU8(d);else if(d<65536)this.writeU8(200),this.writeU16(d);else if(d<4294967296)this.writeU8(201),this.writeU32(d);else throw new Error("Too large extension object: "+d);this.writeI8(h.type),this.writeU8a(h.data)},c.prototype.writeU8=function(h){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,h),this.pos++},c.prototype.writeU8a=function(h){var d=h.length;this.ensureBufferSizeToWrite(d),this.bytes.set(h,this.pos),this.pos+=d},c.prototype.writeI8=function(h){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,h),this.pos++},c.prototype.writeU16=function(h){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,h),this.pos+=2},c.prototype.writeI16=function(h){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,h),this.pos+=2},c.prototype.writeU32=function(h){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,h),this.pos+=4},c.prototype.writeI32=function(h){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,h),this.pos+=4},c.prototype.writeF32=function(h){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,h),this.pos+=4},c.prototype.writeF64=function(h){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,h),this.pos+=8},c.prototype.writeU64=function(h){this.ensureBufferSizeToWrite(8),hr(this.view,this.pos,h),this.pos+=8},c.prototype.writeI64=function(h){this.ensureBufferSizeToWrite(8),mt(this.view,this.pos,h),this.pos+=8},c}(),Br={};function zr(c,h){h===void 0&&(h=Br);var d=new Pr(h.extensionCodec,h.context,h.maxDepth,h.initialBufferSize,h.sortKeys,h.forceFloat32,h.ignoreUndefined,h.forceIntegerToFloat);return d.encode(c)}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.remapCoords=xe.remapArray=Fr=xe.remap=void 0;const Ur=c=>c.reduce((h,d)=>d.length!==2||d[0]===d[1]?!1:h,!0),Ge=(c,h,d,o=!1,n=!1)=>{if(!Ur([h,d]))throw Error("inputRange and targetRange must be number arrays with exactly 2 elements");let l=(c-h[0])/(h[1]-h[0])*(d[1]-d[0])+d[0];return o===!0&&(d[0]<d[1]?l>d[1]?l=d[1]:l<d[0]&&(l=d[0]):l<d[1]?l=d[1]:l>d[0]&&(l=d[0])),n?Math.round(l):l};var Fr=xe.remap=Ge;const Dr=(c,h,d,o=!1,n=!1)=>c.reduce((l,a)=>[...l,Ge(a,h,d,o,n)],[]);xe.remapArray=Dr;const Nr=(c,h,d,o=!1,n=!0)=>{if(c.length!==d.length||c.length!==h.length)throw Error("coordinates must have same number of dimensions as input and target dimensions");return c.map((l,a)=>Ge(l,[0,h[a]],[0,d[a]],o,n))};xe.remapCoords=Nr;export{or as T,zr as e,Fr as r};
